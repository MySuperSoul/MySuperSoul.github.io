<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[cs224n-papers]]></title>
    <url>%2F2020%2F07%2F28%2Fcs224n-papers%2F</url>
    <content type="text"><![CDATA[This post will mainly contain the paper notes about the papers in cs224n course. Usally some typical papers in nlp field. word2vecModel ArchitecturesMainly two types: NNLM and RNNLM. New log-linear modelsCBOWCBOW(continuos bag of words) model, the main idea is using context to predict the center word. Input is the context words, with one projection hidden layer, and output center word. The architecture is shown: Skip-gram modelSkip-gram model is different from CBOW, in skip-gram model, it tries to maximize classification of a word based on another word in the same sentence. So input is the center word, with one projection layer, and output is the probabilities of other context words. The architecture is shown: Distributed Representations of Words and Phrases and their CompositionalityAbstractIn this paper we present several extensions that improve both the quality of the vectors and the training speed. By subsampling of the frequent words we obtain significant speedup and also learn more regular word representations. We also describe a simple alternative to the hierarchical softmax called negative sampling. Skip-gram modelTry to maximize the avg log probility: $$\frac{1}{T} \sum_{t=1}^{T} \sum_{-c \leq j \leq c, j \neq 0} \log p\left(w_{t+j} \mid w_{t}\right)$$ And the probility is calculated using softmax function: $$p\left(w_{O} \mid w_{I}\right)=\frac{\exp \left(v_{w o}^{\prime}{\top} v_{w_{I}}\right)}{\sum_{w=1}^{W} \exp \left(v_{w}^{\prime}{ }^{\top} v_{w_{I}}\right)}$$ But in actual scene, itâ€™s inpractical because the $\nabla \log p\left(w_{O} \mid w_{I}\right)$ is related to W, usally is very large, so there are some tricks to faster the training process. Hierarchical SoftmaxUsing Huffleman tree to reduce the word num in softmax function. Negative Samplingnegative sampling has 2 effects that can fast the training process. First is to use $\sigma$: logisitic regression to replace the softmax to represent the probility. Second is to subsample the negative samples. Meanwhile it can just update some of the parameters in backpropogation, because we just random choose k negative samples not all negative samples. The formula can represent as: $$\log \sigma\left(v_{w_{O}}^{\prime}{ }^{\top} v_{w_{I}}\right)+\sum_{i=1}^{k} E_{w_{i} \sim P_{n}(w)}\left[\log \sigma\left(-v_{w_{i}}^{\prime}{ }^{\top} v_{w_{I}}\right)\right]$$ To replace the $\log P\left(w_{O} \mid w_{I}\right)$ term in skip-gram. Subsampling of Frequent WordsTo counter the imbalance between the rare and frequent words, we used a simple subsampling approach: each word $\omega_i$ in the training set is discarded with probability computed by the formula: $$P\left(w_{i}\right)=1-\sqrt{\frac{t}{f\left(w_{i}\right)}}$$ t is a sample threshold, t is higher means the probility of discarding will go high. And $f(\omega_i)$ means the frequency of word $\omega_i$.]]></content>
      <categories>
        <category>nlp</category>
      </categories>
      <tags>
        <tag>cs224</tag>
        <tag>nlp</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[data-processing]]></title>
    <url>%2F2019%2F07%2F16%2Fdata-processing%2F</url>
    <content type="text"><![CDATA[è¿™æ˜¯æœ¬æ¬¡é¡¹ç›®å®žè®­è¯¾ç¨‹å½“ä¸­ï¼Œæˆ‘æ‰€è´Ÿè´£çš„æ•°æ®åŽå¤„ç†æ¨¡å—æ‰€å®žé™…ä½¿ç”¨çš„ä¸¤ç§ç®—æ³•ã€‚ä¸€ç§æ˜¯simhashç®—æ³•ï¼ŒGoogleåœ¨ç”¨çš„æµ·é‡ç½‘é¡µåŽ»é‡çš„ç®—æ³•ï¼Œå¦ä¸€ç§æ˜¯textrankç®—æ³•ï¼Œç”¨äºŽè¿›è¡Œå…³é”®è¯æå–ã€æ–‡æ¡£è‡ªåŠ¨æ‘˜è¦ç­‰ç®—æ³•ã€‚åœ¨è¿™é‡Œå¯¹è¿™ä¸¤ç§ç®—æ³•è¿›è¡Œç›¸å…³çš„é˜è¿°ã€‚ è¯¾ç¨‹è®ºæ–‡ç®€è¿°&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; å› ä¸ºåœ¨æœ¬æ¬¡å®žçŽ°çš„æœç´¢å¼•æ“Žé¡¹ç›®å½“ä¸­ï¼Œæˆ‘ä¸»è¦è´Ÿè´£çš„å°±æ˜¯å„ç±»æ•°æ®çš„èŽ·å–ï¼Œä»¥åŠä¸»è¦çš„æ•°æ®åŽå¤„ç†å·¥ä½œã€‚çˆ¬è™«éƒ¨åˆ†æ„Ÿè§‰æ²¡æœ‰ä»€ä¹ˆå¥½è®²çš„ï¼Œé€šè¿‡scrapyå’Œseleniumã€requests, å¯¹äºŽä¸€èˆ¬çš„ç½‘ç«™çˆ¬å–å·¥ä½œéƒ½å¯ä»¥èƒœä»»ï¼Œä¸è¿‡ä¸ºäº†åº”å¯¹å¾ˆå¤šç½‘ç«™çš„åçˆ¬è™«ç­–ç•¥ï¼Œæˆ‘ä»¬è‡ªå·±å®žçŽ°çš„IPæ± è¿˜æ˜¯æœ‰äº®ç‚¹çš„ï¼Œä¸è¿‡ä¸æ˜¯æˆ‘å†™çš„æ‰€ä»¥æˆ‘è¿™é‡Œå°±ä¸å±•å¼€ã€‚æˆ‘è§‰å¾—æ¯”è¾ƒæœ‰ç‰¹è‰²æ˜¯æ•°æ®åŽå¤„ç†éƒ¨åˆ†ï¼Œåœ¨å¾—åˆ°æ•°æ®ä¹‹åŽå¿…è¦çš„å·¥ä½œæ˜¯éœ€è¦å¯¹æ•°æ®è¿›è¡Œæ¸…æ´—å’ŒåŠ å·¥ï¼Œæ‰€ä»¥æˆ‘ä¸»è¦é€‰å–äº†é¡¹ç›®å½“ä¸­åœ¨ç”¨çš„simhashæ–‡æœ¬ç›¸ä¼¼åº¦è¿‡æ»¤ç®—æ³•å’Œtextrankè‡ªåŠ¨æ‘˜è¦ç®—æ³•æ¥å†™æœ¬æ¬¡çš„è¯¾ç¨‹è®ºæ–‡ã€‚ æ–‡æœ¬ç›¸ä¼¼åº¦å¤„ç† æ–‡æœ¬è·ç¦» &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;åœ¨æ­£å¼ä»‹ç»æ–‡æœ¬ç›¸ä¼¼åº¦ç®—æ³•ä¹‹å‰ï¼Œé¦–å…ˆæˆ‘ä¼šå¯¹å‡ ç§æ¯”è¾ƒå¸¸ç”¨çš„æ–‡æœ¬è·ç¦»è®¡ç®—æ–¹å¼è¿›è¡Œä»‹ç»ã€‚å› ä¸ºæ–‡æœ¬ç›¸ä¼¼åº¦è®¡ç®—çš„åŸºç¡€è¿˜æ˜¯åœ¨äºŽä¸åŒæ–‡æœ¬å½“ä¸­çš„æ–‡æœ¬è·ç¦»æ˜¯å¦‚ä½•å®šä¹‰çš„ï¼Œä¸åŒçš„æ–‡æœ¬è·ç¦»è®¡ç®—ä¼šå¯¼è‡´ä¸åŒçš„ç›¸ä¼¼åº¦çš„ç”Ÿæˆã€‚ æ¬§å‡ é‡Œå¾—è·ç¦» &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; æ¬§å‡ é‡Œå¾—è·ç¦»åˆç§°æ¬§æ°è·ç¦»ã€‚æ˜¯æˆ‘ä»¬å®žé™…å½“ä¸­ä½¿ç”¨éžå¸¸é¢‘ç¹çš„ä¸€ç§è·ç¦»è®¡ç®—æ–¹å¼ã€‚åœ¨æ¬§æ°ç©ºé—´å½“ä¸­ï¼Œä¸¤ä¸ªç‚¹$x=(x_1, x_2, â€¦, x_n), y=(y_1, y_2, â€¦, y_n)$ä¹‹é—´çš„æ¬§æ°è·ç¦»å¯ä»¥è¡¨ç¤ºä¸º: $$d(x, y) = \sqrt{\sum_{i=1}^n(x_i - y_i)^2}$$ æ›¼å“ˆé¡¿è·ç¦» &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; æ›¼å“ˆé¡¿è·ç¦»æ˜¯ç”¨æ¥åœ¨æ¬§æ°ç©ºé—´æ ‡æ˜Žä¸¤ä¸ªç‚¹åœ¨æ ‡å‡†åæ ‡ç³»ä¸Šçš„ç»å¯¹è½´è·æ€»å’Œçš„ä¸€ç§è·ç¦»åº¦é‡æ–¹å¼ã€‚ä»Žå‡ ä½•çš„è§’åº¦æ¥çœ‹ï¼Œæ¬§æ°è·ç¦»åº¦é‡çš„æ˜¯ä¸¤ä¸ªç‚¹çš„å®žé™…è·ç¦»ï¼Œæ›¼å“ˆé¡¿è·ç¦»åº¦é‡çš„æ˜¯ä¸¤ä¸ªç‚¹çš„ç»å¯¹è½´ä¹‹é—´çš„è·ç¦»ã€‚ä¾‹å¦‚åœ¨ç›´è§’åæ ‡ç³»å½“ä¸­$x=(x_1, x_2), y=(y_1, y_2)$, é‚£ä¹ˆä¸¤ä¸ªç‚¹ä¹‹é—´çš„æ›¼å“ˆé¡¿è·ç¦»è¡¨ç¤ºä¸ºï¼š $$d(x, y) = |x_1-y_1| + |x_2 - y_2|$$ ä½™å¼¦è·ç¦» &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ä½™å¼¦è·ç¦» æ˜¯é€šè¿‡è®¡ç®—ä¸¤ä¸ªå‘é‡ä¹‹é—´å¤¹è§’ä½™å¼¦å€¼æ¥è¡¡é‡ä¸¤ä¸ªå‘é‡ä¹‹é—´ç›¸ä¼¼åº¦çš„ä¸€ç§å¸¸ç”¨çš„æ–¹æ³•ã€‚æˆ‘ä»¬éƒ½çŸ¥é“å¦‚æžœä¸¤ä¸ªå‘é‡ä¹‹é—´çš„å¤¹è§’è¶Šå°ï¼Œä½™å¼¦å€¼å°±è¶ŠæŽ¥è¿‘1.æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡è®¡ç®—ä¸¤ä¸ªå‘é‡çš„ä½™å¼¦å¤¹è§’æ¥è¡¡é‡ä¸¤ä¸ªå‘é‡ä¹‹é—´çš„ç›¸ä¼¼åº¦ã€‚ç»™å®šä¸¤ä¸ªå‘é‡$A, B$ï¼Œ ä»–ä»¬ä½™å¼¦è·ç¦»è¡¡é‡å…¬å¼å¦‚ä¸‹ï¼š $$similarity(A, B) = \cos(A, B) = \frac{\sum_{i=1}^n A_i \cdot B_i}{\sum_{i=1}^n(A_i)^2 \cdot \sum_{i=1}^n(B_i)^2}$$ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; å¦‚æžœsimilarityè¶ŠæŽ¥è¿‘1ï¼Œæˆ‘ä»¬è®¤ä¸ºè¿™ä¸¤ä¸ªå‘é‡ä¹‹é—´çš„è·ç¦»è¶Šå°ï¼Œä¹Ÿå³ç›¸ä¼¼åº¦ä¹Ÿå°±è¶Šé«˜ã€‚ æµ·æ˜Žè·ç¦»(Hamming distance) &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; æµ·æ˜Žè·ç¦»åˆç§°Hamming distance. æ˜¯åœ¨ç¼–ç é¢†åŸŸå¸¸ç”¨çš„ä¸€ç§è·ç¦»åº¦é‡çš„æ–¹æ³•ã€‚è€Œä¸”æ–¹æ³•å’Œæ€æƒ³éžå¸¸çš„æœ´ç´ ï¼Œç›¸ä¿¡å¤§å®¶ä¹‹å‰åœ¨è®¡ç®—æœºç½‘ç»œè¯¾ç¨‹å½“ä¸­å·²ç»æŽ¥è§¦è¿‡æµ·æ˜Žç çš„æ¦‚å¿µã€‚æµ·æ˜Žè·ç¦»å¯¹äºŽäºŒè¿›åˆ¶çš„å­—ç¬¦ä¸²ä¹‹é—´çš„è®¡ç®—ï¼Œéžå¸¸ç®€å•ï¼Œå°±æ˜¯ç›´æŽ¥è®¡ç®—æ‰€æœ‰ä½ä¸Šï¼Œä¸åŒçš„ç å­—çš„æ•°é‡ã€‚ä¾‹å¦‚1011101ä¸Ž1001001ä¹‹é—´çš„æ±‰æ˜Žè·ç¦»æ˜¯2. è™½ç„¶hamming distanceçš„æ€è·¯éžå¸¸ç®€å•ï¼Œä½†æ˜¯å®ƒåœ¨å¾ˆå¤šé¢†åŸŸå½“ä¸­éƒ½æœ‰ç€éžå¸¸é‡è¦çš„ä½œç”¨ï¼Œåœ¨ä¹‹åŽæˆ‘ä¼šä»‹ç»çš„ï¼Œåœ¨æˆ‘ä»¬æœç´¢å¼•æ“Žé¡¹ç›®å½“ä¸­ä½¿ç”¨çš„æ–‡æœ¬ç›¸ä¼¼åº¦ç®—æ³•å°±æ˜¯åˆ©ç”¨äº†hamming distanceæ¥è¿›è¡Œè®¡ç®—ç›¸ä¼¼åº¦ã€‚ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; åŒæ—¶å› ä¸ºhamming distanceå¯¹äºŽ0ï¼Œ1å­—ç¬¦ä¸²çš„åº¦é‡æœ‰éžå¸¸å¿«é€Ÿçš„ç®—æ³•ï¼Œä¹‹é—´é€šè¿‡ä½è¿ç®—çš„æ–¹å¼å¯ä»¥å¿«é€Ÿçš„æ±‚å¾—ä¸¤ä¸ª0, 1å­—ç¬¦ä¸²ä¹‹é—´çš„æµ·æ˜Žè·ç¦»ï¼Œåœ¨æˆ‘ä»¬åŽå¤„ç†å½“ä¸­ï¼Œå°±æ˜¯åˆ©ç”¨è¿™ç§æ–¹æ³•èƒ½å¤Ÿå¿«é€Ÿè¿›è¡Œhamming distanceè®¡ç®—ï¼š 123456789101112131415'''params: code_1 -&gt; str: first hamming code code_2 -&gt; str: second hamming code hash_bits -&gt; int: number of the length of two hamming codereturn: ans -&gt; int: hamming distance of two hamming code'''def HammingDistance(self, code_1, code_2): x = (code_1 ^ code_2) &amp; ((1 &lt;&lt; self.hash_bits) - 1) ans = 0 while x: ans += 1 x &amp;= x - 1 return ans æµ·é‡æ–‡æœ¬ç›¸ä¼¼åº¦ç®—æ³•Simhash &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; åœ¨è¿™æ¬¡çš„æœç´¢å¼•æ“Žé¡¹ç›®å½“ä¸­ï¼Œæ•°æ®åŽå¤„ç†çš„é¦–å…ˆé—®é¢˜å°±æ˜¯å¦‚ä½•å¯¹æ”¶é›†åˆ°çš„å„ç§ä¿¡æ¯è¿›è¡ŒåŽ»é‡ã€‚ä¸€ä¸ªæœ€ç›´æŽ¥çš„æ–¹æ³•å°±æ˜¯æ ¹æ®URLä½¿ç”¨setè¿›è¡ŒåŽ»é‡ï¼Œå½“ç„¶è¿™åªæ˜¯æœ€åŸºæœ¬çš„é‡å¤æ»¤é‡ã€‚è¿˜æœ‰å¦å¤–ä¸€ç§æƒ…å†µæˆ‘ä»¬ä¹Ÿå¿…é¡»è¦è€ƒè™‘åˆ°ï¼Œä¹Ÿå°±æ˜¯å­˜åœ¨æ–‡ç« è½¬è½½æˆ–è€…æŠ„è¢­çš„æƒ…å†µï¼Œæ‰€ä»¥æˆ‘ä»¬å¯¹äºŽè¿™ç§æƒ…å†µä¹Ÿå¿…é¡»è¿›è¡Œæ•°æ®çš„å¤„ç†å’Œæ»¤é‡ã€‚ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¦‚æžœè¦è®¡ç®—ä¸¤ç¯‡æ–‡æ¡£ä¹‹é—´çš„ç›¸ä¼¼åº¦ï¼Œä¼ ç»Ÿçš„æ€è·¯å¯èƒ½æ˜¯ï¼š å¯ä»¥é€šè¿‡å°†ä¸¤ç¯‡æ–‡ç« è¿›è¡Œåˆ†è¯ï¼Œé€šè¿‡å…³é”®è¯å’Œå¯¹åº”çš„æƒé‡ç”Ÿæˆç‰¹å¾è¯å‘é‡ï¼Œç„¶åŽå°±èƒ½é€šè¿‡æˆ‘ä»¬å‰é¢ä»‹ç»çš„å‡ ç§æ–‡æœ¬è·ç¦»è®¡ç®—çš„æ–¹æ³•è¿›è¡Œè·ç¦»åº¦é‡ï¼ˆæ¯”å¦‚å¯ä»¥è®¡ç®—ç‰¹å¾å‘é‡ä¹‹é—´çš„æ¬§æ°è·ç¦»ï¼Œæˆ–è€…æ˜¯é€šè¿‡ä½™å¼¦è·ç¦»æ¥åº¦é‡ä¸¤ä¸ªç‰¹å¾è¯å‘é‡ä¹‹é—´çš„ç›¸ä¼¼åº¦ï¼‰ã€‚é€šè¿‡è·ç¦»çš„å¤§å°æ¥åº¦é‡ä¸¤ç¯‡æ–‡æ¡£çš„ç›¸ä¼¼åº¦ã€‚ é€šè¿‡hashçš„æ–¹æ³•ï¼Œä¸ºæ¯ä¸€ç¯‡æ–‡æ¡£é€šè¿‡å“ˆå¸Œçš„æ–¹æ³•ç”Ÿæˆä¸€ä¸ªç‰¹å®šçš„å“ˆå¸ŒæŒ‡çº¹ï¼Œç„¶åŽé€šè¿‡æ¯”å¯¹ç”Ÿæˆçš„å“ˆå¸ŒæŒ‡çº¹å¯¹æ–‡æœ¬çš„ç›¸ä¼¼åº¦è¿›è¡Œè®¡ç®—ã€‚ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; å½“ç„¶è¿™ä¸¤ç§æ–¹æ³•éƒ½å­˜åœ¨ç€å¾ˆå¤§çš„å¼Šç«¯ï¼Œå¯¹äºŽç¬¬ä¸€ç§æ–¹æ³•çš„è¯ï¼Œåœ¨æµ·é‡çš„æ•°æ®é¢å‰ï¼Œè¿™ä¸ªç®—æ³•æ‰€éœ€è¦è€—è´¹çš„æ—¶é—´æ˜¯éš¾ä»¥æƒ³è±¡çš„ï¼Œæ‰€ä»¥è¿™ç§æ–¹æ³•è¿ç”¨åˆ°æœç´¢å¼•æ“Žä¸Šï¼Œç†è®ºä¸Šåœ¨æ—¶é—´çš„èŠ±è´¹æˆæœ¬éžå¸¸ä¹‹é«˜ã€‚ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; å¯¹äºŽç¬¬äºŒç§æ–¹æ³•çš„è¯ï¼Œé‡ç‚¹å°±åœ¨äºŽå¦‚ä½•è®¾è®¡ä¸€ä¸ªå¥½çš„hashå‡½æ•°ï¼Œå¦‚æžœé‡‡ç”¨ä¼ ç»Ÿçš„hashæ–¹æ³•ï¼Œæ¯”å¦‚è¯´æ˜¯md5è¿™ç§å±€éƒ¨ä¸æ•æ„Ÿçš„å“ˆå¸Œæ–¹æ³•çš„è¯ï¼Œé‚£ä¹ˆåœ¨æ–‡æœ¬æœ‰å¾ˆå°çš„å˜åŠ¨æ—¶å€™ï¼Œç”Ÿæˆçš„md5å“ˆå¸Œç çš„å·®å¼‚ä¹Ÿä¼šç›¸å·®ç”šè¿œï¼Œæ˜¾ç„¶è¿™ä¸æ˜¯æˆ‘ä»¬éœ€è¦çš„hashå‡½æ•°ã€‚æˆ‘ä»¬ç†æƒ³çš„hashå‡½æ•°åº”è¯¥å¯¹äºŽç›¸ä¼¼çš„æ–‡æ¡£èƒ½å¤Ÿç”Ÿæˆæ¯”è¾ƒç›¸ä¼¼çš„å“ˆå¸Œç ï¼Œä»Žè€Œæˆ‘ä»¬æ‰èƒ½ä»Žhash codeå½“ä¸­æå–æ–‡ç« çš„ç›¸ä¼¼åº¦ã€‚ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; æ‰€ä»¥æŽ¥ä¸‹æ¥å°±ä¼šä»‹ç»Simhashçš„ç®—æ³•ï¼Œç”¨æ¥è§£å†³å·¨å¤§æ•°æ®é‡ç½‘é¡µåŽ»é‡çš„ç®—æ³•ã€‚è¯¥ç®—æ³•æœ€åˆæ˜¯Googleæå‡ºçš„ä¸€ç§ç”¨äºŽç½‘é¡µåŽ»é‡çš„ç®—æ³•ï¼Œè¯¦ç»†çš„è®ºæ–‡å¯ä»¥å‚è€ƒã€Šdetecting near-duplicates for web crawlingã€‹ã€‚ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Simhashæ˜¯å±€éƒ¨ä¸æ•æ„Ÿå“ˆå¸Œæ–¹æ³•å½“ä¸­çš„ä¸€ç§ã€‚ä¹Ÿå³è¾“å…¥æ–‡æ¡£çš„å°éƒ¨åˆ†æ”¹åŠ¨å¯¹æœ€åŽç”Ÿæˆçš„hash codeå¹¶ä¸ä¼šæœ‰å¾ˆå¤§çš„å½±å“ã€‚Simhashæ–¹æ³•çš„ä¸»è¦æ€æƒ³æ˜¯é™ç»´æ€æƒ³ï¼Œé€šè¿‡å°†é«˜ç»´çš„ç‰¹å¾è¯å‘é‡é™ç»´åˆ°ç”Ÿæˆçš„hashcodeç»´åº¦ï¼Œä¸€èˆ¬é€‰å–çš„64bitsæˆ–è€…128bitsç”Ÿæˆhashcode. ç„¶åŽé€šè¿‡è®¡ç®—ä¸åŒæ–‡æ¡£ä¹‹é—´simhashå€¼çš„hamming distanceæ¥åº¦é‡ä¸åŒæ–‡æ¡£ä¹‹é—´çš„ç›¸ä¼¼åº¦ã€‚å…·ä½“çš„simhashç®—æ³•ä¸€èˆ¬å¤„ç†ä¸ºå…­ä¸ªæ­¥éª¤ï¼šåˆ†è¯ -&gt; hash -&gt; åŠ æƒ -&gt; åˆå¹¶ -&gt; é™ç»´ -&gt; hamming distance. åˆ†è¯ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; åˆ†è¯æ­¥éª¤å½“ä¸­ä¸»è¦æ˜¯å¯¹æ–‡æ¡£è¿›è¡Œåˆ†è¯ï¼Œå¹¶ä¸”ç¡®å®šæ¯ä¸ªåˆ†è¯çš„æƒé‡åˆ†å¸ƒã€‚ä¸­æ–‡åˆ†è¯æˆ‘æ‰€ä½¿ç”¨çš„æ˜¯jiebaè¿›è¡Œåˆ†è¯ï¼Œå› ä¸ºæˆ‘ä»¬é¡¹ç›®å½“ä¸­å¤§éƒ¨åˆ†è¿˜æ˜¯æ”¶é›†çš„ä¸­æ–‡åšå®¢ã€demoç­‰èµ„æºï¼Œå¹¶ä¸”åœ¨å®žé™…æµ‹è¯•çš„æ—¶å€™å‘çŽ°jiebaå¯¹äºŽè‹±æ–‡çš„åˆ†è¯æ•ˆæžœä¹Ÿè¿˜æ˜¯å¯ä»¥çš„ï¼å…¶ä¸­æƒé‡å€¼åœ¨åŽç»­ä¼šä½¿ç”¨ï¼Œä»£è¡¨çš„æ˜¯è¯¥è¯è¯­åœ¨æ•´ç¯‡æ–‡ç« å½“ä¸­çš„é‡è¦æ€§ã€‚ hash &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; hashæ­¥éª¤ä¸»è¦æ˜¯å¯¹ä¸Šé¢å¾—åˆ°çš„æ–‡æ¡£è¯è¯­è¿›è¡Œå“ˆå¸Œå‡½æ•°çš„è®¡ç®—ï¼Œé€šå¸¸åœ¨è¿™é‡Œéœ€è¦æŒ‡å®šhash_bits, ä¹Ÿå³åŽç»­çš„æ¯ç¯‡æ–‡æ¡£éƒ½ä¼šé™ç»´åˆ°hash_bitsè¿™ä¸ªç»´åº¦ä¸Šã€‚é€šè¿‡å“ˆå¸Œå‡½æ•°å¤„ç†ä¹‹åŽï¼Œæ¯ä¸ªå­—ç¬¦ä¸²éƒ½ä¼šå˜æˆä¸€ä¸ª01çš„å­—ç¬¦ä¸²ï¼ŒåŒæ—¶é•¿åº¦ä¸ºæˆ‘ä»¬æ‰€å¸Œæœ›çš„hash_bits. åŠ æƒ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; åŠ æƒè¿‡ç¨‹éœ€è¦ä½¿ç”¨åˆ°ä¸Šè¿°æˆ‘ä»¬å¾—åˆ°çš„æƒé‡å€¼ï¼Œé€šè¿‡å¯¹æ‰€æœ‰å¾—åˆ°çš„hashå€¼ä¹˜ä¸Šå¯¹åº”çš„æƒé‡ï¼Œå¾—åˆ°å¯¹åº”çš„åŠ æƒåŽçš„æ–°å“ˆå¸Œå€¼ã€‚å…¶ä¸­å› ä¸ºå¾—åˆ°çš„æ˜¯01å­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬è§„å®šé‡åˆ°1å°±æ˜¯æ­£å€¼ï¼Œé‡åˆ°0å°±æ˜¯è´Ÿå€¼ï¼Œè€ŒåŽè¿›è¡Œè®¡ç®—ã€‚ä¸¾ä¸ªðŸŒ°ï¼Œæ¯”å¦‚æµ™æ±Ÿå¤§å­¦ç¼–ç ä¸º101010, å¹¶ä¸”æƒé‡ä¸º5çš„è¯ï¼Œé€šè¿‡åŠ æƒä¹‹åŽï¼Œå¾—åˆ°çš„æ–°çš„åŠ æƒå“ˆå¸Œå€¼å°±ä¸ºï¼š5 -5 5 -5 5 -5. å…¶ä»–çš„åˆ†è¯åŽçš„è¯è¯­ç±»ä¼¼å¤„ç†ã€‚ åˆå¹¶ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; é€šè¿‡ä¸Šé¢åŠ æƒæ­¥éª¤ä¹‹åŽï¼Œæˆ‘ä»¬å¾—åˆ°äº†æ‰€æœ‰åˆ†è¯çš„åŠ æƒhash codeï¼Œä¹‹åŽæˆ‘ä»¬å¯¹æ‰€æœ‰çš„è¿™äº›åŠ æƒhash codeè¿›è¡Œç›¸åŠ ï¼Œç›¸åŠ ä¹‹åŽå¾—åˆ°çš„åŠ æƒhash codeå°±åšä¸ºæ•´ç¯‡æ–‡æ¡£çš„åŠ æƒhash code. å†ä¸¾ä¸ªðŸŒ°ï¼Œæˆ‘ä»¬å¾—åˆ°æµ™æ±Ÿå¤§å­¦å“ˆå¸Œå€¼ä¸º5 -5 5 -5 5 -5, åŒæ—¶æˆ‘ä»¬è¿˜å¾—åˆ°è½¯ä»¶å·¥ç¨‹è¿™ä¸ªè¯çš„å“ˆå¸Œå€¼ä¸º4 4 -4 4 -4 4, é‚£ä¹ˆæ€»çš„åŠ æƒçš„å“ˆå¸Œå€¼ä¸º9 -1 1 -1 1 -1. å…¶ä»–çš„å¤„ç†æµç¨‹éƒ½æ˜¯ç±»ä¼¼çš„ã€‚ é™ç»´ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; é™ç»´æ­¥éª¤å°±æ˜¯å¯¹ä¸Šè¿°å¾—åˆ°çš„åŠ æƒcodeè¿›è¡Œä¸€ä¸ªç®€å•çš„Signè®¡ç®—ï¼Œä¹Ÿå³ç å€¼å¤§äºŽ0çš„è®°ä¸º1ï¼Œå…¶ä»–çš„è®°ä¸º0ï¼Œå°±æ¯”å¦‚ä¸Šé¢å¾—åˆ°çš„é‚£ä¸€ä¸²åŠ æƒçš„hash codeï¼Œåœ¨ç»è¿‡é™ç»´å¤„ç†ä¹‹åŽï¼Œæˆ‘ä»¬å°±èƒ½å¾—åˆ°æœ€åŽæ–‡ç« ç”Ÿæˆçš„01 hash codeä¸ºï¼š101010. Hamming distance &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; åœ¨ä¸Šè¿°çš„pipelinesä¹‹åŽæˆ‘ä»¬å¾—åˆ°äº†æ•´ç¯‡æ–‡æ¡£çš„hash codeï¼ŒæŽ¥ç€åªéœ€è¦å¯¹ä¸¤ç¯‡æ–‡æ¡£çš„hash codeè®¡ç®—hamming distanceï¼Œå°±èƒ½å¾ˆå¿«çš„å¾—åˆ°ä¸¤ç¯‡æ–‡æ¡£ä¹‹é—´çš„ç›¸ä¼¼åº¦ã€‚ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; æ•´ä¸ªSimhashç®—æ³•çš„æµç¨‹å¯ä»¥ç”¨ä¸‹é¢è¿™å¼ å›¾è¿›è¡Œå±•ç¤ºï¼Œå¾ˆæ¸…æ™°çš„å±•ç¤ºäº†æ•´ä¸ªç®—æ³•çš„æµç¨‹å’Œåšæ³•ï¼š &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; å¯¹äºŽSimhashç®—æ³•åœ¨å®žé™…å¤„ç†æµ·é‡æ•°æ®æ—¶å€™è¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„ä¼˜åŒ–æŸ¥è¯¢æ–¹å¼ï¼Œæ¯”å¦‚å¯¹æœ€åŽç”Ÿæˆçš„hash codeè¿›è¡Œåˆ†å—æŸ¥è¯¢ï¼Œå»ºç«‹å€’æŽ’ç´¢å¼•ç­‰æ–¹å¼åŠ å¿«åœ¨æ ·æœ¬æ•°æ®åº“å½“ä¸­çš„æœç´¢æŸ¥è¯¢é€Ÿåº¦ã€‚æˆ‘ä»¬é¡¹ç›®å½“ä¸­çš„æ•°æ®æ•°é‡è¿œä¸åŠGoogleä¸Šçš„æ ·æœ¬æ•°é‡ï¼Œæ‰€ä»¥å¹¶æ²¡æœ‰è¿›è¡Œè¿‡å¤šçš„ä¼˜åŒ–ï¼Œç›´æŽ¥è®¡ç®—hamming codeè¿›è¡Œåˆ¤æ–­ã€‚åœ¨é¡¹ç›®çš„åŽå¤„ç†æ¨¡å—å½“ä¸­ï¼Œæˆ‘å°†simhashç®—æ³•å°è£…ä¸ºä¸€ä¸ªç±»ï¼Œå…¶ä¸­ä½¿ç”¨äº†å¼€æºé¡¹ç›®simhashæ¥å®Œæˆhash codeçš„è®¡ç®—ã€‚å¹¶ä¸”å½“ç›¸ä¼¼åº¦è¶…è¿‡95%çš„æ—¶å€™ï¼Œæˆ‘å°±è®¤ä¸ºè¿™ä¸¤ç¯‡æ–‡æ¡£æ˜¯éžå¸¸ç›¸ä¼¼çš„ï¼Œéœ€è¦ä»Žæˆ‘ä»¬çš„æ•°æ®åº“å½“ä¸­è¿‡æ»¤æŽ‰ï¼Œå…·ä½“å®žçŽ°å¯ä»¥å‚è€ƒæˆ‘ä»¬æœç´¢å¼•æ“Žé¡¹ç›®å½“ä¸­çš„å®žçŽ°SimHashFilter. å®žé™…æ•ˆæžœæµ‹è¯• &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; åœ¨å®žçŽ°äº†simhashç®—æ³•ä¹‹åŽï¼Œæˆ‘å¯¹å®žçŽ°çš„è¯¥ç®—æ³•è¿›è¡Œäº†ç›¸å…³æµ‹è¯•å’Œæ€§èƒ½ä¼°è®¡ã€‚åœ¨é¡¹ç›®å½“ä¸­æˆ‘æ‰€ç”¨çš„hash_bitsé•¿åº¦ä¸º128, å› ä¸ºå®žé™…æµ‹è¯•æ—¶å€™ä½¿ç”¨64bitsçš„hamming codeç²¾åº¦å¯èƒ½ä¸å¤ªç¬¦åˆå®žé™…çš„éœ€æ±‚ï¼Œæ‰€ä»¥æˆ‘æå‡åˆ°äº†128ä½çš„hash_bits. æµ‹è¯•ä»£ç å’Œæµ‹è¯•æ–‡æœ¬å¦‚ä¸‹ï¼š 123456789101112131415from common.SimHash import SimHashFiltertext1 = "æ²‰é»˜èžºæ—‹æ¨¡å¼ä¸­å‘ˆçŽ°å‡ºæ°‘æ„åŠ¨åŠ›çš„æ¥æºåœ¨äºŽäººç±»æœ‰å®³æ€•å­¤ç«‹çš„å¼±ç‚¹ï¼Œä½†å…‰å®³æ€•å­¤ç«‹ä¸è‡³äºŽå½±å“æ°‘æ„çš„å½¢æˆï¼Œ" \ + "ä¸»è¦æ˜¯å½“ä¸ªäººè§‰å¯Ÿåˆ°è‡ªå·±å¯¹æŸè®ºé¢˜çš„æ„è§ä¸ŽçŽ¯å¢ƒä¸­çš„å¼ºåŠ¿æ„è§ä¸€è‡´ï¼ˆæˆ–ä¸ä¸€è‡´æ—¶ï¼‰ï¼Œå®³æ€•å­¤ç«‹è¿™ä¸ªå˜é¡¹æ‰ä¼šäº§ç”Ÿä½œç”¨ã€‚" \ + "ä»Žå¿ƒç†å­¦çš„èŒƒç•´æ¥çœ‹ï¼Œç¤¾ä¼šä¸­çš„å¼ºåŠ¿æ„è§è¶Šæ¥è¶Šå¼ºï¼Œç”šè‡³æ¯”å®žé™…æƒ…å½¢è¿˜å¼ºï¼Œå¼±åŠ¿æ„è§è¶Šæ¥è¶Šå¼±ï¼Œç”šè‡³æ¯”å®žé™…æƒ…å½¢è¿˜å¼±ï¼Œ\è¿™ç§åŠ¨åŠ›è¿ä½œçš„è¿‡ç¨‹æˆâ€“èžºæ—‹çŠ¶"text2 = "æ²‰é»˜èžºæ—‹æ¨¡å¼ä¸­å‘ˆçŽ°å‡ºæ°‘æ„åŠ¨åŠ›çš„æ¥æºåœ¨äºŽäººç±»æœ‰å®³æ€•å­¤ç«‹çš„å¼±ç‚¹ï¼Œä½†å…‰å®³æ€•å­¤ç«‹ä¸è‡³äºŽå½±å“æ°‘æ„çš„å½¢æˆï¼Œ" \ + "ä»Žå¿ƒç†å­¦çš„èŒƒç•´æ¥çœ‹ï¼Œç¤¾ä¼šä¸­çš„å¼ºåŠ¿æ„è§è¶Šæ¥è¶Šå¼ºï¼Œç”šè‡³æ¯”å®žé™…æƒ…å½¢è¿˜å¼ºï¼Œå¼±åŠ¿æ„è§è¶Šæ¥è¶Šå¼±ï¼Œç”šè‡³æ¯”å®žé™…æƒ…å½¢è¿˜å¼±ï¼Œ\è¿™ç§åŠ¨åŠ›è¿ä½œçš„è¿‡ç¨‹æˆâ€“èžºæ—‹çŠ¶" \+ "ä¸»è¦æ˜¯å½“ä¸ªäººè§‰å¯Ÿåˆ°è‡ªå·±å¯¹æŸè®ºé¢˜çš„æ„è§ä¸ŽçŽ¯å¢ƒä¸­çš„å¼ºåŠ¿æ„è§ä¸€è‡´ï¼ˆæˆ–ä¸ä¸€è‡´æ—¶ï¼‰ï¼Œå®³æ€•å­¤ç«‹è¿™ä¸ªå˜é¡¹æ‰ä¼šäº§ç”Ÿä½œç”¨ã€‚"filter = SimHashFilter(128)print(bin(filter.GetCodeForText(text1)))print(bin(filter.GetCodeForText(text2)))print(filter.IsSimilarByText(text1, text2)) æ–‡æœ¬1: &quot;æ²‰é»˜èžºæ—‹æ¨¡å¼ä¸­å‘ˆçŽ°å‡ºæ°‘æ„åŠ¨åŠ›çš„æ¥æºåœ¨äºŽäººç±»æœ‰å®³æ€•å­¤ç«‹çš„å¼±ç‚¹ï¼Œä½†å…‰å®³æ€•å­¤ç«‹ä¸è‡³äºŽå½±å“æ°‘æ„çš„å½¢æˆï¼Œ&quot; + &quot;ä¸»è¦æ˜¯å½“ä¸ªäººè§‰å¯Ÿåˆ°è‡ªå·±å¯¹æŸè®ºé¢˜çš„æ„è§ä¸ŽçŽ¯å¢ƒä¸­çš„å¼ºåŠ¿æ„è§ä¸€è‡´ï¼ˆæˆ–ä¸ä¸€è‡´æ—¶ï¼‰ï¼Œå®³æ€•å­¤ç«‹è¿™ä¸ªå˜é¡¹æ‰ä¼šäº§ç”Ÿä½œç”¨ã€‚&quot; + &quot;ä»Žå¿ƒç†å­¦çš„èŒƒç•´æ¥çœ‹ï¼Œç¤¾ä¼šä¸­çš„å¼ºåŠ¿æ„è§è¶Šæ¥è¶Šå¼ºï¼Œç”šè‡³æ¯”å®žé™…æƒ…å½¢è¿˜å¼ºï¼Œå¼±åŠ¿æ„è§è¶Šæ¥è¶Šå¼±ï¼Œç”šè‡³æ¯”å®žé™…æƒ…å½¢è¿˜å¼±ï¼Œ è¿™ç§åŠ¨åŠ›è¿ä½œçš„è¿‡ç¨‹æˆâ€“èžºæ—‹çŠ¶&quot; æ–‡æœ¬2: &quot;æ²‰é»˜èžºæ—‹æ¨¡å¼ä¸­å‘ˆçŽ°å‡ºæ°‘æ„åŠ¨åŠ›çš„æ¥æºåœ¨äºŽäººç±»æœ‰å®³æ€•å­¤ç«‹çš„å¼±ç‚¹ï¼Œä½†å…‰å®³æ€•å­¤ç«‹ä¸è‡³äºŽå½±å“æ°‘æ„çš„å½¢æˆï¼Œ&quot; + &quot;ä»Žå¿ƒç†å­¦çš„èŒƒç•´æ¥çœ‹ï¼Œç¤¾ä¼šä¸­çš„å¼ºåŠ¿æ„è§è¶Šæ¥è¶Šå¼ºï¼Œç”šè‡³æ¯”å®žé™…æƒ…å½¢è¿˜å¼ºï¼Œå¼±åŠ¿æ„è§è¶Šæ¥è¶Šå¼±ï¼Œç”šè‡³æ¯”å®žé™…æƒ…å½¢è¿˜å¼±ï¼Œ è¿™ç§åŠ¨åŠ›è¿ä½œçš„è¿‡ç¨‹æˆâ€“èžºæ—‹çŠ¶&quot; + &quot;ä¸»è¦æ˜¯å½“ä¸ªäººè§‰å¯Ÿåˆ°è‡ªå·±å¯¹æŸè®ºé¢˜çš„æ„è§ä¸ŽçŽ¯å¢ƒä¸­çš„å¼ºåŠ¿æ„è§ä¸€è‡´ï¼ˆæˆ–ä¸ä¸€è‡´æ—¶ï¼‰ï¼Œå®³æ€•å­¤ç«‹è¿™ä¸ªå˜é¡¹æ‰ä¼šäº§ç”Ÿä½œç”¨ã€‚&quot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; è¿è¡Œç»“æžœå¦‚ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°ç”Ÿæˆçš„128ä½çš„hash codeæ˜¯å®Œå…¨ç›¸åŒçš„ï¼Œä¸Šè¿°çš„æ–‡æœ¬è°ƒæ¢äº†è¯­åºç”Ÿæˆçš„ä¸¤æ®µæ–‡æœ¬ï¼Œç›¸ä¼¼åº¦ä¸º1ï¼Œæ‰€ä»¥è¿™ä¸¤æ®µæ–‡æœ¬ä¼šè¢«ç›´æŽ¥è¿‡æ»¤æŽ‰å…¶ä¸­ä¸€æ®µæ–‡æœ¬ã€‚ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; åœ¨å®žé™…å¯¹åŽå°æ•°æ®åº“å½“ä¸­çš„æ•°æ®è¿è¡Œè¯¥åŽå¤„ç†æ¨¡å—æ—¶å€™ï¼Œå¯ä»¥å¾ˆæ˜Žæ˜¾çš„çœ‹åˆ°CSDNå½“ä¸­çˆ¬å–åˆ°çš„åšå®¢æ–‡ç« è¢«åˆ æŽ‰äº†ä¸€åŠå·¦å³ï¼Œå› ä¸ºçœŸçš„å¾ˆå¤šè½¬è½½çš„å’ŒæŠ„è¢­çš„åšå®¢æ–‡ç« åœ¨å…¶ä¸­ï¼Œè€Œå¯¹äºŽstackoverflowè¿™ç§å¤§åž‹çš„æ­£è§„çš„QAç½‘ç«™ï¼ŒåŸºæœ¬æ²¡æœ‰è¿‡æ»¤æŽ‰å¾ˆå¤šæ˜¯å› ä¸ºç›¸ä¼¼åº¦è¶…è¿‡é˜ˆå€¼çš„è¿™ç§æ–‡ç« ï¼ŒæŠ€æœ¯æ°´å¹³è¿˜æ˜¯å¯ä»¥çš„ï¼Œè‡³å°‘å¹³æ—¶åœ¨çœ‹CSDNé‡Œçš„æŠ€æœ¯åšå®¢éƒ½ä¼šæœ‰è¿™ç§æ„Ÿå—ï¼ŒçœŸçš„ç›¸ä¼¼æˆ–è€…å®Œå…¨ç›¸åŒçš„æ–‡ç« å¤ªå¤šäº†ï¼ï¼ï¼&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; å¦å¤–éœ€è¦æä¸€ç‚¹çš„å°±æ˜¯simhashç®—æ³•å¯¹äºŽçŸ­æ–‡æœ¬çš„è¡¨çŽ°å¹¶ä¸æ˜¯å¾ˆå¥½ï¼Œå› ä¸ºçŸ­æ–‡æœ¬è¿›è¡Œåˆ†è¯ä¹‹åŽï¼Œè¯è¯­æœ¬èº«å°±å¾ˆå°‘ï¼Œæ‰€ä»¥å¾ˆå¤§ç¨‹åº¦çš„å½±å“äº†åŽé¢çš„hashingè¿‡ç¨‹ã€‚ä¸è¿‡åœ¨æˆ‘ä»¬è¿™æ¬¡çš„é¡¹ç›®å½“ä¸­éƒ½æ˜¯å†…å®¹æ¯”è¾ƒå¤šçš„æ–‡æœ¬ï¼Œæ‰€ä»¥simhashç®—æ³•çš„æ•ˆæžœè¿˜æ˜¯æŒºä¸é”™çš„ :ï¼‰ æ‘˜è¦ç”Ÿæˆç®—æ³•TextRank&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TextRankæ˜¯ä¸€ç§åŸºäºŽæ— å‘å›¾çš„æ— ç›‘ç£ç®—æ³•ï¼Œå¯ä»¥ç”¨æ¥è¿›è¡Œå…³é”®å­—æå–ä¸Žæ–‡ç« æ‘˜è¦ç”Ÿæˆç­‰å·¥ä½œã€‚TextRankç®—æ³•çš„å‰èº«æ˜¯Googleä¸ºç½‘é¡µæŽ’åºè€Œæå‡ºçš„PageRankçš„ç®—æ³•ã€‚PageRankçš„ä¸»è¦æ€æƒ³ä¹Ÿæ˜¯åŸºäºŽå›¾è®ºçš„æ–¹æ³•ï¼Œç”¨ç½‘é¡µä¹‹é—´çš„é“¾æŽ¥æ¥å½¢æˆåºžå¤§çš„æœ‰å‘å›¾ï¼Œå›¾ä¸­çš„è¾¹æƒé‡ä»£è¡¨çš„æ˜¯ä»Žç”¨æˆ·ä»ŽæŸä¸ªç½‘é¡µè¿›å…¥åˆ°å¦ä¸€ä¸ªç½‘é¡µçš„æ¦‚çŽ‡ï¼Œç„¶åŽè¿›è¡Œè¿­ä»£æ›´æ–°ï¼Œå¾—åˆ°rankæœ€å¤§çš„é‚£äº›ç½‘ç«™æ˜¾ç¤ºã€‚ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TextRankçš„æ€æƒ³å’ŒPageRankå¾ˆåƒï¼Œç®—æ³•çš„ä¸»è¦æµç¨‹ç”±å¦‚ä¸‹è¿™å‡ ç‚¹ç»„æˆï¼š æ–‡æœ¬åˆ†å‰²ä¸ºå¥å­ å¯¹åˆ†å‰²å‡ºæ¥çš„å¥å­è¿›è¡Œå‘é‡åŒ–,å…¶ä¸­ä¹ŸåŒ…æ‹¬äº†stopwordsã€è¯æ€§çš„è¿‡æ»¤æ­¥éª¤ ç¡®å®šä¸åŒå¥å­ä¹‹é—´æ˜¯å¦å­˜åœ¨è¾¹ï¼Œè¿™ä¸ªåˆ©ç”¨çš„æ˜¯ç±»ä¼¼æ»‘åŠ¨çª—å£çš„æ–¹æ³•ï¼Œåœ¨å›ºå®šé•¿åº¦Kçš„çª—å£å½“ä¸­ï¼Œå¦‚æžœå…±åŒå‡ºçŽ°nä¸ªå•è¯ï¼Œæˆ‘ä»¬å°±è®¤ä¸ºè¿™ä¸¤ä¸ªå¥å­ä¹‹é—´å­˜åœ¨è¾¹ã€‚ä¸€èˆ¬æƒ…å†µä¸‹nå–2. è®¡ç®—ä¸åŒå¥å­ä¹‹é—´çš„ç›¸ä¼¼åº¦ï¼Œç”¨å¥å­ä¹‹é—´çš„ç›¸ä¼¼åº¦å……å½“æ— å‘å›¾å½“ä¸­è¾¹çš„æƒé‡ æž„é€ ç›¸ä¼¼åº¦çŸ©é˜µ æž„é€ æ— å‘å›¾ï¼Œå…¶ä¸­èŠ‚ç‚¹æ˜¯æ¯ä¸€ä¸ªåˆ†å‰²å‡ºæ¥çš„å¥å­ï¼Œæ¯æ¡è¾¹çš„æƒé‡æ˜¯ä¸åŒå¥å­ä¹‹é—´çš„ç›¸ä¼¼åº¦ è¿­ä»£æ›´æ–°TextRankçš„å€¼ï¼Œç›´åˆ°æœ€åŽæ— å‘å›¾ä¸­èŠ‚ç‚¹çš„TextRankå€¼æ”¶æ•› &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; å¯¹äºŽæ¯ä¸ªå¥å­èŠ‚ç‚¹çš„TextRankå€¼çš„è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š $$TR(V_i)=(1-d)+d*\sum_{V_j\in In(V_i)} \frac{\omega_{ji}}{\sum_{V_k \in Out(V_j)} \omega_{jk}} * TR(V_j)$$ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; å…¶ä¸­å˜é‡$d$è¡¨ç¤ºçš„æ˜¯é˜»å°¼ç³»æ•°ï¼Œä¸»è¦æ˜¯ä¸ºäº†é¿å…æœ‰çš„èŠ‚ç‚¹å’Œåˆ«çš„èŠ‚ç‚¹ä¹‹é—´æ²¡æœ‰è¾¹è€Œå‡ºçŽ°çš„TextRankå€¼ä¸º0çš„æƒ…å†µã€‚$\omega_{ik}$ä»£è¡¨çš„å°±æ˜¯$i, k$ä¸¤ä¸ªå¥å­èŠ‚ç‚¹ä¹‹é—´çš„æƒé‡å€¼ã€‚ä¹‹åŽåªè¦æ ¹æ®æ›´æ–°å…¬å¼è¿›è¡Œè¿­ä»£è®¡ç®—ç›´è‡³æ”¶æ•›å³å¯ï¼Œç„¶åŽé€‰å–TextRankå€¼æœ€é«˜çš„å‡ ä¸ªèŠ‚ç‚¹å¯¹åº”çš„å¥å­ï¼Œå°±èƒ½å½¢æˆæ•´ç¯‡æ–‡æ¡£çš„æ‘˜è¦ï¼Œå®žçŽ°äº†è‡ªåŠ¨æ‘˜è¦ç”Ÿæˆçš„åŠŸèƒ½ã€‚å…·ä½“çš„æµç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼š &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ä¸è¿‡ç¨å¾®æœ‰äº›é—æ†¾çš„æ˜¯ï¼Œæˆ‘å¹¶æ²¡æœ‰åœ¨æˆ‘ä»¬çš„é¡¹ç›®å½“ä¸­å†é€ è½®å­å®žçŽ°TextRankç®—æ³•ï¼Œè¦æ˜¯æ—¶é—´èƒ½å†é•¿ä¸€ç‚¹å¯ä»¥å°è¯•ç€å®žçŽ°ä¸€æ³¢TextRankç®—æ³•ã€‚åœ¨æˆ‘ä»¬é¡¹ç›®å½“ä¸­ä½¿ç”¨çš„æ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®textrank4zh, è¿™ä¸ªé¡¹ç›®ä½¿ç”¨çš„è‡ªåŠ¨æ‘˜è¦ç®—æ³•å°±æ˜¯ä½¿ç”¨çš„TextRankçš„ç®—æ³•å®žçŽ°ã€‚ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; å½“ç„¶è¿™ç§æ–¹æ³•çš„é€Ÿåº¦æ¯”è¾ƒæ…¢ï¼Œæ¯•ç«Ÿéœ€è¦é’ˆå¯¹å…¨æ–‡æž„å»ºä¸€å¼ æ— å‘å›¾ï¼Œç„¶åŽåœ¨æ— å‘å›¾ä¸Šè¿›è¡Œè¿­ä»£æ›´æ–°ï¼Œæ‰€ä»¥å®žé™…è¿è¡Œçš„æ—¶å€™ï¼Œå¾ˆå¤§ä¸€éƒ¨åˆ†æ—¶é—´æ˜¯èŠ±è´¹åœ¨è‡ªåŠ¨æ‘˜è¦ç”Ÿæˆä¸Šé¢ï¼Œå¤§æ¦‚ä¸€ç¯‡æ–‡ç« 2ç§’å·¦å³çš„ç”Ÿæˆæ—¶é—´ï¼Œæ‰€ä»¥æˆ‘ä»¬èŠ±äº†ä¸€æ™šä¸Šçš„æ—¶é—´å¯¹æ‰€æœ‰æ”¶é›†åˆ°çš„æ–‡ç« è¿›è¡Œè‡ªåŠ¨æ‘˜è¦ã€‚å½“ç„¶æˆ‘ä»¬ä¹Ÿä¸èƒ½ä¿è¯TextRankå°±èƒ½ç”Ÿæˆæœ€å‡†ç¡®çš„æ‘˜è¦ä¿¡æ¯ï¼Œæ‰€ä»¥ä»¥åŽæœ‰æœºä¼šåŽ»è°ƒç ”å…¶ä»–çš„æ‘˜è¦ç”Ÿæˆã€å…³é”®è¯ç”Ÿæˆçš„ç®—æ³•å’Œç ”ç©¶ã€‚ å°ç»“&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; åœ¨è¿™ç¯‡å°è®ºæ–‡å½“ä¸­ï¼Œæˆ‘ä¸»è¦æ˜¯é˜è¿°äº†æœ¬æ¬¡é¡¹ç›®å½“ä¸­å®žé™…è¿ç”¨åˆ°çš„simhashå’Œtextrankä¸¤ä¸ªç®—æ³•ã€‚å½“ç„¶å…¶å®žè¿™ä¸¤ä¸ªç®—æ³•éƒ½æœ‰ä¸€å®šçš„å¹´å¤´äº†ï¼Œåœ¨å®žé™…çš„æ•ˆæžœä¸Šæ¯”ä¸ä¸ŠçŽ°åœ¨å¤§çƒ­çš„NLPæŠ€æœ¯ã€‚ä¸è¿‡è¿™æ¬¡é¡¹ç›®èƒ½å¤Ÿè®©æˆ‘åœ¨çŸ­æ—¶é—´å†…å®Œæˆæ•´ä¸ªæ•°æ®èŽ·å–å’Œæ•°æ®æ¸…æ´—åŠ å·¥çš„è¿‡ç¨‹ï¼Œå¹¶ä¸”åŽ»äº†è§£ç›¸å…³çš„ç®—æ³•ç ”ç©¶ï¼Œæˆ‘è§‰å¾—è¿˜æ˜¯æœ‰ä¸€å®šçš„ä»·å€¼å’Œæ„ä¹‰çš„ã€‚ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ä¹‹åŽå¦‚æžœæœ‰æ—¶é—´çš„è¯ï¼Œå¯ä»¥å¯¹å…¶ä»–çš„ç›¸ä¼¼åº¦è®¡ç®—å’Œæ‘˜è¦ç”Ÿæˆã€å…³é”®å­—ç”Ÿæˆçš„ç®—æ³•è¿›è¡Œè°ƒç ”ã€ç ”ç©¶ï¼Œç›¸ä¿¡å¯¹ä¹‹åŽçš„ç§‘ç ”ç”Ÿæ´»æœ‰ä¸€å®šå¸®åŠ©çš„ã€‚ å‚è€ƒæ–‡çŒ® TextRankç®—æ³•çš„åŸºæœ¬åŽŸç†åŠtextrank4zhä½¿ç”¨å®žä¾‹ ä½¿ç”¨TextRankç®—æ³•ä¸ºæ–‡æœ¬ç”Ÿæˆå…³é”®å­—å’Œæ‘˜è¦ Detecting Near-Duplicates for Web Crawling Similarity estimation techniques from rounding algorithms simhashç®—æ³•]]></content>
      <categories>
        <category>data-processing</category>
      </categories>
      <tags>
        <tag>data-processing</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[machine-learning-4-Kernel-Function]]></title>
    <url>%2F2019%2F07%2F06%2Fmachine-learning-4-Kernel-Function%2F</url>
    <content type="text"><![CDATA[&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; åœ¨å‰é¢å‡ ç¯‡æ–‡ç« å½“ä¸­ä»‹ç»çš„Linear model, logistic regression, SVMè¿™å‡ ç§supervised learningçš„åˆ†ç±»å™¨ï¼Œä½†æ˜¯ä»–ä»¬åªèƒ½handle linearçš„æƒ…å†µï¼Œå¯¹äºŽéžçº¿æ€§å¯åˆ†çš„æƒ…å†µå°±çˆ±èŽ«èƒ½åŠ©äº†ï¼Œæ‰€ä»¥è¿™é‡Œä¸»è¦ä»‹ç»kernelæ ¸æ–¹æ³•æ¥è®¨è®ºnon-linearçš„æƒ…å†µã€‚ Generalized Linear Function&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; å½“ä¸€ç»„æ•°æ®åœ¨å½“å‰ç»´åº¦ä¸‹çº¿æ€§ä¸å¯åˆ†ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹è¿™ä¸ªç»´åº¦çš„æ•°æ®è¿›è¡Œmappingï¼Œä¹Ÿå³æ˜ å°„åˆ°æ›´é«˜ç»´çš„æ•°æ®ï¼Œåœ¨é«˜ç»´çš„ç©ºé—´å½“ä¸­å°±å¯èƒ½æ˜¯çº¿æ€§å¯åˆ†çš„ï¼Œä¹Ÿå°±å¯ä»¥åˆ©ç”¨æˆ‘ä»¬ä¹‹é—´ä»‹ç»çš„ä¸€ç³»åˆ—çš„æ–¹æ³•ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªmappingçš„ä¾‹å­ðŸŒ°ï¼š &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ä¸‹é¢æˆ‘ä»¬ä»‹ç»ä¸€ä¸‹ä»€ä¹ˆå«åšGeneralized Linear Function, ç®€å•æ¥è¯´å°±æ˜¯åœ¨linear modelçš„åŸºç¡€ä¹‹ä¸Šï¼Œå¢žåŠ ç›¸å…³å˜é‡ã€‚ä¹Ÿå³åœ¨linear modelå½“ä¸­æˆ‘ä»¬æœ‰$[x_1, x_2, x_3]$è¿™ä¸‰ä¸ªfeatrueï¼Œæˆ‘ä»¬å¢žåŠ ä¸Žä¸‰ä¸ªfeatureç›¸å…³çš„å˜é‡ï¼Œä¹Ÿå³æ‰©å±•åˆ°$[x_1, x_2, x_3, x_1x_2, x_1x_3, x_2x_3]$.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; æŽ¥ä¸‹æ¥å°±æ˜¯åœ¨è¿™ä¸ªæ–°çš„featrue spaceåŽ»å­¦ä¸€ä¸ªçº¿æ€§çš„åˆ†ç±»å™¨å³å¯ã€‚ Quadratic Discriminant Function$$g(x) = \omega_0 + \sum_{i=1}^d\omega_ix_i + \sum_{i=1}^d \sum_{j=1}^d \omega_{ij}x_ix_j$$ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $g(x) = 0$ ä»£è¡¨çš„å°±æ˜¯ä¸€ä¸ªè¶…å¹³é¢ï¼Œåœ¨æ–°çš„æ˜ å°„çš„featrue spaceé‡Œé¢çš„è¶…å¹³é¢ï¼Œå°†æ•°æ®åˆ†å‰²æˆä¸¤ç±»ã€‚ Generalized Discriminant Function$$g(x) = \sum_{i=1}^{\hat{d}}a_iy_i(x) = a^Ty$$ $$\begin{aligned}a = [a_1, a_2, â€¦, a_d]^T &amp;&amp; y = [y_1(x), y_2(x), â€¦, y_d(x)]^T\end{aligned}$$ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; å…¶ä¸­çš„mapping yå«åšaugmented featrue vector, æˆ–è€…å«åšphi function. Representer Theorm&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; æˆ‘ä»¬åŽé¢ä¹Ÿä»‹ç»çš„kernel functionéƒ½æ˜¯å»ºç«‹åœ¨Representer Theormçš„åŸºç¡€ä¹‹ä¸Šã€‚è¿™é‡Œæˆ‘åªç®€å•çš„ä»‹ç»ä¸€ä¸‹å½¢å¼ï¼Œå…·ä½“å½¢å¼å¯ä»¥æŸ¥çœ‹é“¾æŽ¥å½“ä¸­PDFçš„è¯¦ç»†ä»‹ç»ã€‚&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ç®€è€Œè¨€ä¹‹ï¼Œè¿™ä¸ªå®šç†æè¿°çš„å°±æ˜¯ï¼Œä»»ä½•å½¢å¦‚ loss function + Reguralizerçš„å‡½æ•°éƒ½èƒ½è¿™æ ·è¢«è¡¨ç¤ºï¼š $$f(x) = \sum_{i=1}^n\alpha_ik(x_i, x)$$ Kernelized Ridge Regression$$\begin{aligned}\omega^* &amp;= argmin\sum_{i=1}^n(y_i-x_i^T\omega)^2 + \lambda\sum_{j=1}^p \omega_j^2 \\&amp;= (XX^T + \lambda I)^{-1}Xy \\&amp;= X(X^TX+\lambda I)^{-1}y \\\alpha &amp;= (X^TX+\lambda I)^{-1}y \\\omega^* &amp;= X\alpha = \sum_{i=1}^n \alpha_ix_i\end{aligned}$$ $$f(x) = \omega^Tx = \sum_{i=1}^n\alpha_ix_i^Tx = \sum_{i=1}^n \kappa(x_i, x)$$ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; å…¶ä¸­çš„$\kappa(x_i, x)$å°±æ˜¯ridge regressionçš„kernel functionï¼Œåªè¦æ¥ä¸€ä¸ªxï¼Œåªéœ€è¦æ”¾åˆ°è¿™ä¸ªkernel functionå½“ä¸­è®¡ç®—ä¸€ä¸‹å°±fineäº†ã€‚ Kernels&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Let $\kappa(x_i, x) \ge 0$ be some measure of similarity of $(x_i, x)$, we will call $\kappa$ a kernel function. ä¸€èˆ¬æ¥è¯´$\kappa$éƒ½æ˜¯å¯¹ç§°çš„ï¼Œå¹¶ä¸”æ˜¯positiveçš„ï¼Œä¸‹é¢æ˜¯ä¸€äº›å¸¸ç”¨çš„kernel functionï¼š linear kernel: $\kappa(x, xâ€™) = x^Tx_i$ Polinominal kernel: $\kappa(x, xâ€™) = (x^Txâ€™ + 1)^d$ RBF kernel: $\kappa(x, xâ€™) = exp(-\frac{||x-xâ€™||^2}{2\sigma^2})$ Advantages Non-linear function Works when the samples canâ€™t represent as featrue vectors String kernels, graph kernels, etc.]]></content>
      <categories>
        <category>machine-learning</category>
      </categories>
      <tags>
        <tag>machine-learning</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[machine-learning-3-Linear-Classifier]]></title>
    <url>%2F2019%2F07%2F05%2Fmachine-learning-3-Linear-Classifier%2F</url>
    <content type="text"><![CDATA[&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; åœ¨å‰ä¸€ç¯‡æ–‡ç« å½“ä¸­ï¼Œæˆ‘ä»¬è¯¦ç»†çš„é˜è¿°äº†Linear modelçš„è¡¨çŽ°ï¼Œä¸è¿‡å®ƒä¸»è¦åšçš„æ˜¯supervised learningå½“ä¸­çš„ä¸€ä¸ªregressioné—®é¢˜ï¼Œé‚£è¿˜å‰©ä¸‹å¦å¤–ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„é—®é¢˜ï¼šclassification.æ‰€ä»¥åœ¨è¿™ä¸€ç¯‡æ–‡ç« å½“ä¸­ï¼Œä¼šä¸»è¦ä»‹ç»logistic modelå’ŒSVMä¸¤ç§linear classifier. Sigmoid function (logistic function)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Sigmoid function æ˜¯ logistic regressionå½“ä¸­æœ€é‡è¦çš„ä¸€ä¸ªå…ƒå‡½æ•°ã€‚æˆ‘ä»¬ä¹Ÿå«å®ƒSåž‹å‡½æ•°ï¼š $$\sigma(t) = \frac{e^t}{1+e^t} = \frac{1}{1+e^{-t}}$$ Logistic Regression&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; é€»è¾‘æ–¯è’‚å›žå½’æ˜¯ä¸€ç§classificationçš„æ–¹æ³•ï¼Œåˆ©ç”¨çš„å°±æ˜¯sigmoid functionæ¥è¿›è¡Œclassify. Logistic Regressionçš„ä¸»è¦å½¢å¼å¦‚ä¸‹ï¼š $$p(y_i=\pm1|x_i, a) = \sigma(y_ia^Tx_i) = \frac{1}{1+e^{-y_ia^Tx_i}}$$ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ç„¶åŽå¯¹äºŽæ•°æ®æˆ‘ä»¬åŒæ ·ä½¿ç”¨çš„MLEçš„æ–¹æ³•æ¥ä¼°è®¡å‚æ•°$a$. $$l(p(D)) = -\sum_{i \in I}\log(1+e^{-y_ia^Tx_i})$$ $$E(a) = \sum_{i \in I}\log(1+e^{-y_ia^Tx_i})$$ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ä½†æ˜¯æ³¨æ„çš„æ˜¯$E(a)$æ˜¯ä¸€ä¸ªnon-convex functionå¯¹äºŽå‚æ•°$a$è€Œè¨€ã€‚æ¢è¨€ä¹‹è¿™é‡Œç›´æŽ¥æ±‚å¯¼æ˜¯æ²¡ç”¨çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¼•å…¥ä¸€ä¸ªæ–°çš„æ±‚å‚æ•°æœ€å€¼çš„æ–¹æ³•ï¼šGradient descent Gradient descent first order optimization problem (é€šè¿‡æ±‚è§£ä¸€é˜¶å¯¼å¯ä»¥æ±‚è§£) Can find a local optimum æ¢¯åº¦ç›¸åæ–¹å‘ï¼šlocal minimum, æ¢¯åº¦æ–¹å‘ï¼šlocal maximum $$\begin{aligned}\omega_{n+1} = \omega_n - \gamma \nabla J(\omega_n) &amp;&amp; n \ge 0\end{aligned}$$ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; å…¶å®žè¿™åªæ˜¯ä¸€é˜¶å¯¼ä¸‹é¢çš„æ¢¯åº¦ä¸‹é™çš„æ–¹æ³•ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€çœ‹ä¸ºä»€ä¹ˆå¯ä»¥è¿›è¡Œæ¢¯åº¦ä¸‹é™ï¼Œæˆ–è€…è¯´æ¢¯åº¦ä¸‹é™ä¸ºä»€ä¹ˆä¼šworkå‘¢ï¼Ÿ $$E(a+\triangle a) = E(a) + Eâ€™ (a)\triangle a + Eâ€™â€™ (a)\frac{(\triangle a)^2}{2!} + â€¦$$ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; è¿™æ˜¯å¤§å®¶å¾ˆç†Ÿæ‚‰çš„æ‹‰æ ¼æœ—æ—¥å±•å¼€ï¼Œå¦‚æžœæˆ‘ä»¬åªå–å‰ä¸¤é¡¹è¿›è¡Œä¼°è®¡ï¼Œåˆ™æœ‰$E(a)+Eâ€™ (a)\triangle a \implies \triangle a = -\eta Eâ€™ (a)$. &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; å¦‚æžœæ˜¯é‡‡ç”¨å‰ä¸‰é¡¹è¿›è¡Œä¼°è®¡ï¼Œé‚£ä¹ˆè¿™ä¸ªå«åšç‰›é¡¿æ³•ä¼°è®¡ï¼Œé‚£ä¹ˆåœ¨è¿™ç§ä¼°è®¡ä¹‹ä¸‹æˆ‘ä»¬ä¼šæœ‰ï¼š $$Eâ€™ (a)\triangle a + Eâ€™â€™ (a)\frac{(\triangle a)^2}{2!} \implies Eâ€™ (a)+Eâ€™â€™ (a)\triangle a = 0 \implies \triangle a = -\frac{Eâ€™ (a)}{Eâ€™â€™ (a)}$$ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; å¯¹äºŽç‰›é¡¿æ³•æ±‚æ¢¯åº¦ä¸‹é™æ›´é€šç”¨çš„å†™æ³•å¦‚ä¸‹æ‰€ç¤ºï¼Œæœ¬è´¨ä¹Ÿå°±æ˜¯ä¸Šé¢å¼å­æŽ¨å¯¼è€Œæ¥ï¼š $$\triangle a = -\eta [HE(a)]^{-1} Eâ€™ (a)$$ Regularized Logistic Regression L2-Regularizer L1-Regularizer (Sparse Logistic Regression) $$E(a) = \sum_{i \in I}\log(1+e^{-y_ia^Tx_i}) + \lambda\sum_{j=1}^p(a_j^2)$$ SVM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; æˆ‘ä»¬çŸ¥é“ï¼Œå¯¹äºŽä¸€ä¸ªçº¿æ€§å¯åˆ†çš„æ•°æ®é›†ï¼Œä»–çš„solution vector $a$ å¯ä»¥æœ‰æ— æ•°æ¡ï¼Œåªè¦èƒ½å¤Ÿå°†ä¸¤ç§æ•°æ®ç»™åˆ†å¼€å°±è¡Œã€‚é‚£ä¹ˆæˆ‘ä»¬å°±æƒ³ï¼Œè¿™ä¹ˆå¤šä¸ªsolution vectorå½“ä¸­ï¼Œå“ªæ¡æ˜¯æœ€ä¼˜çš„å‘¢ï¼Ÿè¿™å°±å¼•å‡ºä»Šå¤©çš„å¦ä¸€ä½ä¸»è§’ï¼Œå°±æ˜¯SVM-solution vector machine, ä¹Ÿç§°ä¸ºlarge margin classifier. Geometrical Margin &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; å·²çŸ¥solution vector $\omega$, å¦‚ä½•è®¡ç®—ä»»æ„ä¸€ä¸ªç‚¹xåˆ°åˆ†å‰²é¢çš„è·ç¦»å‘¢ï¼š $$x = x_0+\frac{y\gamma\omega}{||\omega||}$$ $$\omega^Tx = \omega^T(x_0+\frac{y\gamma\omega}{||\omega||}) + b = 0$$ $$\implies \gamma = y\frac{\omega^Tx+b}{||\omega||}$$ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; å…¶ä¸­çš„$\gamma$å°±è¢«ç§°ä¸ºGeometrical Margin, ä»Žä¸Šé¢çš„å¼å­å½“ä¸­æˆ‘ä»¬å¾ˆå®¹æ˜“çœ‹å‡ºæ¥å…¶å®ž$|f(x)|$å°±å¯ä»¥è¡¡é‡ä¸åŒç‚¹åˆ°åˆ†å‰²é¢ä¹‹é—´çš„è·ç¦»ã€‚ Margin of dataset &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; æˆ‘ä»¬æŠŠä¸€ä¸ªæ•°æ®é›†çš„Marginè§„å®šä¸ºæ•°æ®é›†å½“ä¸­åˆ°åˆ†å‰²é¢æœ€å°çš„$\gamma$ç§°ä¸ºæ•°æ®é›†çš„Margin. ç„¶åŽæˆ‘ä»¬çš„targetåŒç†ä¹Ÿå¯ä»¥å˜ä¸ºï¼šFind the hyperplane with the largest margin. åŒæ—¶æˆ‘ä»¬æŠŠé‚£äº›å†³å®šhyperplaneçš„ç‚¹ç§°ä¸ºsupport vectors, å› ä¸ºè¿œçš„ç‚¹å¯¹dataset marginæ²¡æœ‰ä»»ä½•å½±å“ï¼Œè€Œåªæœ‰é‚£äº›ç»„æˆdataset marginçš„ç‚¹æ‰æ˜¯æˆ‘ä»¬éœ€è¦å…³æ³¨çš„ç‚¹ã€‚ $$max_{\omega, b}\gamma = max_{\omega, b}\frac{y(\omega^Tx+b)}{||\omega||}(\gamma_i \ge \gamma)$$ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; å› ä¸ºåœ¨è¿™é‡Œ$\omega$æ˜¯å¯ä»¥è¿›è¡Œä»»æ„ç¼©æ”¾çš„ï¼Œå¹¶ä¸ä¼šå¯¹hyperlaneé€ æˆä»»ä½•çš„å½±å“ï¼Œæ‰€ä»¥åšä¸€ä¸ªå¤„ç†ï¼ŒFix $y(\omega^Tx+b) = 1 \implies \gamma ||\omega|| = 1$ $$max_{\omega, b}\frac{y(\omega^Tx+b)}{||\omega||} = max\frac{1}{||\omega||}$$ $$\gamma_i = \frac{y_i(\omega^Tx_i+b)}{||\omega||} \ge \gamma \implies y_i(\omega^Tx_i+b) \ge 1$$ $$max\frac{1}{||\omega||} \implies min\frac{1}{2}||\omega^2||$$ $$\begin{aligned}min\frac{1}{2}||\omega^2|| &amp;&amp; s.t. &amp;&amp; y_i(\omega^Tx_i+b) \ge 1\end{aligned}$$ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; æ‰€ä»¥æˆ‘ä»¬æœ€åŽçš„ä¼˜åŒ–ç›®æ ‡å°±å˜æˆäº†ä¸Šé¢è¿™ä¸ªå¼å­äº†ï¼ä½†æ˜¯è¿™ä¸ªå¼å­æœ‰ä¸€ä¸ªå¾ˆæ˜Žæ˜¾çš„weaknessï¼šå®¹æ˜“å—åˆ°å™ªå£°noiseçš„å½±å“ï¼Œå› ä¸ºæ˜¯ä¸å…è®¸ä»»ä½•å‡ºé”™çš„æƒ…å†µçš„ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹ä¸€ä¸‹å¦‚æžœæœ‰ä¸€ä¸ªåˆ†ç±»é”™è¯¯çš„ï¼Œä¼šå½±å“æ•´ä¸ªhyperlaneçš„é€‰å–ï¼š Slack variables &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ä¸ºäº†è§£å†³ä¸Šé¢çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¼•å…¥ä¸€ä¸ªslack variable, å³è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å…è®¸ä¸€äº›çŠ¯é”™ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„æ–°çš„objective functionä¸ºï¼š $$min_{\omega, b}\frac{1}{2}||\omega^2||+c\sum_{i=1}^n\xi_i$$ $$\begin{aligned}y_i(\omega^Tx_i+b) \ge 1-\xi_i &amp;&amp; \xi_i \ge 0 \implies \xi_i = max[0, 1-y_i(\omega^Tx_i+b)]\end{aligned}$$ $$E(\omega) = \sum_{i=1}^nmax[0, y_i(\omega^Tx_i+b)] + \frac{1}{2c}||\omega^2||$$ General formulation of classifiers &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ä¸çŸ¥é“æœ‰æ²¡æœ‰å‘çŽ°ï¼Œæˆ‘ä»¬ä¹‹å‰é˜è¿°çš„objective functionéƒ½æœ‰ä¸€ä¸ªå…±æ€§ï¼Œä¹Ÿå³Loss function + Regularizer, å³$min\sum_{i=1}^nl(f) + \lambda R(f)$. æ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ€»ç»“å‡ºè¿™å‡ ç§lossï¼š &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; square loss: $l = (1-yf)^2$&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; logistic loss: $l = log(1+e^{-yf})^2$&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Hinge loss: $l = max[0, 1-yf]$]]></content>
      <categories>
        <category>machine-learning</category>
      </categories>
      <tags>
        <tag>machine-learning</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[machine-learning-2-Linear-Regression]]></title>
    <url>%2F2019%2F07%2F05%2Fmachine-learning-2-Linear-Regression%2F</url>
    <content type="text"><![CDATA[&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; åœ¨å‰ä¸€ç¯‡æ–‡ç« å½“ä¸­ï¼Œæˆ‘ä»¬è¯¦ç»†çš„è®¨è®ºäº†Bayesåˆ†ç±»å™¨ï¼Œä½¿ç”¨çš„æ˜¯åŽéªŒæ¦‚çŽ‡$p(\omega_i|x)$ä½œä¸ºå®ƒçš„discriminant function. é‚£æ—¢ç„¶ç›‘ç£å­¦ä¹ çš„ç›®æ ‡å°±æ˜¯å­¦ä¸€ä¸ªmappingï¼ŒBayesçš„æ–¹æ³•è™½ç„¶æœ€ä¼˜ï¼Œä½†å¹¶ä¸æ˜¯ç›´æŽ¥ä»Ždataå½“ä¸­å¾—åˆ°ï¼Œæ‰€ä»¥ä»Šå¤©æˆ‘ä»¬å°†ä¸»è¦ä»‹ç»Linear model. Linear methods for Regression Linear model &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Linear model çš„è¡¨è¾¾å½¢å¼å¾ˆç®€å•ï¼Œå°±æ˜¯ç±»ä¼¼äºŽå¹³æ—¶æˆ‘ä»¬è§åˆ°çš„ä¸€æ¬¡æ–¹ç¨‹ï¼Œå³ä»Žxåˆ°yçš„mappingå‡½æ•°ä¸ºï¼š $$\begin{aligned}f(x) &amp;= \omega^TX \\\omega \in R^{d+1} &amp;= [\omega_1, \omega_2, â€¦ , \omega_d, b]^T \\X \in R^{d+1} &amp;= [x_1, x_2, â€¦ , x_d, 1]^T\end{aligned}$$ Error function &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; åœ¨linear modelå½“ä¸­ï¼Œæˆ‘ä»¬çš„ç›®æ ‡å˜æˆäº†ä¼˜åŒ–ä¸€ä¸ªobjective functionï¼Œä½¿å¾—è¿™ä¸ªæŸå¤±å‡½æ•°å–åˆ°æœ€å°å€¼ï¼Œåœ¨linear modelå½“ä¸­ï¼Œobjective functionå¸¸è§æœ‰ä¸¤ç§ï¼Œå½“ç„¶ä¹Ÿæ˜¯å¤§åŒå°å¼‚çš„ï¼š &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (1)Mean sum of square error: $$MSE(a) = \frac{1}{n}\sum_{i=1}^n(y_i - f(x_i, a))^2$$ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (2)Redual sum of square error: $$RSS(a) = \sum_{i=1}^n(y_i-f(x_i, a))^2$$ Optimize &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; åœ¨æˆ‘ä»¬å¾—åˆ°äº†linear modelçš„objective functionä¹‹åŽï¼Œæˆ‘ä»¬çš„ç›®æ ‡å°±æ˜¯æ‰¾åˆ°ä¸€ç»„å‚æ•°$a$ï¼Œä½¿å¾—ä¸Šè¿°ä¸¤ä¸ªobjective functionèƒ½å¤Ÿåœ¨training dataä¸Šé¢å–æœ€å°å€¼ï¼Œå½“ç„¶å¯ä»¥çœ‹åˆ°RSSå’ŒMSEå…¶å®žéƒ½æ˜¯ç”¨çš„æœ€å°äºŒä¹˜æ³•çš„æ€æƒ³ï¼Œä¼˜åŒ–ç›®æ ‡éƒ½æ˜¯ä¸€æ ·çš„ã€‚æˆ‘ä»¬å¯¹æ•°æ®è¿›è¡ŒçŸ©é˜µåŒ–çš„è¡¨ç¤ºï¼Œ$X = [x_1, x_2, â€¦ , x_n], y=[y_1, y_2, â€¦ , y_n]^T$. $$\begin{aligned}J_n(a) &amp;= (y-X^Ta)^T(y-X^Ta) \\\nabla_aJ_n(a) &amp;= -2X(y-X^Ta) = 0 \\a &amp;= (XX^T)^{-1}Xy\end{aligned}$$ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; å“¦è±ï¼Œåˆ°è¿™é‡Œå¥½åƒäº‹æƒ…å˜å¾—å¾ˆç®€å•ï¼Œåªéœ€è¦å¯¹RSSæ±‚ä¸ªå¯¼å°±èƒ½å¾—åˆ°æœ€ä¼˜çš„å‚æ•°è§£ã€‚å½“ç„¶ï¼Œäº‹æƒ…æ˜¯æ²¡æœ‰æƒ³è±¡çš„é‚£ä¹ˆç®€å•çš„ï¼Œæˆ‘ä»¬çœ‹$a = (XX^T)^{-1}Xy$, å¦‚æžœ$XX^T$ä¸æ»¡ç§©çš„æƒ…å†µä¸‹ï¼Œè¿™ä¸ªæ–¹ç¨‹è¿˜èƒ½ç”¨å—ï¼Œé‚£å½“ç„¶æ˜¯ä¸èƒ½ç”¨äº†ï¼Œå› ä¸º$XX^T$éƒ½ä¸èƒ½æ±‚é€†äº†ï¼Œæ€Žä¹ˆç”¨ï¼æ‰€ä»¥è¿™ä¸ªæ–¹ç¨‹åœ¨$XX^T$æ»¡ç§©æ—¶æœ‰è§£ï¼Œä¸æ»¡ç§©çš„æ—¶å€™å­˜åœ¨æ— ç©·å¤šè§£ï¼Œä¹Ÿå³overfitting problem. Statistic model of regression &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; åœ¨è¿™ä¸ªpartå°†ä¼šé€šè¿‡ç»Ÿè®¡å›žå½’æ¨¡åž‹æ¥æŽ¨å¯¼linear model çš„ objective function. ä½¿ç”¨ç»Ÿè®¡å›žå½’æ¨¡åž‹çš„æ—¶å€™ï¼Œæˆ‘ä»¬é¦–å…ˆä¼šå‡è®¾å­˜åœ¨ä¸€ä¸ªéšå«å˜é‡$\epsilon$, æ‰€ä»¥æˆ‘ä»¬linear modelçš„è¡¨ç¤ºå½¢å¼å°±å˜æˆäº†ï¼š $$\begin{aligned}y &amp;= f(x, a) + \epsilon &amp;\epsilon \sim N(0, \sigma^2)\end{aligned}$$ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ç„¶åŽæˆ‘ä»¬ä½¿ç”¨MLEçš„æ–¹æ³•æ¥æœ€å¤§åŒ–log-ä¼¼ç„¶å‡½æ•°ï¼Œæ‰€ä»¥æ•´ä¸ªæŽ¨å¯¼è¿‡ç¨‹å¦‚ä¸‹ï¼š $$\begin{aligned}l(D, a, \sigma) &amp;= ln(l(D, a, \sigma)) \\&amp;= \sum_{i=1}^n lnp(y_i|x_i, a, \sigma) \\&amp;= \sum_{i=1}^n ln[\frac{1}{\sigma \sqrt{2\pi}}e^{-\frac{1}{2\sigma^2}(y-f(x, a))^2}] \\&amp;= -\frac{1}{2\sigma^2}\sum_{i=1}^n(y-f(x, a))^2 + c(\sigma)\end{aligned}$$ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OK, Fine.è¿™é‡Œæˆ‘ä»¬çœ‹åˆ°å½“æžå¤§åŒ–ä¼¼ç„¶å‡½æ•°çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¾—åˆ°å’ŒMSEæˆ–è€…æ˜¯RSSçš„ä¼˜åŒ–å‡½æ•°æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥è¿™ä¸¤ç§ä¼˜åŒ–ç›®æ ‡æ˜¯ç›¸åŒçš„ã€‚ Over-fitting &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Overfitting problem æ˜¯æœºå™¨å­¦ä¹ é—®é¢˜å½“ä¸­å¾ˆå¸¸è§çš„é—®é¢˜ï¼Œå½“é€‰å–çš„å‚æ•°è¿‡å¤šï¼Œè€Œæ²¡æœ‰è¶³å¤Ÿå¤šçš„æ ·æœ¬æ¥æ”¯æŒçš„è¯ï¼Œæ‰€ä»¥å°±ä¼šå‡ºçŽ°æ¨¡åž‹è¿‡æ‹Ÿåˆçš„é—®é¢˜ã€‚å…·ä½“å¯ä»¥ç”¨ä»¥ä¸‹è¿™å¼ å›¾å±•ç¤ºï¼š &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; åœ¨ä¹‹å‰çš„$a = (XX^T)^{-1}Xy$ è¡¨è¾¾å¼å½“ä¸­ï¼Œå¦‚æžœ$XX^T$ä¸æ»¡ç§©çš„è¯ï¼Œæœ€åŽç»“æžœå¯¼è‡´å°±æ˜¯overfitting problem. Ridge Regression &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; å‡ºäº†é—®é¢˜é‚£å°±å¾—è§£å†³æ˜¯å§ï¼Œå‡ºçŽ°äº†overfittingé‚£ä¹ˆæˆ‘ä»¬å°±å¾—æƒ³åŠžæ³•è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ä¹Ÿå°±å¼•å‡ºäº†æŽ¥ä¸‹æ¥è¦é˜è¿°çš„æ­£åˆ™åŒ–çš„è§£å†³æ–¹æ³•ã€‚ $$a^* = argmin(\sum_{i=1}^n(y_i-x_i^Ta)^2 + \lambda\sum_{j=1}^pa_j^2)$$ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; åŒæ ·çš„æ·»åŠ æ­£åˆ™é¡¹ï¼ŒåŒæ ·ä¹Ÿç›¸å½“äºŽç»™ä¹‹å‰çš„objective functionåŠ ä¸Šé™åˆ¶ï¼Œä¹Ÿå³ï¼š $$\begin{aligned}a^* = argmin(\sum_{i=1}^n(y_i-x_i^Ta)^2) &amp;&amp; s.t.\lambda\sum_{j=1}^pa_j^2\le t\end{aligned}$$ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; æœ€åŽå¯¹åŠ ä¸Šæ­£åˆ™é¡¹çš„objective functionè¿›è¡Œæ±‚å¯¼ç„¶åŽå°±èƒ½æ±‚å¾—æžå€¼ã€‚å…¶å®žåŠ ä¸Šæ­£åˆ™é¡¹çš„æ„ä¹‰å°±åœ¨äºŽï¼Œå¯¹äºŽå‚æ•°$a$è¿›è¡Œæƒ©ç½šï¼Œå…¶ä¸­çš„å‚æ•°$\lambda$å°±æ˜¯å¯¹è¿™ä¸¤é¡¹è¿›è¡Œç›¸å¯¹åº”çš„è°ƒæ•´ï¼Œæ¥å†³å®šè¿™ä¸¤é¡¹çš„æ¯”é‡ã€‚ $$a^* = (XX^T+\lambda I)^{-1}Xy$$ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; æˆ‘ä»¬å¯ä»¥çœ‹ä¸€ä¸‹å‚æ•°$\lambda$å¯¹æ•´ä¸ªmodelçš„å½±å“ï¼Œå½“$\lambda$å¾ˆå¤§çš„æ—¶å€™ï¼Œç›¸å½“äºŽæ­£åˆ™åŠ çš„å¾ˆå¤§ï¼Œä½¿å¾—å‚æ•°éƒ½å¾ˆå°ï¼Œä¼šä½¿å¾—$bias$å˜å¤§ã€‚å¦‚æžœ$\lambda$å¾ˆå°çš„æ—¶å€™ï¼Œç›¸å½“äºŽæ˜¯$variance$ç›¸å¯¹å¤§ä¸€ç‚¹ã€‚ä½†æ˜¯å› ä¸ºæˆ‘ä»¬åŠ ä¸Šæ­£åˆ™é¡¹ï¼Œæ‰€ä»¥training erroræ˜¯ä¸å¯é¿å…çš„ä¼šå¢žåŠ ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯»æ‰¾çš„å°±æ˜¯training errorå’Œtesting erroréƒ½ç›¸å¯¹åå°çš„é‚£ä¸ªå¹³è¡¡å€¼ï¼š LASSO &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; åœ¨ä¸Šé¢æˆ‘ä»¬æåˆ°æ­£åˆ™é¡¹åŠ çš„æ˜¯$\lambda\sum_{j=1}^pa_j^2$, è¿™æ˜¯å¾ˆå¸¸ç”¨çš„L2 norm, å¦‚æžœæˆ‘ä»¬ç”¨ä¸€é˜¶æ¥åšæ­£åˆ™çš„è¯ï¼Œå°±æœ‰ä¸€ä¸ªæ–°çš„åå­—ï¼Œå«åšLASSO,LASSOæ˜¯ä¸€ä¸ªSparse modelï¼Œä¹Ÿå³è‡ªå¸¦featrue selectçš„åŠŸèƒ½ï¼ŒLASSOçš„è¡¨è¾¾å½¢å¼ä¸ºï¼š $$a^*=argmin(\sum_{i=1}^n(y_i-x_i^Ta)^2+\lambda\sum_{j=1}^p|a_j|)$$ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ä¸ºä»€ä¹ˆè¯´LASSOæ˜¯ä¸€ä¸ªSparse modelå‘¢ï¼Œæˆ‘ä»¬ä»Žobjective functionçš„å›¾å½¢åŒ–è¡¨ç¤ºæ¥çœ‹å°±å¾ˆå®¹æ˜“ç†è§£ï¼Œå› ä¸ºä¸¤æ¡çº¿çš„ç›¸åˆ‡çš„åœ°æ–¹æ€»æ˜¯åœ¨è§’ç‚¹ã€‚æ‰€ä»¥å¾ˆå¤šé¡¹çš„å‚æ•°å°±è‡ªåŠ¨å˜æˆäº†0: Bias and variance decomposition &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; æœ€åŽè¿™é‡Œå¯¹biaså’Œvarianceåšä¸€ä¸ªè®¨è®ºã€‚biasä¸»è¦æŒ‡çš„æ˜¯æœ€åŽå­¦åˆ°çš„modelå’ŒçœŸå®žçš„modelä¹‹é—´çš„åå·®ï¼ŒvarianceæŒ‡çš„æ˜¯æ¯æ¬¡å­¦åˆ°çš„modelä¹‹é—´è¯¯å·®å€¼ï¼Œnoiseæ˜¯ä¸å¯é¿å…çš„è¯¯å·®ï¼Œæ‰€ä»¥ä¸èƒ½åšåˆ°å®Œå…¨optimalçš„model.æˆ‘ä»¬ä½¿ç”¨EPEè¿›ä¸€æ­¥çš„è¡¡é‡model lossï¼š $$\begin{aligned}EPE(f) &amp;= \iint(y-f(x))^2p(x, y)dxdy \implies \\EPE(f) &amp;= (bias)^2+variance+noise \\(bias)^2 &amp;= \int[E_D(f(x;D)-E(y|x))]^2p(x)dx \\variance &amp;= \int E_D[f(x;D)-E_D(f(x;D))]^2p(x)dx \\noise &amp;= \int var(y|x)p(x)dx\end{aligned}$$]]></content>
      <categories>
        <category>machine-learning</category>
      </categories>
      <tags>
        <tag>machine-learning</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Beauty-of-Mathematics]]></title>
    <url>%2F2019%2F07%2F01%2FBeauty-of-Mathematics%2F</url>
    <content type="text"><![CDATA[&nbsp;&nbsp;&nbsp;&nbsp;æœ€è¿‘å¾ˆæœ‰å¹¸èƒ½å¤Ÿæ‹œè¯»å´å†›åšå£«çš„ã€Šæ•°å­¦ä¹‹ç¾Žã€‹è¿™æœ¬ä¹¦ï¼Œåœ¨è¿™é‡Œè®°å½•ä¸€äº›è‡ªå·±åœ¨é˜…è¯»å½“ä¸­çš„æ„Ÿå—å’Œä½“ä¼šï¼Œé¡ºä¾¿ä¹Ÿåšä¸€ç‚¹æ‘˜æŠ„å•¥çš„ï¼Œæ—¥åŽèƒ½å¤Ÿå›žå‘³å½“æ—¶çœ‹è¿™æœ¬ä¹¦çš„æ„Ÿå—å•¦ï¼ 1. æ–‡å­—å’Œè¯­è¨€vsæ•°å­—å’Œä¿¡æ¯ é€šä¿¡æ¨¡å¼ï¼šä¿¡æ¯æº -&gt; (æ€ªå«å£°ï¼Œç¼–ç ) -&gt; ä¿¡æ¯ï¼ˆä¿¡é“ä¼ è¾“ï¼‰-&gt;ï¼ˆå¬åˆ°çš„å£°éŸ³ï¼Œè§£ç ï¼‰-&gt; ä¿¡æ¯(æŽ¥æ”¶è€…)ï¼Œå¤äººé€šè¿‡å£°éŸ³æ¥ç›¸äº’ä¼ é€’ä¿¡æ¯ï¼Œå’ŒçŽ°åœ¨çš„ä¿¡æ¯ä¼ è¾“çš„æ¨¡å¼æ— å·®ã€‚ ç½—å¡žå¡”çŸ³ç¢‘ï¼šç½—å¡žå¡”çŸ³ç¢‘ä¸Šè®°å½•äº†ä»Žå¤åŸƒåŠè‡³ä»Šçš„åŽ†å²ï¼Œç ´è¯‘è¿‡ç¨‹å½’åŠŸäºŽåœ¨çŸ³ç¢‘ä¹‹ä¸Šæœ‰ä¸‰ç§ä¸åŒè¯­è¨€ç‰ˆæœ¬çš„ä¿¡æ¯ã€‚æ‰€ä»¥ä½œè€…é€šè¿‡æ­¤å¾—åˆ°ä¸¤ä¸ªæœ‰ç”¨çš„ç»“è®ºï¼š ä¿¡æ¯å†—ä½™æ˜¯ä¿¡æ¯å®‰å…¨çš„ä¿éšœã€‚åªè¦æœ‰ä¸€ä»½å†…å®¹è¢«å®Œæ•´çš„ä¿ç•™ä¸‹æ¥ï¼Œé‚£ä¹ˆä¿¡æ¯å°±ä¸ä¼šä¸¢å¤±ï¼Œè¿™å¯¹äºŽçŽ°ä»£çš„ä¿¡é“ç¼–ç æœ‰ä¸€å®šçš„æŒ‡å¯¼æ„ä¹‰ã€‚ è¯­è¨€çš„æ•°æ®ï¼Œåˆè¢«æˆä¸ºè¯­æ–™ã€‚åŒè¯­æˆ–è€…æ˜¯å¤šè¯­çš„å¯¹ç…§è¯­æ–™ï¼Œå¯¹äºŽmachine translationé¢†åŸŸçš„ç ”ç©¶æ˜¯ä¸€ä¸ªåŸºç¡€æ€§çš„å·¥ç¨‹ã€‚ æŽ¥ä¸‹æ¥è¿›å…¥åˆ°æ•°å­—çš„éƒ¨åˆ†ï¼Œåœ¨æœ€å¼€å§‹çš„æ—¶å€™ï¼Œæ•°å­—åªæ˜¯å•çº¯çš„ç”¨æ¥è¿›è¡Œè®¡æ•°ï¼Œè€Œå¹¶æ²¡æœ‰æ›´åŠ é«˜å±‚çš„æŠ½è±¡æ¦‚å¿µè¡¨è¾¾ã€‚ä¾‹å¦‚ä¸­å›½ðŸ‡¨ðŸ‡³äººå¯¹äºŽä¸åŒä½æ•°æ•°å­—çš„ç¼–ç æ˜¯ä¸ªåç™¾åƒä¸‡ï¼Œè¿™ä¹Ÿå°±æ˜¯æœ€æœ€æœ´ç´ çš„ç¼–ç æ–¹å¼ï¼Œè€Œè§£ç æ–¹å¼å°±æ˜¯æˆ‘ä»¬å¾ˆç†Ÿæ‚‰çš„ä¹˜æ³•ï¼Œä¾‹å¦‚20000 = 2x10x1000. ä»Žè±¡å½¢æ–‡å­—åˆ°æ‹¼éŸ³æ–‡å­—çš„è½¬å˜æ˜¯ä¸€ä¸ªé£žè·ƒï¼Œè¯´æ˜Žäººç±»åœ¨æè¿°ç‰©ä½“çš„æ–¹å¼ä¸ŠåŠ å…¥äº†æŠ½è±¡çš„å±‚æ¬¡ã€‚åŒæ—¶æˆ‘ä»¬ä¹Ÿèƒ½åœ¨æ—¥å¸¸çš„æ–‡å­—å½“ä¸­æ‰¾åˆ°ä¿¡æ¯è®ºä¸­æœ€çŸ­ç¼–ç åŽŸç†çš„å½±å­ã€‚æ¯”å¦‚è¯´å¸¸ç”¨çš„æ–‡å­—ä¸€èˆ¬ç¬”ç”»è¾ƒå°‘ï¼Œè€Œç”Ÿåƒ»å­—å¤§å¤šç¬”ç”»æ¯”è¾ƒå¤šã€‚è¿™ç§æ–‡å­—è®¾è®¡æ–¹æ³•æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ç§ç¼–ç æ–¹å¼ã€‚ å¤çŠ¹å¤ªäººæŠ„å†™ ã€Šåœ£ç»ã€‹ çš„å°æ•…äº‹ï¼šåœ¨æŠ„å†™çš„æ—¶å€™éš¾å…ä¼šå­˜åœ¨æŠ„å†™é”™è¯¯çš„æƒ…å†µï¼Œé‚£ä¹ˆèªæ˜Žçš„å¤çŠ¹å¤ªäººå‘æ˜Žäº†ä¸€ç§å’ŒçŽ°ä»£é€šä¿¡å½“ä¸­æ ¡éªŒä½æ€æƒ³å¾ˆç±»ä¼¼çš„ä¸€ç§æ–¹æ³•ã€‚æŠŠæ¯ä¸€ä¸ªå¸Œä¼¯æ¥å­—æ¯å¯¹åº”ä¸€ä¸ªæ•°å­—ï¼Œç„¶åŽæ¯è¡Œæ–‡å­—åŠ èµ·æ¥å°±èƒ½å¾—åˆ°ä¸€ä¸ªç‰¹æ®Šçš„æ•°å­—ï¼ŒåŒæ—¶å¯¹äºŽæ¯ä¸€åˆ—çš„æ–‡å­—è¿›è¡ŒåŒæ ·çš„æ“ä½œã€‚è¿™æ ·å¯¹äºŽæ¯ä¸€è¡Œæ¯ä¸€åˆ—éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„æ ¡éªŒä½ï¼Œå½“æŠ„å†™å®Œä¸€é¡µçš„æ—¶å€™ï¼Œä¼šåŽ»å’ŒåŽŸæ–‡é€ä¸€å¯¹æ¯”ï¼Œå¦‚æžœä¸€è‡´å°±è¯´æ˜ŽæŠ„å†™æ— è¯¯äº†ã€‚ è¿™ç« å½“ä¸­è¿˜æåˆ°äº†ä¸€ä¸ªè¯­è¨€å­¦ç ”ç©¶æ–¹æ³•çš„é—®é¢˜ï¼Œåˆ°åº•æ˜¯è¯­è¨€å¯¹ï¼Œè¿˜æ˜¯è¯­æ³•å¯¹.å‰è€…åšæŒä»ŽçœŸå®žçš„è¯­å¥æ–‡æœ¬ï¼Œä»Žè¯­æ–™å‡ºå‘ï¼ŒåŽè€…åˆ™æ˜¯åšæŒä»Žè¯­è¨€çš„è§„åˆ™å‡ºå‘å…¥æ‰‹ï¼Œå½“ç„¶çŽ°åœ¨çš„NLPé¢†åŸŸçš„æˆå°±å®£å‘Šæ˜¯å‰è€…çš„èŽ·èƒœã€‚ 2. è‡ªç„¶è¯­è¨€å¤„ç† â€“ ä»Žè§„åˆ™åˆ°ç»Ÿè®¡ äººç±»çš„è¯­è¨€æœ¬è´¨ä¸Šæ˜¯ä¸€ç§ç¼–è§£ç çš„è¿‡ç¨‹ï¼Œäººæƒ³è¦å°†è‡ªå·±çš„æ‰€æƒ³è¡¨è¾¾å‡ºæ¥ï¼Œé€šè¿‡è¯­è¨€è¿›è¡Œç¼–ç ï¼Œç„¶åŽå…¶ä»–äººéœ€è¦ç†è§£ä½ çš„æ„æ€çš„è¯ï¼Œéœ€è¦å¯¹è¯­è¨€è¿›è¡Œè§£ç ï¼Œä»Žè€ŒèŽ·å–åˆ°æƒ³è¦è¡¨è¾¾çš„æ„æ€ã€‚ æœ€æ—©æå‡ºæœºå™¨æ™ºèƒ½æ€æƒ³çš„æ˜¯é˜¿å…°å›¾çµåœ¨1950å¹´çš„ä¸€ç¯‡paperå½“ä¸­æå‡ºçš„ï¼Œä¹Ÿå³éžå¸¸è‘—åçš„å›¾çµæµ‹è¯•ã€‚ å½“å‰çš„NLPé¢†åŸŸçš„æˆå°±å…¨éƒ½é çš„æ•°å­¦ï¼Œæ›´å‡†ç¡®çš„è¯´æ˜¯é çš„ç»Ÿè®¡çš„æ”¯æŒã€‚ NLPç ”ç©¶ä»Žæœ€æ—©çš„åŸºäºŽè¯­æ³•è§„åˆ™çš„æ–¹æ³•è½¬å˜åˆ°äº†åŸºäºŽæ•°å­¦ç»Ÿè®¡çš„æ–¹æ³•ã€‚åŒæ—¶NLPç ”ç©¶ä¹Ÿä»Žå•çº¯çš„å¥æ³•åˆ†æžå’Œè¯­ä¹‰ç†è§£ï¼Œå˜æˆäº†éžå¸¸è´´è¿‘å®žé™…åº”ç”¨çš„MTã€è¯­éŸ³è¯†åˆ«ã€æ•°æ®æŒ–æŽ˜ã€çŸ¥è¯†èŽ·å–ç­‰ç­‰å®žé™…é¢†åŸŸã€‚ 3. ç»Ÿè®¡è¯­è¨€æ¨¡åž‹ è‡ªç„¶è¯­è¨€é€æ¸æ¼”å˜ä¸ºä¸Šä¸‹æ–‡ç›¸å…³çš„ä¿¡æ¯è¡¨è¾¾å’Œä¼ é€’æ–¹å¼ï¼Œä¸€ä¸ªåŸºæœ¬é—®é¢˜å°±æ˜¯ä¸ºè¿™ç§ä¸Šä¸‹æ–‡ç›¸å…³çš„ç‰¹æ€§å»ºç«‹ç»Ÿè®¡æ•°å­¦æ¨¡åž‹ã€‚ä¹Ÿå°±æ˜¯NLPå½“ä¸­éžå¸¸é‡è¦çš„ç»Ÿè®¡è¯­è¨€æ¨¡åž‹ é©¬å°”å¯å¤«å‡è®¾ï¼šå‡è®¾æ¯ä¸ªè¯å‡ºçŽ°çš„æ¦‚çŽ‡$\omega_i$åªä¸Žå‰ä¸€ä¸ªè¯$\omega_{i-1}$æ˜¯ç›¸å…³çš„ï¼Œä¹Ÿå°±æ˜¯æœ€åŽä¸€ä¸ªå¥å­å‡ºçŽ°çš„æ¦‚çŽ‡è¡¨ç¤ºä¸º$p(S) = p(\omega_1) * p(\omega_2|\omega_1) * p(\omega_3|\omega_2) * â€¦ * p(\omega_n|\omega_{n-1})$. è¿™ç§æ¨¡åž‹åˆå«åšäºŒå…ƒæ¨¡åž‹ï¼Œå¦‚æžœæ˜¯ä¹‹å‰çš„ä»¥å‰nä¸ªæ¨¡åž‹å‡ºçŽ°çš„æ¦‚çŽ‡æ¥ä¼°è®¡ä¸‹ä¸€ä¸ªè¯å‡ºçŽ°çš„æ¦‚çŽ‡ï¼Œåˆ™è¿™ç§æ¨¡åž‹å«åšNå…ƒæ¨¡åž‹. è½¬æ¢æˆè¿™ç§å½¢å¼ä¹‹åŽï¼Œå°±èƒ½å¾ˆæ–¹ä¾¿çš„é€šè¿‡è¯­æ–™æ¥è§£å†³ç»Ÿè®¡çš„é—®é¢˜ï¼Œæ ¹æ®å¤§æ•°å®šç†ï¼Œæœ€åŽçš„é¢‘çŽ‡ä¼°è®¡å°±åŸºæœ¬è¿‘ä¼¼äºŽå®žé™…çš„æ¦‚çŽ‡ä¼°è®¡ï¼Œä¹Ÿå³ï¼š$$p(\omega_n|\omega_{n-1}) = \frac{p(\omega_n, \omega_{n-1})}{p(\omega_{n-1})} \tag{1}$$ 4. åˆ†è¯]]></content>
      <categories>
        <category>Reading</category>
      </categories>
      <tags>
        <tag>Math</tag>
        <tag>Reading</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[machine-learning-1-DM-and-Bayesian]]></title>
    <url>%2F2019%2F06%2F29%2Fmachine-learning-1-DM-and-Bayesian%2F</url>
    <content type="text"><![CDATA[&nbsp;&nbsp;&nbsp;&nbsp;åœ¨è¿™ä¸ªç³»åˆ—çš„åšå®¢æ–‡ç« é‡Œé¢ï¼Œä¸»è¦è®°å½•çš„æ˜¯æœ¬å­¦æœŸã€Šæ•°æ®æŒ–æŽ˜å¯¼è®ºã€‹è¯¾ç¨‹å½“ä¸­çš„çŸ¥è¯†ç‚¹ï¼Œæ¶‰åŠçš„æ˜¯ä¼ ç»Ÿæœºå™¨å­¦ä¹ å½“ä¸­çš„ç®—æ³•ï¼ŒåŒ…æ‹¬æœ‰ç›‘ç£å­¦ä¹ ã€æ— ç›‘ç£å­¦ä¹ è¿™ä¸¤å¤§éƒ¨åˆ†ã€‚è¿™ç¯‡åšå®¢æ–‡ç« ä¸»è¦è®°å½•çš„æ˜¯machine learningç®€ä»‹ä»¥åŠBayesiançš„ç›¸å…³å†…å®¹ã€‚ 1. What is machine learningTwo kinds of problems ç›‘ç£å­¦ä¹ (supervised learning) æ— ç›‘ç£å­¦ä¹ (unsupervised learning) Differences: Supervised learning is trying to find a mapping from x to y, æ¯”å¦‚è¯´æ˜¯classficationæˆ–è€…æ˜¯regressionçš„é—®é¢˜ã€‚ unsupervised learningé—®é¢˜æ˜¯åªæœ‰æ— labelçš„æ ·æœ¬æ•°æ®ï¼Œæˆ‘ä»¬éœ€è¦å¯»æ‰¾interesting patterns, æ¯”å¦‚è¯´æ˜¯èšç±»(clusters)ã€é™ç»´ã€çŸ©é˜µåˆ†è§£(latent factors)ç­‰å†…å®¹ã€‚ Supervised learning: collecting samples -&gt; define featrues -&gt; design and build models -&gt; make prediction Good representation for featrues: Low intra-class variability Low inter-class similarity Bias and variance trade-off(åå·®å’Œæ–¹å·®ä¹‹é—´çš„æƒè¡¡ï¼Œä¸»è¦æ˜¯ä¸‹é¢è¿™å¼ å›¾ä½“çŽ°)ï¼š Genelization(æ¨¡åž‹çš„æ³›åŒ–èƒ½åŠ›)ï¼šThe performance on the testing data. ç®€å•çš„æ¨¡åž‹çš„Train erroræ›´å¤§ï¼Œç›¸å¯¹è€Œè¨€è¶Šå¤æ‚çš„æ¨¡åž‹çš„Train errorä¼šç›¸å¯¹æ›´å°ï¼Œä½†æ˜¯Test errorå°±ä¸ç¡®å®šäº†ï¼Œä¸»è¦è¦å‚è€ƒbiaså’Œvarianceè¿™ä¸¤ä¸ªåŸºå‡†æ¥è¿›è¡Œè€ƒé‡ã€‚ 2. Bayesian Bayesâ€™ Theorem è´å¶æ–¯å®šç†ï¼ˆè¿™é‡Œæˆ‘ä»¬åªéœ€è¦æŽŒæ¡è´å¶æ–¯å…¬å¼å³å¯ï¼‰$$P(A|B) = \frac{P(B|A) * P(A)}{P(B)}$$ Prior: å…ˆéªŒçŸ¥è¯†ï¼Œä¹Ÿå³åœ¨è¿›è¡Œåˆ†ç±»ä¹‹å‰æˆ‘ä»¬èƒ½å¤Ÿå¾—çŸ¥çš„å·²çŸ¥çš„æ ·æœ¬ä¿¡æ¯ï¼Œå¦‚æžœåªæ˜¯ç®€å•çš„æ ¹æ®å…ˆéªŒçŸ¥è¯†æ¥è¿›è¡Œåˆ†ç±»çš„è¯ï¼Œåªéœ€è¦åˆ¤æ–­$\omega_1$ if $p(\omega_1) &gt; p(\omega_2)$ else $\omega_2$. likelihood: ä¼¼ç„¶ï¼Œè¿™é‡Œä¸»è¦å¼•è¿›çš„æ˜¯æœ€å¤§ä¼¼ç„¶ä¼°è®¡&nbsp;&nbsp;&nbsp; Assign input pattern $x$ to class $\omega_1$ if $p(x|\omega_1) &gt; p(x|\omega_2)$ else $\omega_2$. Posterior: åŽéªŒæ¦‚çŽ‡ï¼Œåœ¨è´å¶æ–¯æ¨¡åž‹å½“ä¸­éžå¸¸é‡è¦çš„ä¸€ä¸ªç‚¹. $$\begin{aligned}p(\omega_i|x) &amp;= \frac{p(x|\omega_i) * p(\omega_i)}{p(x)} \\p(x) &amp;= \sum_{i=1}^c p(x|\omega_i) * p(\omega_i) \\ 1 &amp;= \sum_{i=1}^cp(\omega_i|x)\end{aligned}$$ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Posterior = prior * likelihood / evidence, ä¸è¿‡å› ä¸ºä½¿ç”¨è´å¶æ–¯è¿›è¡ŒåŽéªŒä¼°è®¡çš„æ—¶å€™ï¼Œevidenceä½¿ç”¨æ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥ä¸éœ€è¦è€ƒè™‘è¿™ä¸€é¡¹ï¼Œæˆ‘ä»¬åªéœ€è¦èšç„¦åœ¨å…ˆéªŒæ¦‚çŽ‡å’Œä¼¼ç„¶çš„è®¡ç®—ä¸Šå³å¯ã€‚ Optimal Bayes Decision rules &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; åœ¨è¿™é‡Œä½¿ç”¨çš„å°±æ˜¯åŽéªŒæ¦‚çŽ‡æ¥è¿›è¡Œå†³ç­–ï¼šif $p(\omega_1|x) &gt; p(\omega_2|x)$, decides $\omega_1$, otherwise $\omega_2$. åœ¨æ­¤åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è¯æ˜Žï¼Œè¿™ç§å†³ç­–æ–¹å¼æ˜¯é”™è¯¯æ¦‚çŽ‡æœ€å°çš„ä¸€ç§å†³ç­–æ–¹å¼ï¼Œè¿™æ˜¯å› ä¸ºï¼š $$p(error|x) = min(p(\omega_1|x), p(\omega_2|x))$$ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Special cases:æ€»å…±æ˜¯ä¸¤ç§ç‰¹æ®Šæƒ…å†µï¼Œå½“ç„¶ä¹Ÿæ˜¯ä»ŽåŽéªŒæ¦‚çŽ‡è®¡ç®—å…¬å¼çš„è§’åº¦å‡ºå‘è¿›è¡Œè€ƒè™‘ã€‚ if $p(\omega_1) = p(\omega_2)$, then decide by if $p(x|\omega_1) &gt; p(x|\omega_2)$ then $\omega_1$ otherwise $\omega_2$ (Actually is Maximum likelyhood decision). if $p(x|\omega_1) = p(x|\omega_2)$, then decide by if $p(\omega_1) &gt; p(\omega_2)$ then $\omega_1$ otherwise $\omega_2$ (Actually is Prior). Bayes risks &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; åœ¨Bayes riskså½“ä¸­å¼•å…¥äº†actionå’Œriskçš„æ¦‚å¿µï¼Œå…¶ä¸­$\lambda(\alpha_i, \omega_j)$è¡¨ç¤ºçš„æ˜¯åœ¨ $\omega_j$ ç±»åˆ«ä¹‹ä¸Š take $action_i$ çš„ $risk$, æ‰€ä»¥æˆ‘ä»¬åˆå¯ä»¥å¾—åˆ°ä¸€ä¸ªæ–°çš„ä¼˜åŒ–ç›®æ ‡ï¼Œå°±æ˜¯é€‰å–actionå½“ä¸­çš„Bayes riskså½“ä¸­æœ€å°çš„ã€‚$$\begin{aligned}R(\alpha_i|x) &amp;= \sum_{j=1}^c\lambda(\alpha_i, \omega_j)p(\omega_j|x) \\R(\alpha_i) &amp;= \sum_{over x}R(\alpha_i|x)\end{aligned}$$ Discriminant function &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ç”±äºŽåœ¨è´å¶æ–¯å†³ç­–å½“ä¸­ï¼Œæˆ‘ä»¬é€‰å–çš„æ˜¯åŽéªŒæ¦‚çŽ‡ä½œä¸ºæˆ‘ä»¬çš„å†³ç­–ç­–ç•¥ã€‚æ‰€ä»¥å¯ä»¥å¾—åˆ°è´å¶æ–¯çš„Discriminant function: $$g(x) = lnp(\omega_i|x) = lnp(x|\omega_i) + lnp(\omega_i)$$ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; å¯ä»¥çœ‹åˆ°è¿™ä¸ªå¼å­å½“ä¸­ï¼Œå…ˆéªŒä»Žæ•°æ®å½“ä¸­å¾ˆå®¹æ˜“èŽ·å–ï¼Œä¸»è¦æ˜¯ä¼¼ç„¶çš„ä¼°è®¡ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯¹ä¼¼ç„¶å‡½æ•°çš„å‚æ•°è¿›è¡Œä¼°è®¡ã€‚æœ€ç›´æŽ¥è€Œä¸”æœ€æœ´ç´ çš„å°±æ˜¯å‡è®¾ï¼Œæ•°æ®åœ¨ç±»åˆ«ç¡®å®šçš„æ—¶å€™æ˜¯æ»¡è¶³é«˜æ–¯åˆ†å¸ƒæˆ–è€…æ­£æ€åˆ†å¸ƒï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½å†™å‡ºä¼¼ç„¶å‡½æ•°çš„å½¢å¼ï¼ˆå…¶ä¸­$\Sigma$ä¸ºåæ–¹å·®çŸ©é˜µ, $\mu$ä¸ºå‡å€¼, $| |$ä¸ºè¡Œåˆ—å¼å€¼ï¼‰ï¼š $$p(x|\omega_i) = p(x|\theta) = \frac{1}{(2\pi)^{\frac{d}{2}}|\Sigma|^{\frac{1}{2}}} e^{-\frac{1}{2}(x-\mu)^T\Sigma^{-1}(x-\mu)}$$ MLE and Bayesian Estimation &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; æŽ¥ä¸‹æ¥ä¸€ä¸ªå¾ˆè‡ªç„¶çš„é—®é¢˜å°±æ˜¯ï¼Œæ—¢ç„¶çªå·²ç»çŸ¥é“äº†ä¼¼ç„¶å‡½æ•°çš„å½¢å¼ï¼Œé‚£æˆ‘çš„å‚æ•°åº”è¯¥æ€Žä¹ˆåŽ»ä¼°è®¡å‘¢ï¼Ÿåˆ«æ€¥ï¼Œè¿™é‡Œç»™å‡ºäº†ä¸¤ç§ç”¨æ¥ä¼°è®¡æœ€ä½³å‚æ•°çš„æ–¹æ³•ï¼Œä¸€ç§æ˜¯Maximum Likelyhood Estimation, ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„æžå¤§ä¼¼ç„¶ä¼°è®¡ï¼Œè¿˜æœ‰ä¸€ç§Bayesian Estimationè¿™é‡Œå°±ä¸å¤ªæ¶‰åŠï¼Œä¸»è¦æ€æƒ³æ˜¯æå‰å‡è®¾å‚æ•°æœ¬èº«ä¹Ÿæ˜¯ç¬¦åˆä¸€å®šçš„åˆ†å¸ƒçš„ï¼Œè€Œåœ¨MLEå½“ä¸­å‚æ•°æ˜¯æœ‰ä¸€ä¸ªæœ€ä¼˜çš„å€¼ï¼Œéœ€è¦é€šè¿‡æ•°æ®åŽ»ä¼°è®¡è¿™ä¸ªæœ€ä¼˜çš„å€¼ã€‚&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; æŽ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹çœ‹MLEæ˜¯å¦‚ä½•ä¼°è®¡å‚æ•°ï¼Œé¡¾åæ€ä¹‰ï¼Œéœ€è¦åŽ»æœ€å¤§åŒ–æ•°æ®é›†çš„ä¼¼ç„¶ã€‚è¿™é‡Œæˆ‘ä»¬å®šä¹‰$p(D|\omega_i)$ä¸ºæ•°æ®é›†çš„ä¼¼ç„¶å‡½æ•°ï¼Œå¹¶ä¸”å‡è®¾æ•°æ®$x_1, x_2, â€¦ i.i.d$æ˜¯ç‹¬ç«‹åŒåˆ†å¸ƒçš„æ•°æ®ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„æ•°æ®é›†ä¼¼ç„¶å°±èƒ½è¡¨ç¤ºä¸ºæ‰€æœ‰æ•°æ®çš„ä¼¼ç„¶è¿žä¹˜ï¼Œç„¶åŽå–ä¸€ä¸ªå¯¹æ•°ä¼¼ç„¶å˜ä¸ºè¿žåŠ ï¼Œæ‰€ä»¥æœ€åŽçš„log-likelyhoodå¯ä»¥è¡¨ç¤ºä¸ºå¦‚ä¸‹çš„å½¢å¼ï¼Œç„¶åŽæˆ‘ä»¬åªéœ€è¦maximizeè¿™ä¸ªä¼¼ç„¶å‡½æ•°å³å¯ï¼š $$l(\theta) = lnp(D|\theta) = \sum_{i=1}^nlnp(x_i|\theta)$$ $$\theta^* = argmaxl(\theta) \implies \nabla_{\theta}l(\theta) = 0$$ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; æœ€åŽåˆ†åˆ«å¯¹$\mu$å’Œ$\Sigma$è¿›è¡Œæ±‚å¯¼ï¼Œç„¶åŽå–æœ€å¤§å€¼å³å¯ï¼Œè¯¦ç»†çš„æŽ¨å¯¼è¿‡ç¨‹å¯ä»¥å‚è€ƒæˆ‘åœ¨DM-assignment1å½“ä¸­çš„æŽ¨å¯¼è¿‡ç¨‹ï¼Œé‡‡ç”¨çš„å°±æ˜¯å¯¹çŸ©é˜µè¿›è¡Œæ±‚å¯¼ï¼Œç„¶åŽå–æžå€¼çš„æ–¹å¼ã€‚So far, the MLE of all parameters for class k is shown below: $$\begin{cases}\hat{\mu_k} = \frac{1}{m} \sum_{i=1}^mx_i \\\hat{\Sigma_k} = \frac{1}{m}\sum_{i=1}^m(x_i-\hat{\mu_k})(x_i-\hat{\mu_k})^T \\\hat{\phi_k} = \frac{N_k}{N}\end{cases}$$ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ä¸è¿‡åœ¨è¿™é‡Œæœ‰ä¸€ç‚¹æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°åæ–¹å·®çŸ©é˜µè¿˜å¯ä»¥å†™æˆè¿™ç§å½¢å¼ï¼Œ$\Sigma = \frac{1}{k}XX^T$, æ‰€ä»¥å½“featruesæ•°å¤§äºŽsamplesæ•°çš„æ—¶å€™ï¼ŒçŸ©é˜µ$\Sigma$æ˜¯ä¸æ»¡ç§©çŸ©é˜µï¼Œä¹Ÿå°±æ„å‘³ç€è¿™ä¸ªæ—¶å€™æ˜¯ä¸èƒ½é€šè¿‡MLEæ¥ä¼°è®¡å‚æ•°çš„ï¼Œå› ä¸º$|\Sigma| = 0$, è¿™ä¸ªæ—¶å€™log-ä¼¼ç„¶â™¾ã€‚ Back to discriminat function &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; åœ¨ä¹‹å‰æˆ‘ä»¬è®¨è®ºäº†å¦‚ä½•åˆ©ç”¨MLEæ¥ä¼°è®¡ä¼¼ç„¶å‡½æ•°çš„å‚æ•°ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬ä¸»è¦è®¨è®ºå‡ ç§discriminat functionçš„å½¢å¼ï¼Œä¹Ÿå°±æ˜¯$g(x)$å‡½æ•°çš„çº¿æ€§å…³ç³»ã€‚æˆ‘ä»¬é¦–å…ˆå°†$p(x|\omega_i)$çš„é«˜æ–¯å½¢å¼å¸¦å…¥ä¸Šé¢çš„logä¼¼ç„¶å‡½æ•°ï¼Œå¾—åˆ°ï¼š $$g(x) = -\frac{1}{2}(x_i-\mu)^T\Sigma^{-1}(x_i-\mu)-\frac{d}{2}ln2\pi-\frac{1}{2}ln|\Sigma|+lnp(\omega_i)$$ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (1)Case $\Sigma_i = \sigma^2I$ $$g(x)=-\frac{1}{2\sigma^2}(X^TX-2\mu_i^TX+\mu_i^T\mu_i) + lnp(\omega_i) = \omega_i^TX+\omega_{i0} \implies linear$$ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Hyperplanes: $$\begin{aligned}g_i(x) = g_j(x)\end{aligned}$$ $$0 = (\frac{\mu_i-\mu_j}{\sigma^2})^Tx - \frac{\mu_i^T\mu_i - \mu_j^T\mu_j}{2\sigma^2} + ln\frac{p(\omega_i)}{p(\omega_j)}$$ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (2)Case $\Sigma_i = \Sigma$, å³æ‰€æœ‰ç±»çš„covçŸ©é˜µæ˜¯ç›¸åŒçš„ $$g_i(x) = \mu_i^T\Sigma^{-1}x-\frac{1}{2}\mu_i^T\Sigma^{-1}\mu_i + lnp(\omega_i) \implies linear$$ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (3)Case $\Sigma_i = arbitary$ $$g_i(x) = x^T\omega_ix+\omega_i^Tx + \omega_{i0} \implies Quadratic$$ Error Probabilities &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; è¿™ä¸€ä¸ªpartä¼šå±•ç¤ºä¸ºä»€ä¹ˆé€‰ç”¨åŽéªŒæ˜¯ä¸€ä¸ªæœ€ä¼˜çš„ç­–ç•¥ï¼Œé¦–å…ˆæˆ‘ä»¬çœ‹ä¸¤åˆ†ç±»çš„é—®é¢˜ï¼š &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (1)two-classes $$\begin{aligned}p(error) &amp;= p(x\in R_2, \omega_1) + p(x\in R_1, \omega_2) \\&amp;= p(x\in R_2|\omega_1)p(\omega_1) + p(x\in R_1|\omega_2)p(\omega_2) \\&amp;= \int_{x\in R_2}p(x|\omega_1)p(\omega_1) + \int_{x\in R_1}p(x|\omega_2)p(\omega_2)\end{aligned}$$ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (2)multi-classes $$p(correct) = \sum_{i=1}^c \int_{x\in R_i}p(x|\omega_i)p(\omega_i)$$ Naive Bayes classifier &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ç»è¿‡å‰é¢çš„ä¸€ç³»åˆ—é“ºåž«ä¹‹åŽï¼Œæˆ‘ä»¬å¼•å…¥ä»Šå¤©çš„æœ€åŽä¸€ä¸ªä¸»é¢˜ï¼Œæœ´ç´ è´å¶æ–¯åˆ†ç±»å™¨ã€‚æ€æƒ³éžå¸¸æœ´ç´ ï¼Œå°±æ˜¯åˆ©ç”¨çš„åŽéªŒæ¥è¿›è¡Œå†³ç­–ã€‚è€ŒåŽéªŒæ­£æ¯”ä¼¼ç„¶ä¹˜ä¸Šå…ˆéªŒï¼Œå…ˆéªŒçŸ¥è¯†å¾ˆå®¹æ˜“ä»Žæ•°æ®å½“ä¸­å¾—åˆ°ï¼Œä¼¼ç„¶åˆ™å‡è®¾çš„æ˜¯ä¸åŒfeatruesä¹‹é—´æ˜¯ä¸ç›¸å…³çš„ï¼Œä¹Ÿå³ï¼š $$p(\omega_i|x) \propto p(x|\omega_i)p(\omega_i) = p(x_1|\omega_i)p(x_2|\omega_i)â€¦p(x_n|\omega_i)p(\omega_i)$$ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; åˆ°è¿™é‡Œä¹‹åŽï¼Œæˆ‘ä»¬åªéœ€è¦å¯¹æ¯ä¸€ä¸ªfeatrueè¿›è¡Œä¸€ä¸ªä¼¼ç„¶çš„ä¼°è®¡å°±å¯ä»¥äº†ï¼Œæ ¹æ®æ•°æ®çš„å½¢å¼åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼š &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1)ç¦»æ•£å€¼ï¼š åœ¨$\omega_i$ç±»åˆ«å½“ä¸­ç›´æŽ¥æ•°æ•°é‡é™¤ä¸€ä¸‹å°±å¯ä»¥å¾—åˆ°ä¼¼ç„¶çš„å€¼ã€‚&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2)è¿žç»­å€¼ï¼š è¿™ç§æƒ…å†µä¹‹ä¸‹å‡è®¾$\omega_i$çš„æ•°æ®ç¬¦åˆé«˜æ–¯åˆ†å¸ƒï¼Œåˆ†åˆ«åŽ»è®¡ç®—mean $\mu$ å’Œæ–¹å·® $\sigma^2$, ç„¶åŽç”¨å­¦åˆ°çš„é«˜æ–¯æ¨¡åž‹å¯¹è¾“å…¥çš„æ•°æ®è¿›è¡Œä¼¼ç„¶è®¡ç®—å³å¯ã€‚ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; æœ€åŽè¦æä¸€ç‚¹å°±æ˜¯æ‹‰æ™®æ‹‰æ–¯å¹³æ»‘ï¼Œä¸ºä»€ä¹ˆè¦åšå¹³æ»‘å‘¢ï¼Œå› ä¸ºåœ¨ç¦»æ•£å€¼çš„æ—¶å€™ï¼Œå¾ˆå¯èƒ½è¾“å…¥çš„æ•°æ®åœ¨æ•°æ®é›†å½“ä¸­æ˜¯ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™æ ¹æ®å…ˆå‰çš„è®¡ç®—å…¬å¼è®¡ç®—å¾—å‡ºè¯¥é¡¹ä¸º0ï¼Œä½¿å¾—æ•´ä¸ªè¿žä¹˜çš„åŽéªŒæ¦‚çŽ‡å‡ä¸º0ï¼Œæ˜¾ç„¶è¿™æ˜¯ä¸åˆç†çš„ä¸€ç§è®¡ç®—æ–¹æ³•ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è¿›è¡Œå¹³æ»‘å¤„ç†ï¼Œå…·ä½“çš„å¹³æ»‘æ“ä½œæ˜¯, å…¶ä¸­çš„Kä¸º$\omega_k$ç±»å½“ä¸­æ€»çš„ç±»åˆ«æ•°ç›®ï¼š $$p(x_i|\omega_k) = \frac{|x_{ik}|+1}{N_{\omega_k}+K}$$ 3. Summary for Naive Bayes Robust to isolated noise points Handle missing values by ignoring the instance during probability estimate calculations Robust to irrelevant attributes Independence assumption may not hold for some attributes]]></content>
      <categories>
        <category>machine-learning</category>
      </categories>
      <tags>
        <tag>machine-learning</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[python-basic]]></title>
    <url>%2F2019%2F06%2F23%2Fpython-basic%2F</url>
    <content type="text"><![CDATA[&nbsp;&nbsp;&nbsp;&nbsp;æœ€è¿‘é©¬ä¸Šè¦pythonè€ƒè¯•äº†ï¼Œanywayè™½ç„¶æ˜¯åŸºç¡€è¯¾ï¼Œè¿˜æ˜¯ç¨å¾®å¤ä¹ ä¸€ä¸‹ï¼Œåœ¨è¿™é‡Œè®°å½•ä¸€ä¸‹å¯èƒ½ä¼šæœ‰çš„å‘å’Œå¹³æ—¶ä½œä¸šé‡Œé¢çš„ä¸€äº›é”™é¢˜ï¼Œä»¥åŽä¾ä¸€äº›å…¶ä»–åŸºæœ¬çš„éœ€è¦æ³¨æ„çš„ä¸œè¥¿éƒ½å¯ä»¥å†™åˆ°é‡Œé¢æ¥ï½ž Slideschapter1 Unicodeç ï¼šä¸ºæ¯ä¸ªå­—ç¬¦è®¾å®šäº†ç»Ÿä¸€çš„å¹¶ä¸”æ˜¯å”¯ä¸€çš„äºŒè¿›åˆ¶ç¼–ç ï¼Œç”¨æ¥æ»¡è¶³è·¨å¹³å°çš„éœ€æ±‚ã€‚ \uè¡¨ç¤ºUnicodeç ã€‚ utf-8ç¼–ç ï¼šæ¯ä¸€ä¸ªASCIIç éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„utf-8ç¼–ç ï¼Œæ­£å¥½ä¸Ž8ä½çš„ASCIIç¼–ç æ˜¯ä¸€æ ·çš„ã€‚pyç¨‹åºé»˜è®¤æ˜¯utf-8ç¼–ç æ ¼å¼ï¼Œå¹¶ä¸”æ˜¯ä¸å®šé•¿çš„ç¼–ç æ–¹å¼ã€‚ pyæ˜¯ä¸€ç§è§£é‡Šåž‹çš„è¯­è¨€ã€‚ æ ‡è¯†ç¬¦ï¼šç”±å­—ç¬¦ï¼Œä¸‹åˆ’çº¿ï¼Œæ•°å­—ç»„æˆï¼Œä½†æ˜¯æ³¨æ„çš„æ˜¯ä¸èƒ½ä»¥æ•°å­—å¼€å¤´. my_test _123 chapter2 äºŒè¿›åˆ¶ï¼Œå…«è¿›åˆ¶ï¼Œåå…­è¿›åˆ¶ï¼š0b(B)ã€0o(O)ã€0x(X) æµ®ç‚¹æ•° è¿ç®—(æ³¨æ„æ˜¯è¿ç®—) å­˜åœ¨è¯¯å·®ï¼š2.1-2.0==0.1 False. å¹¶ä¸”æµ®ç‚¹æ•°çš„//è¿ç®—è¾“å‡ºä¹Ÿæ˜¯æµ®ç‚¹æ•°ã€‚ ç§‘å­¦è®¡æ•°æ³•ï¼š12345 = 1.23e4, 0.012 = 1.2e-2. å¤æ•°ï¼šreal+imag * jï¼Œå…¶ä¸­realæ˜¯å®žæ•°éƒ¨åˆ†ï¼Œimagæ˜¯è™šæ•°éƒ¨åˆ†ã€‚ å‡½æ•°å’Œæ–¹æ³•ï¼šæ–¹æ³•æ˜¯ä¾èµ–æ•°æ®ç±»åž‹çš„å¦ä¸€ç§å‡½æ•°ï¼Œä¸€èˆ¬æ–¹æ³•æ˜¯åœ¨ç±»å½“ä¸­å®šä¹‰çš„å«åš ç±»æ–¹æ³• ã€‚ å¤šè¡Œå­—ç¬¦ä¸²ï¼Œæ˜¯ç”¨&#39;&#39;&#39;xxx&#39;&#39;&#39;æ¥è¡¨ç¤ºå¤šè¡Œå­—ç¬¦ä¸²ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ç»™æ¯ä¸€è¡Œçš„å­—ç¬¦ä¸²è‡ªåŠ¨åŠ ä¸Šä¸€ä¸ª\næ¥è¿›è¡Œæ¢è¡Œã€‚ pythonæ”¯æŒå¤šæ¡ä»¶æ¯”è¾ƒï¼Œä¹Ÿå³1&lt;3&lt;5 == 1&lt;3 and 3&lt;5, 1&lt;3&gt;2 == 1&lt;3 and 3&gt;2, æ‰€ä»¥è¿™ä¸¤ä¸ªéƒ½æ˜¯Trueã€‚ ä¸€å®šè¦æ³¨æ„and å’Œ or åˆ¤æ–­è¿™ä¸¤ä¸ªå‘ï¼Œä¸€ä¸ªæ˜¯andå¦‚æžœå‰é¢çš„å·²ç»Falseï¼ŒåŽé¢å°±ä¸ä¼šåˆ¤æ–­ï¼Œorå‰é¢å¦‚æžœå·²ç»Trueï¼ŒåŽé¢çš„ä¹Ÿä¸ä¼šåˆ¤æ–­äº†ã€‚ 3 and 5, æœ€åŽä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼ä½œä¸ºæ•´ä¸ªè¡¨è¾¾å¼çš„å€¼ã€‚ è¿ç®—çš„ä¼˜å…ˆçº§å’Œæ–¹å‘ï¼šé™¤æŽ‰**çš„æ–¹å‘æ˜¯ä»Žå³å¾€å·¦çš„ï¼Œå…¶ä»–æ‰€æœ‰è¿ç®—çš„æ–¹å‘éƒ½æ˜¯ä»Žå·¦å¾€å³çš„ã€‚ åˆ—è¡¨è¿ç®—ï¼šåŠ æ³•[1, 2, 3] + [c, py], ä¹˜æ³•[1] * 3 -&gt; [1, 1, 1] intå‡½æ•°ç”¨æ³•ï¼šint()-&gt;0, int(&quot;02&quot;), int(&quot; 35 &quot;), int(&quot;35&quot;, 8)è¡¨ç¤ºçš„æ˜¯å…«è¿›åˆ¶ä¸‹çš„&quot;35&quot;ä»£è¡¨çš„10è¿›åˆ¶æ•°. å…¶ä»–å†…ç½®å‡½æ•°ï¼šbin(), hex(), oct(), ord(str)-&gt;unicode, chr(unicode)-&gt;str åºåˆ—ä¸ç­‰çš„èµ‹å€¼ï¼ši, *j = &quot;123&quot;, j -&gt; [&#39;2&#39;, &#39;3&#39;] æ ¼å¼åŒ–ï¼š^, &lt;, &gt;åˆ†åˆ«ä»£è¡¨çš„æ˜¯å±…ä¸­ã€å·¦ã€å³å¯¹é½æ–¹å¼ã€‚ç§‘å­¦è®¡æ•°æ³•ï¼š.2eä¿ç•™ä¸¤ä½å°æ•°çš„ç§‘å­¦è®¡æ•°æ³•ã€‚{index_1:x.yf}{index_2:x.yf}æ ¼å¼åŒ–å­—ç¬¦ä¸²ã€‚format(value, &quot;x.yf&quot;) chapter3 åˆ—è¡¨é€†åºï¼šlst[::-1]ã€‚ åˆ—è¡¨çš„æµ…å¤åˆ¶ï¼šb = a[:], è¿™æ ·å¤åˆ¶å‡ºæ¥çš„å°±æ˜¯ä¸¤ä¸ªä¸åŒçš„åˆ—è¡¨ã€‚æˆ–è€…é‡‡ç”¨åˆ—è¡¨å½“ä¸­çš„æ–¹æ³•ï¼šb = a.copy(). åŽŸå§‹å­—ç¬¦ä¸²ï¼šr&#39;hello\n&#39; -&gt; hello\n, å­—ç¬¦ä¸²ä¸å¯ä¿®æ”¹, find(str, start_pos, end_pos) title()é¦–å­—æ¯å¤§å†™ï¼Œlower(), upper() å­—ç¬¦ä¸²çš„formatå‡½æ•°ï¼š{index:&lt;å¡«å……&gt;|^, &gt;, &lt;| &lt;å®½åº¦.ç²¾åº¦&gt;&lt;æ ¼å¼&gt;}, åŒæ—¶&#39;{:,}&#39;.formatè¡¨ç¤ºçš„æ˜¯åƒåˆ†ä½æ•°ç”¨é€—å·éš”å¼€çš„å½¢å¼ åˆ—è¡¨æ–¹æ³•ï¼šl.extend(x), l.pop(index)é»˜è®¤æœ€åŽä¸€ä¸ªä¸”ä¼šè¿”å›ž, l.remove(value), l.reverse(), l.sort(), l.insert(index, value)è‹¥indexè¶…åˆ™æœ€åŽä¸€ä¸ª, å¦‚æžœæ˜¯indexä¸ºè´Ÿæ•°çš„æ—¶å€™è¶…åˆ™éƒ½æ˜¯æ’å…¥åœ¨ç¬¬ä¸€ä¸ª. a = (3) -&gt; int, a = (3,) -&gt; tuple, å¹¶ä¸”å…ƒç»„åªæœ‰count(x) å’Œ index(x)è¿™ä¸¤ä¸ªå‡½æ•° éœ€è¦æ³¨æ„splitå‡½æ•°ï¼š 123456sen = 'hello wor ld 's = sen.split()print(len(s)) -&gt; 3s = sen.split(' ')print(len(s)) -&gt; 10 éšæœºå‡½æ•°åº“ï¼šrandomåº“ random.random() -&gt; [0.0, 1.0) random.uniform(a, b) -&gt; [a, b] random.randint(a, b) -&gt; éšæœºçš„ä¸€ä¸ªæ•´æ•° chapter4 Python mapå‡½æ•°: map(function, iterable) å¯¹æŒ‡å®šçš„åºåˆ—æ‰§è¡Œmapæ“ä½œï¼Œä¹Ÿå³æ¯ä¸ªå…ƒç´ éƒ½æ‰§è¡Œfunction, x, y = map(int, input().split())æ‰§è¡Œçš„æ˜¯å†…ç½®å‡½æ•°int, æˆ–è€…ä¹Ÿå¯ä»¥æ˜¯åŒ¿åå‡½æ•°map(lambda x : x**2, [1, 2, 3]). try-exceptä½¿ç”¨æ ¼å¼ï¼š 1234567891011try: blockexcept Exception 1: block1except Exception 2: block2except: block3else: block4finally: block5 whileä½¿ç”¨æ ¼å¼ï¼š 1234while(condition): block1else: block2 Gcdç®—æ³• 12345def gcd(a, b): if b == 0: return a else: return gcd(b, a % b) chapter5 setæ˜¯ä¸€ç§å®¹å™¨ï¼Œæ²¡æœ‰å…ˆåŽé¡ºåºï¼Œå¹¶ä¸”å…ƒç´ çš„å€¼ä¸é‡å¤, éœ€è¦æ³¨æ„çš„æ˜¯é›†åˆçš„å…ƒç´ éœ€è¦æ˜¯ä¸å¯å˜å¯¹è±¡, æ¢å¥è¯è¯´å°±æ˜¯åˆ—è¡¨ä¸èƒ½æˆä¸ºé›†åˆå½“ä¸­çš„å…ƒç´ . ç©ºé›†åˆï¼š 12empty = set()empty = &#123;&#125; #åˆ›å»ºçš„æ˜¯ç©ºå­—å…¸ æ–¹æ³•ï¼šadd, remove, len, max, min, sum, issubset, issuperset, éœ€è¦ç‰¢è®°çš„æ˜¯é›†åˆæ˜¯æ— åºçš„ï¼Œæ‰€ä»¥æ¯æ¬¡printå‡ºæ¥çš„ç»“æžœæ˜¯ä¸ç¡®å®šçš„ã€‚ åœ¨é›†åˆå½“ä¸­çš„ == åˆ¤æ–­çš„æ˜¯ä¸¤ä¸ªsetå½“ä¸­çš„å…ƒç´ æ˜¯å¦æ˜¯ç›¸åŒçš„ï¼Œå¦‚æžœæ˜¯ç›¸åŒçš„åˆ™è¾“å‡ºçš„æ˜¯True. &lt;, &lt;=, &gt;, &gt;=åˆ¤æ–­æ˜¯çœŸå­é›†ï¼Œå­é›†ï¼ŒçœŸè¶…é›†ï¼Œè¶…é›†è¿™äº›çš„ã€‚ é›†åˆè¿ç®—|, &amp;, -, ^åˆ†åˆ«æ˜¯å¹¶é›†ã€äº¤é›†ã€å·®é›†ã€å¯¹ç§°å·®ï¼Œå¯¹ç§°å·®æŒ‡çš„æ˜¯é™¤äº†å…±åŒå…ƒç´ ä¹‹å¤–çš„å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯a ^ b = (a | b) - (a &amp; b) åˆ—è¡¨åŽ»é‡å¹¶ä¸”é¡ºåºä¸å˜ä¸¤ç§æ–¹æ³•ï¼š 123456789a = [1, 2, 6, 1, 3, 4, 2, 5]addr_to = list(set(a))addr_to.sort(key=a.index)a = [1, 2, 6, 1, 3, 4, 2, 5]addr_to = []for i in a: if not i in addr_to: addr_to.append(i) å­—å…¸çš„åˆ›å»ºæ–¹å¼ï¼š 123fac = dict([(key1, value1), (key2, value2)])fac = dict(key1=value1, key2=value2) #è¿™ç§æ–¹å¼éœ€è¦ä½¿ç”¨æ ‡è¯†ç¬¦ï¼Œå¹¶ä¸”é”®ç”¨çš„æ˜¯strç±»åž‹# -&gt; &#123;'key1':value1, 'key2':value2&#125; å­—å…¸çš„é”®å¿…é¡»è¦æ˜¯ä¸å¯å˜å¯¹è±¡ï¼Œå¯å˜å¯¹è±¡æ¯”å¦‚åˆ—è¡¨ï¼Œå­—å…¸æ˜¯ä¸èƒ½ä½œä¸ºå­—å…¸çš„é”®çš„ã€‚ å­—å…¸çš„æ–¹æ³•ï¼šin, not inåˆ¤æ–­çš„æ˜¯ä¸€ä¸ªå€¼æ˜¯å¦å­˜åœ¨å­—å…¸çš„é”®å½“ä¸­ã€‚get(key, é»˜è®¤å€¼)è¿™ä¸ªå‡½æ•°å¯ä»¥åœ¨åŽé¢è®¾ç½®ä¸€ä¸ªé»˜è®¤å€¼ä½œä¸ºä¸å­˜åœ¨æ—¶å€™çš„è¿”å›žï¼Œä¸åŠ æ˜¯None. chapter6 lambdaè¡¨è¾¾å¼ï¼šg = lambda x, y, z : x + y + z -&gt; g(1, 2, 3) ä½ç½®å‚æ•°: å°±æ˜¯æ™®é€šçš„é‚£ç§å‚æ•°ä¼ é€’æ–¹å¼ å…³é”®å­—å‚æ•°(å¯ä»¥å…è®¸ä½ç½®ä¸åŒæ—¶è¿›è¡Œèµ‹å€¼)ï¼š 12345def dis(x1,y1,x2,y2): #æ±‚å¹³é¢ä¸Šä¸¤ç‚¹è·ç¦» print("x1=&#123;&#125;,y1=&#123;&#125;,x2=&#123;&#125;,y2=&#123;&#125;".format(x1,y1,x2,y2)) return sqrt((x1-x2)**2+(y1-y2)**2)print(dis(x1=1,y2=5,y1=3,x2=4)) ä½ç½®å‚æ•°ä¸Žå…³é”®å­—å‚æ•°ä¸€èµ·ä½¿ç”¨ï¼šéœ€è¦æ³¨æ„âš ï¸çš„æ˜¯è¿™ç§æƒ…å†µä¹‹ä¸‹ï¼Œä½ç½®å‚æ•°éœ€è¦å…ˆå†™ï¼Œç„¶åŽå†ä½¿ç”¨å…³é”®å­—å‚æ•°ï¼Œå¦åˆ™ä¼šå‡ºé”™ã€‚ 12345678910111213#correct usefrom math import sqrtdef dis(x1,y1,x2,y2): #æ±‚å¹³ é¢ä¸Šä¸¤ç‚¹è·ç¦» print("x1=&#123;&#125;,y1=&#123;&#125;,x2=&#123;&#125;,y2=&#123;&#125;".format(x1,y1,x2,y2)) return sqrt((x1-x2)**2+(y1-y2)**2)print(dis(1,3,y2=5,x2=4))#wrong casefrom math import sqrtdef dis(x1,y1,x2,y2): #æ±‚å¹³é¢ä¸Šä¸¤ç‚¹è·ç¦» print("x1=&#123;&#125;,y1=&#123;&#125;,x2=&#123;&#125;,y2=&#123;&#125;".format(x1,y1,x2,y2)) return sqrt((x1-x2)**2+(y1-y2)**2)print(dis(1,y1=3,4,5)) é»˜è®¤å€¼å‚æ•°ï¼šè¿™é‡Œå°±æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé»˜è®¤å€¼å‚æ•°åœ¨å‡½æ•°å¯¹è±¡è¢«åˆ›å»ºçš„æ—¶å€™åŒæ—¶è¢«åˆ›å»ºï¼Œç›¸å½“äºŽå¦‚æžœé»˜è®¤å€¼æœ‰ä¸€ä¸ªlistçš„æ—¶å€™ï¼Œæœ‰ä¸€ä¸ªé™æ€çš„staticçš„listä¸€ç›´å­˜åœ¨ï¼š 12345def init(arg, result=[]): result.append(arg)print(result)init('a') #['a']init('b') #['a', 'b'] ä¸å®šé•¿æ•°ç›®å‚æ•°ï¼šä½¿ç”¨*å°†å¯å˜çš„å‚æ•°å˜ä¸ºå…ƒç»„å­˜æ”¾ï¼Œå…·ä½“çš„ä½¿ç”¨ðŸŒ°ï¼š 12345def countnum(a,*b): #è®¡ç®—å‚æ•°ä¸ªæ•° print(b) #(7, 9) print(len(b)+1) # 3countnum(3,7,9)countnum(5,8,1,6,89) *æˆ–è€…æ˜¯**ä½œç”¨åœ¨å‡½æ•°çš„å½¢å‚ä¸Šä»£è¡¨çš„åˆ†åˆ«æ˜¯ç”¨å…ƒç»„å’Œå­—å…¸æ¥æŽ¥æ”¶å‚æ•°ã€‚*æˆ–è€…æ˜¯**ä½œç”¨åœ¨å®žå‚ä¸Šä»£è¡¨çš„æ˜¯è§£åŒ…ï¼š 1234567lst = [1, 2, 3]print(*lst) # 1 2 3def countnum(a,**d): #è®¡ç®—å‚æ•°ä¸ªæ•° print(d) print(len(d)+1)countnum(3,x1=9,x2=1,x3=6,x4=89) returnå¦‚æžœæ²¡æœ‰åˆ™é»˜è®¤å€¼æ˜¯None å‘½åç©ºé—´ï¼šå…¨å±€å˜é‡å’Œå±€éƒ¨å˜é‡ä¸ä¸€æ ·ï¼Œåœ¨å±€éƒ¨åŒºåŸŸé‡Œé¢å¯ä»¥ä½¿ç”¨å…¨å±€å˜é‡ï¼Œä½†æ˜¯è¿™ä¸ªæ—¶å€™ä¸èƒ½åœ¨å±€éƒ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨äº†å…¨å±€å˜é‡å†å®šä¹‰åŒåå˜é‡ï¼Œå¦åˆ™å‡ºé”™âŒï¼Œä¼šå˜æˆå˜é‡è¿˜æœªå®šä¹‰å°±ä½¿ç”¨ã€‚ä½†æ˜¯ä¸€æ—¦å®šä¹‰äº†åŒåçš„å˜é‡ï¼Œä½¿ç”¨éƒ½æ˜¯ç”¨çš„å±€éƒ¨å˜é‡æ¥ä½¿ç”¨ã€‚è¦ä½¿ç”¨å’Œä¿®æ”¹å…¨å±€å˜é‡ï¼Œè¯·ä½¿ç”¨globalå…³é”®å­—æ¥å®Œæˆã€‚ å†…ç½®å‡½æ•°zipç”¨æ¥æ‰“åŒ…ðŸ“¦ä¸¤ä¸ªå¯è¿­ä»£çš„åºåˆ— 123456789101112131415161718192021222324252627a = [1, 2, 3]b = [4, 5, 6]print(list(zip(a, b)))# å­—å…¸çš„é”®å€¼å¯¹äº’æ¢dic = &#123;1:1, 2:2, '1':500&#125;print(dict(zip(dic.values(), dic.keys())))# &#123;1: 1, 2: 2, 500: '1'&#125;# eval è®¡ç®—è¡¨è¾¾å¼çš„å€¼a = 3; b = 7print(eval('a * 3 + b * 5'))# exec æ‰§è¡Œpythonè¯­å¥exec('print("hello world")')'''all, any æŽ¥å—çš„æ˜¯å¯è¿­ä»£çš„åºåˆ—allè¡¨ç¤ºå…¨éƒ¨æ˜¯Trueï¼Œæ‰è¿”å›žTrueanyè¡¨ç¤ºåªè¦æœ‰ä¸€ä¸ªTrueï¼Œå³ç»“æžœæœ€åŽè¿”å›žçš„æ˜¯True'''all([[], False, 0]) # Falseall([1, True, [1]]) # Trueany([[], False, 0]) # False# __main__çš„ä½œç”¨åŸŸå°±æ˜¯å…¨å±€åŸŸ å‘½ä»¤è¡Œå‚æ•°æ ¼å¼ï¼šsys.argv[0]æ–‡ä»¶åï¼Œsys.argv[1]â€¦éƒ½æ˜¯å‚æ•°ã€‚ pythonåŒ…ï¼šæ˜¯ä¸€ä¸ªç›®å½•ï¼Œå½“ä¸­è¦åŒ…å«init.pyï¼Œç„¶åŽå°±æ˜¯é‚£ç§ä¼ ç»Ÿçš„åŒ…ï¼Œå¯ä»¥è¿›è¡Œimport package.module chapter7 æ–‡ä»¶æ‰“å¼€ï¼šopen(filename, mode) è¯»å†™å‡½æ•°ï¼š read: å°†æ–‡ä»¶æ‰€æœ‰å†…å®¹è¯»å– readlines: æŒ‰è¡Œè¯»å–å†…å®¹ï¼Œä½†æ˜¯åˆ—è¡¨å½“ä¸­çš„æ¯ä¸€é¡¹æœ€åŽéƒ½æœ‰ä¸€ä¸ª\n, readlineä¹Ÿæ˜¯ä¸€æ ·çš„ä¼šæœ‰ä¸€ä¸ª\nåœ¨è¯»å–çš„å­—ç¬¦ä¸²æœ€åŽã€‚ å¤šæ¡ä»¶æŽ’åºï¼š 12ans=sorted(counts.items(), key=lambda x:(-x[1], x[0]))# æŒ‰ç…§valueé™åºï¼Œç„¶åŽå†æŒ‰ç…§keyå‡åºæŽ’åˆ— chapter8 ä¸€åˆ‡å†…å®¹çš†æ˜¯å¯¹è±¡ï¼Œå‡½æ•°å’Œç±»ä¹Ÿæ˜¯å¯¹è±¡ã€‚ ç±»ä¸»è¦æŒ‡çš„æ˜¯ç±»åž‹ï¼Œå¯¹è±¡æ˜¯æ¯”è¾ƒå…·ä½“çš„ä¸€äº›å€¼ã€‚lst = [1, 2, 3], å…¶ä¸­listæ˜¯å¯¹è±¡lstçš„classï¼Œä¹Ÿå°±æ˜¯listç±»åž‹çš„å¯¹è±¡ ç±»æœ‰è‡ªå·±çš„åå­—ç©ºé—´ï¼ŒåŒæ—¶æ¯ä¸ªå¯¹è±¡ä¹Ÿæœ‰è‡ªå·±çš„åå­—ç©ºé—´ã€‚ æž„é€ æ–¹æ³•ï¼šdef __init__(self, â€¦) æž„é€ æ–¹æ³•ï¼Œå½“å¯¹è±¡è¢«æž„é€ çš„æ—¶å€™è¢«è‡ªåŠ¨è°ƒç”¨ï¼Œå¯ä»¥å£°æ˜Žç±»æ‰€äº§ç”Ÿçš„å¯¹è±¡å±žæ€§ï¼Œå¹¶å¯ä¸ºå…¶èµ‹åˆå§‹å€¼ï¼Œæœ€é‡è¦çš„æ˜¯è¿™ä¸ªå‡½æ•°æ˜¯ä¸èƒ½æœ‰è¿”å›žå€¼çš„ã€‚-&gt; åˆ›å»ºå¯¹è±¡çš„æ—¶å€™è°ƒç”¨çš„æ˜¯objectæœ¬èº«çš„__init__æ–¹æ³•ã€‚ selfå‚æ•°ï¼šå¿…é¡»ä¸ºç¬¬ä¸€ä¸ªå½¢å‚ï¼Œä»£è¡¨çš„æ˜¯å°†æ¥è¦åˆ›å»ºçš„å¯¹è±¡æœ¬èº«ã€‚åœ¨ç±»çš„æ–¹æ³•å½“ä¸­è®¿é—®æ•°æ®æˆå‘˜çš„æ—¶å€™ï¼Œéœ€è¦ä½¿ç”¨self.parameterè¿›è¡Œè°ƒç”¨ã€‚åœ¨å¤–éƒ¨é€šè¿‡å¯¹è±¡è°ƒç”¨å®žä¾‹æ–¹æ³•çš„æ—¶å€™ä¸éœ€è¦ä¼ é€’selfå‚æ•°ï¼Œå¦‚æžœåœ¨å¤–éƒ¨é€šè¿‡ç±»æ¥è°ƒç”¨å®žä¾‹æ–¹æ³•çš„æ—¶å€™ï¼Œå¯ä»¥æ˜¾å¼çš„æŠŠå¯¹è±¡ä¼ åˆ°selfé‡Œé¢ã€‚ pythonç¤¾å›¢è§„å®šï¼š _xxx å†…éƒ¨åï¼Œä¸åº”è¯¥åœ¨å¤–éƒ¨ä½¿ç”¨ __xxx pyè§£é‡Šå™¨ä¼šè‡ªåŠ¨æ¢åä¸º_class__xxxï¼Œéœ€è¦æ³¨æ„çš„æ˜¯æˆå‘˜å˜é‡å’Œç±»å˜é‡éƒ½ä¼šè‡ªåŠ¨æ¢åï¼Œæ‰€ä»¥å¯¹è±¡æ˜¯ç›´æŽ¥è®¿é—®ä¸åˆ°è¿™ä¸ªå˜é‡çš„.ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¯ä»¥ä½¿ç”¨object._class__xxxè®¿é—®åˆ°è¯¥å˜é‡ï¼Œæ‰€ä»¥å¹¶ä¸æ˜¯ç»å¯¹æ„ä¹‰ä¸Šçš„ç§æœ‰å˜é‡ã€‚ __xxx__ç³»ç»Ÿå®šä¹‰çš„ç‰¹æ®Šæˆå‘˜ï¼Œä¸€èˆ¬ä¸ä½¿ç”¨è¿™ç§æ ‡è¯†ç¬¦ã€‚ ç±»å˜é‡å’Œå®žä¾‹å˜é‡éƒ½æ˜¯å¯ä»¥åŠ¨æ€å¢žåŠ å¯¹åº”çš„å˜é‡çš„. ç»§æ‰¿çš„ç±»å¦‚æžœé‡å†™äº†__init__, å¦‚æžœè¦åˆå§‹åŒ–çˆ¶ç±»éœ€è¦æ˜¾å¼çš„super().__init__è°ƒç”¨çˆ¶ç±»çš„åˆå§‹åŒ–å‡½æ•°ã€‚ pythonå¤šæ€ï¼Œä¸€èˆ¬æ˜¯é€šè¿‡é‡å†™__add__, __len__, __sub__ä¹‹ç±»çš„å‡½æ•°æ¥è‡ªå®šä¹‰è‡ªå·±çš„åŸºæœ¬è¿ç®—ã€‚ é¢˜ç›®è§£æž pythonå½“ä¸­æµ®ç‚¹æ•°æ˜¯floatç±»åž‹ï¼Œå¹¶æ²¡æœ‰doubleåž‹ç±»åž‹ã€‚ round(x, 2)è¡¨ç¤ºçš„æ˜¯ä¿ç•™ä¸¤ä½å°æ•°çš„å››èˆäº”å…¥æ³•ã€‚round(18.67, 1) = 18.7, round(18.67, -1) = 20.0, round(18.67, 0) = 19.0, floor(), ceil(), int(&quot;20&quot;, 16) = 32. é€»è¾‘å€¼not, or, andå¦‚æžœæœ‰å¤šä¸ªåˆ™æ˜¯ä¸€æ­¥ä¸€æ­¥çš„åˆ¤æ–­è¿‡åŽ»çš„ã€‚ä»Žå·¦åˆ°å³çš„direction, å°±æ˜¯è¯´oræˆ–è€…andå·¦å³ä¸¤è¾¹éƒ½è¦æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼. math.sin(x)å…¶ä¸­xæ˜¯å¼§åº¦åˆ¶è¡¨ç¤ºçš„ï¼Œæ‰€ä»¥ç”¨è§’åº¦å€¼éœ€è¦è¿›è¡Œç›¸å¯¹åº”çš„åˆ¶åº¦è½¬æ¢. 0 and anythingçš„ç»“æžœéƒ½æ˜¯0ï¼Œå…¶ä»–çš„value1 and value2ç»“æžœè¡¨è¾¾å¼éƒ½æ˜¯value2. liståªæœ‰indexæ–¹æ³•ï¼Œå¯¹äºŽå­—ç¬¦ä¸²è€Œè¨€æ˜¯æœ‰indexå’Œfindä¸¤ç§æ–¹æ³•çš„ã€‚å…¶ä¸­findæ²¡æ‰¾åˆ°æ˜¯è¿”å›ž-1, indexæ²¡æ‰¾åˆ°çš„è¯ç›´æŽ¥æ˜¯æŠ¥é”™ã€‚ listçš„pop(index)æŒ‰ç…§indexï¼Œé»˜è®¤æ˜¯popåˆ—è¡¨çš„æœ€åŽä¸€ä¸ªå€¼ã€‚remove(value)æ˜¯æŒ‰ç…§valueæ¥removeçš„. æµ®ç‚¹æ•°çš„ç›¸ç­‰æ˜¯çœ‹å†…éƒ¨çš„æµ®ç‚¹æ•°è¡¨ç¤ºï¼Œæ‰€ä»¥å¦‚æžœä¸¤ä¸ªå˜é‡å¼•ç”¨åŒä¸€ä¸ªå¸¸é‡æµ®ç‚¹æ•°çš„è¯ï¼Œç›¸ç­‰æ˜¯Trueï¼Œå› ä¸ºæœ¬èº«å°±æ˜¯åŒä¸€ä¸ªå¸¸é‡å¼•ç”¨x = 2.0;y=2.0 (x==y) = True. ä½†æ˜¯å¦‚æžœæ¶‰åŠåˆ°æµ®ç‚¹æ•°çš„è¿ç®—çš„æ—¶å€™éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼Œä¸€èˆ¬æ¥è¯´è¡¨ç¤ºæ–¹å¼å°±æœ‰å˜åŒ–ï¼Œæ‰€ä»¥å¾ˆå¤§æ¦‚çŽ‡å¹¶ä¸æ˜¯ä¸€ä¸ªå€¼äº†ã€‚å¹¶ä¸”ä½Žç²¾åº¦åœ¨å’Œé«˜ç²¾åº¦æ¯”è¾ƒçš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨è½¬æ¢åˆ°é«˜ç²¾åº¦. 12345x=2;y=2.0 #åˆ†å·å¯æŠŠä¸¤ä¸ªè¯­å¥å†™åœ¨ä¸€è¡Œif(x == y): print("ç›¸ç­‰") # correct answerelse: print("ä¸ç›¸ç­‰") åŒé‡å¾ªçŽ¯listçš„ðŸŒ°ï¼š 123456l3=[[(i,j) for i in range(1,6)] for j in range(1,6)]print(l3[2][1][0])# å…¶ä¸­jè´Ÿè´£å¤–å±‚çš„åˆ›å»ºæ–°åˆ—è¡¨ï¼Œiè´Ÿè´£å†…å±‚å’Œjä¸€åŒç”Ÿæˆå…ƒç»„å€¼ï¼Œ# [[(1, 1), (2, 1)...], [(1, 2), (2, 2)...]]# ç„¶åŽæ ¹æ®å¯¹åº”å…³ç³»æ¥æ‰¾å€¼å³å¯ ä»¥åªå†™æ¨¡å¼æ‰“å¼€çš„æ–‡ä»¶ä¸èƒ½è¿›è¡Œå†™æ“ä½œï¼Œä½†æ˜¯ä»¥å†™æ¨¡å¼æ‰“å¼€çš„æ–‡ä»¶æœ‰å¯èƒ½å¯ä»¥è¿›è¡Œå†™æ“ä½œã€‚ åœ¨pythonå½“ä¸­å˜é‡ä¸éœ€äº‹å…ˆå£°æ˜Žå°±å¯ä½¿ç”¨ã€‚ æ³¨æ„åˆ¤æ–­æ¡ä»¶ï¼š 12345678910if number%2 and not number%3:# ä»£è¡¨çš„æ˜¯numberä¸æ˜¯2çš„å€æ•°ï¼Œä½†æ˜¯æ˜¯3çš„å€æ•°b=[1,2,3]b[2]=b# è¿™ç§æƒ…å†µä¸‹æ˜¯æ— é™å¾ªçŽ¯çš„æƒ…å†µif v &lt; values[row][column]: v = values[row][column]# æ³¨æ„æ±‚çš„æ˜¯æœ€å¤§å€¼ï¼Œè€Œä¸æ˜¯æœ€å°å€¼ ðŸ’ç»å…¸é¢˜ï¼š 12345678910n = int(input().strip())ls = [i for i in range(1, n + 1)]index = -1while len(ls) &gt; 1: index = (index + 3) % len(ls) del ls[index] index -= 1 # æ³¨æ„è¿™é‡Œè¦æŠŠindex-1print(ls[0]) åœ¨ä¸‰å¼•å·çš„å­—ç¬¦ä¸²ä¸­å¯ä»¥åŒ…å«å•å¼•å·ï¼ŒåŒå¼•å·å­—ç¬¦. ä¸è¿‡åœ¨å•ç‹¬çš„å•åŒå¼•å·çš„æ—¶å€™ï¼Œéœ€è¦è€ƒè™‘è½¬ä¹‰æˆ–è€…å•å¼•å·åˆ©ç”¨åŒå¼•å·è¿™ç§ä¸åŒçš„è¡¨ç¤ºå½¢å¼ã€‚ æ³¨æ„åœ¨å¤šå˜é‡èµ‹å€¼çš„æ—¶å€™,x = y = z + 1æ˜¯ä¸ä¼šå‡ºé”™çš„ï¼Œä½†æ˜¯x = (y = z + 1)æ˜¯å‡ºé”™çš„ï¼Œå› ä¸ºpythonè‡ªåŠ¨å°†y = z + 1ä½œä¸ºä¸€ä¸ªè¡¨è¾¾å¼å¤„ç†ï¼Œä½†æ˜¯åˆæ²¡æœ‰è¿”å›žå€¼ï¼Œæ‰€ä»¥å‡ºé”™ï¼ï¼ listçš„sortæ–¹æ³•æ˜¯æ²¡æœ‰è¿”å›žå€¼çš„ã€‚]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>basis</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Old Books Trading Website]]></title>
    <url>%2F2019%2F06%2F22%2FWebsite%2F</url>
    <content type="text"><![CDATA[&nbsp;&nbsp;&nbsp;&nbsp;é™†é™†ç»­ç»­å†™äº†å¤§æ¦‚ä¸¤å‘¨æ—¶é—´çš„æ—§ä¹¦äº¤æ˜“ç½‘ç«™ç»ˆäºŽå¿«å†™å®Œå•¦ï¼ï¼BSè¯¾ç¨‹çš„è¯¾ç¨‹é¡¹ç›®è®¾è®¡ï¼ŒçœŸæ˜¯å¿ƒåŠ›äº¤ç˜ã€‚åˆšå¥½æ–°æžäº†ä¸€ä¸ªåšå®¢è¯•è¯•æ°´ï¼Œå°±åœ¨è¿™é‡Œè®°å½•ä¸€äº›å¼€å‘è¿‡ç¨‹å½“ä¸­çš„æ„Ÿæƒ³å’Œç¢°åˆ°çš„å¾ˆå¤šå¾ˆå¤šå‘å§orzï¼Œä¸è¿‡è¿˜æ˜¯å­¦åˆ°å¾ˆå¤šä¸œè¥¿çš„å–ï¼ åŽç«¯æ¡†æž¶&nbsp;&nbsp;&nbsp;&nbsp;åŽç«¯æ¡†æž¶é€‰ç”¨çš„æ˜¯Djangoæ¡†æž¶å¼€å‘çš„ï¼Œä¸ºä»€ä¹ˆé€‰Pythonä½œä¸ºåŽç«¯çš„è¯­è¨€å‘¢ï¼Œä¸€æ–¹é¢æ˜¯è¿™å­¦æœŸåˆšå¥½ä¹Ÿæœ‰åœ¨ä¸Špythonè¯¾ç¨‹ï¼Œå¦ä¸€æ–¹é¢pythonçœŸçš„å¾ˆå‹å¥½å•Šï¼Œä¸è¿‡ä»¥åŽä¹Ÿè¦å°è¯•ç”¨java springåšç‚¹å°é¡¹ç›®ã€‚ Djangoè·¯ç”±&nbsp;&nbsp;&nbsp;&nbsp;Djangoæ¡†æž¶éµå¾ªçš„æ˜¯MVCçš„æ€æƒ³è¿›è¡Œå¼€å‘çš„æ¡†æž¶ã€‚urls.pyå½“ä¸­æ˜¯ç½‘ç«™è·¯ç”±çš„é…ç½®ï¼Œä¸€èˆ¬é¡¹ç›®çš„è·¯ç”±å½“ä¸­æ˜¯åˆ’å®šä¸åŒappä¸‹çš„èµ·å§‹è·¯ç”±ï¼Œç„¶åŽåœ¨ä¸åŒçš„appä¸‹å†å®šä¹‰å„è‡ªçš„urlï¼Œä½¿å¾—æ•´ä¸ªé¡¹ç›®çš„è·¯ç”±ç®¡ç†æ¯”è¾ƒç‹¬ç«‹ï¼Œæ¯”å¦‚åœ¨æˆ‘é¡¹ç›®å½“ä¸­çš„æ€»è·¯ç”±é…ç½®(BookTradeWeb/urls.py): 123456789urlpatterns = [ path('admin/', admin.site.urls), url(r'^password-reset/', include('password_reset.urls')), url(r'^auth/', include('useraction.urls')), url(r'^books/', include('books.urls')), url(r'^chatting/', include('chatting.urls')), url(r'^media/(?P&lt;path&gt;.*)$', serve, &#123;'document_root': settings.MEDIA_ROOT&#125;), url(r'^$', TemplateView.as_view(template_name="login.html")),] &nbsp;&nbsp;&nbsp;&nbsp;ç„¶åŽåœ¨æ¯ä¸ªå•ç‹¬çš„appé‡Œé¢å¯ä»¥è‡ªå®šä¹‰è‡ªå·±çš„è·¯ç”±äº†ï¼Œä»¥æˆ‘å…¶ä¸­ä¸€ä¸ªapp(useraction)ä¸‹çš„urls.pyä¸ºðŸŒ°ï¼Œä¸è¿‡éœ€è¦è®°ä½çš„æ˜¯é€šè¿‡python manage.py startapp åˆ›å»ºä¹‹åŽçš„urls.pyæ˜¯éœ€è¦è‡ªå·±åˆ›å»ºçš„ã€‚åœ¨ä¸åŒçš„appé‡Œé¢å¯ä»¥å®šä¹‰è‡ªå·±çš„app_nameï¼Œåœ¨åŽé¢å†™æ¨¡æ¿è¯­è¨€çš„æ—¶å€™éžå¸¸çˆ½çš„ï¼ŒåŽé¢åœ¨å‰ç«¯é‚£é‡Œå†è¯¦ç»†å†™ï¼š 1234567app_name = 'useraction'urlpatterns = [ url(r'^login/$', views.UserLoginView.as_view(), name='login'), url(r'^register/$', views.UserRegisterView.as_view(), name='register'), url(r'^logout/$', views.UserLogoutView.as_view(), name='logout'),] Django Views&nbsp;&nbsp;&nbsp;&nbsp;Django viewså¯ä»¥è¯´æ˜¯å¾ˆå¼ºå¤§äº†ï¼Œåœ¨MVCæž¶æž„å½“ä¸­å®ƒå¯ä»¥å……å½“viewå’Œcontrollerä¸¤éƒ¨åˆ†çš„è§’è‰²ã€‚çŽ°åœ¨å¾ˆæµè¡Œä½¿ç”¨restfulçš„æ–¹å¼å¼€å‘ç½‘ç«™ã€‚ä¹Ÿå³åŽç«¯åªæä¾›æ•°æ®ï¼Œç”¨jsonæˆ–è€…protobufæˆ–è€…å…¶ä»–çš„æ•°æ®ç»„ç»‡å½¢å¼æ¥ä¼ è¾“æ•°æ®ï¼Œè€Œå‰ç«¯å‘åŽç«¯å‘é€è¯·æ±‚æ¥è¯·æ±‚æ•°æ®æˆ–è€…å¤„ç†é€»è¾‘ï¼Œå®žçŽ°å‰åŽç«¯åˆ†ç¦»çš„å¼€å‘ã€‚&nbsp;&nbsp;&nbsp;&nbsp;Django viewså› ä¸ºæœ‰å¾ˆå¤šDjangoè‡ªå·±çš„åŠ æŒï¼Œä½¿å¾—è¿™ä¸¤ç§æ¨¡å¼éƒ½æ”¯æŒï¼Œæ¯”å¦‚JsonResponseè¿”å›žjsonæ ¼å¼çš„æ•°æ®ï¼Œæˆ–è€…é€šè¿‡render(request, index.html, data)çš„æ–¹å¼ç›´æŽ¥è¿”å›žç½‘é¡µï¼Œå¹¶ä¸”èƒ½ç”¨éžå¸¸çˆ½çš„æ¨¡æ¿è¯­è¨€ï¼Œç®€ç›´äººè§äººçˆ±å•Šæœ‰æœ¨æœ‰ï¼&nbsp;&nbsp;&nbsp;&nbsp;è¿™é‡Œæˆ‘é€‰æ‹©çš„æ˜¯ç”¨çš„class-based viewçš„æ–¹å¼æ¥å†™views.pyçš„ï¼Œåœ¨BookTradeWeb/utils.pyå½“ä¸­å®šä¹‰äº†BaseViewï¼Œè¿™ä¸ªç±»ç»§æ‰¿äº†Djangoå½“ä¸­å†…ç½®çš„viewï¼ŒåŽé¢æˆ‘ä»¬è‡ªå·±çš„viewåªéœ€è¦ç»§æ‰¿BaseViewå³å¯ï¼Œæˆ‘ä»¬çœ‹çœ‹BaseViewé‡Œé¢å®šä¹‰äº†äº›å•¥ï¼š 123456789101112131415161718192021222324252627282930313233class BaseView(View): def dispatch(self, request, *args, **kwargs): self.request = request request.data = &#123;&#125; if request.method == 'GET': request.data = request.GET.dict() elif request.content_type == 'application/json': request.data = request.body.replace(b"'", b'"') request.data = json.loads(request.data) elif request.content_type == 'multipart/form-data': request.data = request.POST.dict() if not request.FILES == None: request.data['file'] = request.FILES['file'] elif request.content_type == 'application/x-www-form-urlencoded': request.data = request.POST.dict() return self.do_dispatch(request, *args, **kwargs) def do_dispatch(self, *args, **kwargs): handler = getattr(self, self.request.method.lower(), None) if not callable(handler): return JsonResponse(make_errors(f"http method &#123;self.request.method.lower()&#125; not allowed ")) else: try: data = handler(*args, **kwargs) if data == None: return JsonResponse(make_success('success')) elif self.request.method == 'GET' or not isinstance(data, dict): return data else: return JsonResponse(&#123;'data': data, 'code': 0&#125;) except Exception as e: traceback.print_exc() return JsonResponse(make_errors(str(e))) &nbsp;&nbsp;&nbsp;&nbsp;è¿™æ ·å®šä¹‰BaseViewæœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Œé¦–å…ˆåœ¨BaseViewé‡Œé¢é‡å†™äº†Viewå½“ä¸­çš„dispatchæ–¹æ³•ï¼Œæ¯å½“æœ‰ä¸€ä¸ªè¯·æ±‚åˆ°è¾¾å¯¹åº”è·¯ç”±é‚£é‡Œçš„æ—¶å€™ï¼Œéƒ½ä¼šè°ƒç”¨dispatchæ–¹æ³•ã€‚åœ¨dispatchå½“ä¸­æˆ‘ä»¬å°†æ•°æ®ç»Ÿä¸€éƒ½æ”¾åˆ°request.dataé‡Œé¢ï¼ŒåŽé¢çš„viewså½“ä¸­æ— è®ºæ˜¯POSTè¿˜æ˜¯GETéƒ½å¯ä»¥åœ¨request.dataé‡Œé¢æ‹¿åˆ°æ•°æ®ã€‚&nbsp;&nbsp;&nbsp;&nbsp;å…¶æ¬¡åœ¨do_dispatchå½“ä¸­ä¼šåŽ»è‡ªå®šä¹‰viewé‡Œé¢æ‰¾å¯¹åº”request methodçš„å¤„ç†æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬çš„è‡ªå®šä¹‰viewé‡Œé¢åªéœ€è¦åŽ»å†™å¯¹åº”çš„å‡½æ•°ï¼Œæ¯”å¦‚è¯´def get(self, request) å¤„ç†getè¯·æ±‚ï¼Œdef post(self, request)æ¥å¤„ç†å¯¹åº”çš„postè¯·æ±‚ï¼Œæ˜¯ä¸æ˜¯å¾ˆæ–¹ä¾¿å‘¢ï¼åœ¨è‡ªå®šä¹‰viewå†™å®Œä¹‹åŽï¼Œåªéœ€è¦åœ¨urls.pyé‡Œé¢åŽ»æ³¨å†Œä¸€ä¸‹å°±å¥½äº†ï¼Œä¸‹é¢ä¸¾ä¸€ä¸ªðŸŒ°ï¼š 12345678910111213141516class UserLoginView(BaseView): def post(self, request): user = authenticate(username = request.data.get('username'), password = request.data.get('password')) if user and user.is_active: login(request, user) return user.to_dict() elif not user: raise Exception('ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ï¼') def get(self, request): return render(request, 'login.html')useraction/urls.pyurl(r'^login/$', views.UserLoginView.as_view(), name='login') Django models&nbsp;&nbsp;&nbsp;&nbsp;Djangoæä¾›äº†ä¸€å¥—éžå¸¸å®Œå¤‡çš„ORMï¼Œä»¥è‡³äºŽæˆ‘çœŸçš„ä¸€è¡ŒSQLè¯­å¥éƒ½æ²¡å†™å•ŠðŸ˜‚ã€‚modelsä¹Ÿå°±æ˜¯æ•°æ®åº“é‡Œé¢çš„è¡¨ï¼Œé€šè¿‡ç±»å®šä¹‰çš„æ–¹å¼æ¥å®šä¹‰æ¯ä¸€å¼ è¡¨å½“ä¸­çš„æ•°æ®é¡¹ã€å±žæ€§ã€å¤–é”®çº¦æŸç­‰ç­‰ã€‚ä¸€èˆ¬å®šä¹‰å¥½modelsä¹‹åŽåªéœ€è¦æ‰§è¡Œpython manage.py makemigrations &amp;&amp; python manage.py migrateå°†modelsè¿ç§»åˆ°æ•°æ®åº“å½“ä¸­ã€‚Djangoé¡¹ç›®åˆå§‹é»˜è®¤ä½¿ç”¨çš„æ•°æ®åº“æ˜¯sqliteï¼Œæˆ‘è¿™é‡Œå°†å®ƒæ”¹æˆäº†MySQLï¼Œå…·ä½“å°±æ˜¯ä¿®æ”¹setting.pyé‡Œé¢çš„é…ç½®å°±å¥½äº†ã€‚&nbsp;&nbsp;&nbsp;&nbsp;ORMçš„è¯­æ³•ç½‘ä¸Šæ•™ç¨‹æˆ–è€…æ˜¯Djangoå®˜ç½‘æ•™ç¨‹éƒ½æœ‰å¾ˆå¤šçš„ã€‚ä¸»è¦å°±æ˜¯å†…éƒ¨ç”¨çš„ä¸€ä¸ªQuerySetç±»æ¥ä»£è¡¨è¿”å›žç»“æžœï¼Œè¿˜æœ‰å¾ˆå¤šå¥‡å¥‡æ€ªæ€ªçš„ç”¨æ³•è¿™é‡Œå°±ä¸å†èµ˜è¿°ã€‚ Django setting&nbsp;&nbsp;&nbsp;&nbsp;Django é€šè¿‡åœ¨é¡¹ç›®ç›®å½•ä¸‹çš„setting.pyä¸‹é¢è¿›è¡Œæ•´ä¸ªé¡¹ç›®çš„é…ç½®ï¼Œå¤§æ¦‚è®²è§£ä¸€ä¸‹è¿™äº›é…ç½®æ˜¯å¹²å•¥çš„ï¼Œå°±è®²ä¸€äº›ä¸»è¦çš„ï¼Œå…¶ä»–çš„éƒ½æ˜¯å¾ˆå®¹æ˜“Googleåˆ°çš„ï¼š ALLOWED_HOSTS: å…è®¸é‚£äº›hostè®¿é—®ï¼Œå¦‚æžœéœ€è¦å…è®¸æ‰€æœ‰ä¸€èˆ¬è®¾ç½®ä¸º[â€˜*â€™, ] INSTALLED_APPS: è¿™ä¸ªé…ç½®æ˜¯æ¯”è¾ƒé‡è¦çš„ä¸€éƒ¨åˆ†ï¼Œç”¨æ¥æ³¨å†Œé¡¹ç›®é‡Œé¢çš„appï¼Œå¦‚æžœä½ æ–°å»ºçš„appæ²¡æœ‰åœ¨è¿™é‡Œæ³¨å†Œçš„è¯ï¼Œé¡¹ç›®æ˜¯æ‰¾ä¸åˆ°ä½ çš„appé‡Œé¢çš„æ–¹æ³•çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¯æ¬¡æ–°å»ºéƒ½éœ€è¦åœ¨è¿™é‡Œè¿›è¡Œæ³¨å†Œä¹‹åŽæ‰èƒ½æ­£å¸¸çš„å·¥ä½œå“¦ðŸ˜¯ Middleware: è¿™é‡Œæ˜¯é¡¹ç›®ä¸­ä½¿ç”¨çš„ä¸­é—´ä»¶çš„é…ç½®ï¼Œæ¯”å¦‚Djangoå†…ç½®çš„ç”¨æˆ·è®¤è¯ä¸­é—´ä»·ï¼Œé˜²è·¨ç«™æ”»å‡»çš„csrftokenä¸­é—´ä»·ç­‰ç­‰ï¼Œå¦‚æžœä½¿ç”¨å…¶ä»–çš„å¼€æºä¸­é—´ä»·éƒ½éœ€è¦åœ¨è¿™é‡Œè¿›è¡Œæ³¨å†Œã€‚ TEMPLATES: è¿™é‡Œä¸»è¦æ˜¯å­˜æ”¾çš„é™æ€æ–‡ä»¶çš„æ„æ€ï¼ŒåŸºæœ¬ä¸ç”¨åŽ»æ”¹ï¼ŒDjangoä¼šåŽ»é¡¹ç›®æ‰€æœ‰çš„templatesæ–‡ä»¶å¤¹ä¸‹é¢æ‰¾å¯¹åº”çš„æ¨¡æ¿æ–‡ä»¶ã€‚ DATABASES: é¡¾åæ€ä¹‰å°±æ˜¯æ•°æ®åº“çš„é…ç½®äº†ï¼Œä½ æƒ³ç”¨å“ªä¸ªæ•°æ®æ”¹æ”¹è¿™ä¸ªå°±å¥½äº†ã€‚ 1234567STATIC_URL = '/static/' STATICFILES_DIRS = [ os.path.join(BASE_DIR, 'BookTradeWeb/static') ] MEDIA_URL = '/media/' MEDIA_ROOT = os.path.join(BASE_DIR, 'media/') è¿™ä¸¤ä¸ªæ˜¯é™æ€æ–‡ä»¶å’Œèµ„æºæ–‡ä»¶çš„å­˜æ”¾ä½ç½®ï¼ŒDjangoä¼šåŽ»staticå’Œmediaæ–‡ä»¶å¤¹é‡Œé¢è‡ªåŠ¨å¯»æ‰¾ã€‚ å‰ç«¯æ¨¡æ¿&nbsp;&nbsp;&nbsp;&nbsp;å‰ç«¯è¿˜æ˜¯ä¸»è¦ç”¨çš„ä¼ ç»Ÿçš„html+js+cssçš„æ ¼å¼ï¼Œç„¶åŽé€šè¿‡ajaxå‘åŽç«¯å‘èµ·è¯·æ±‚ï¼Œæ²¡èƒ½ç”¨çŽ°åœ¨å¾ˆæµè¡Œçš„Reactæˆ–è€…æ˜¯Vueæœ‰ç‚¹å¯æƒœï¼Œåªèƒ½æ„Ÿæ…¨å‰ç«¯å¤ªéš¾äº†ï¼ï¼.ä¸è¿‡Djangoè‡ªå·±çš„æ¨¡æ¿è¯­è¨€ç”¨èµ·æ¥è¿˜æ˜¯å¯ä»¥çš„ï¼Œä¸è¿‡æˆ‘æ„Ÿè§‰è¿™ä¸ªé¡¹ç›®è°ƒå‰ç«¯çš„æ—¶é—´æ˜¯æœ€ä¸»è¦çš„å•Šorz. é™æ€æ–‡ä»¶åŠ è½½&nbsp;&nbsp;&nbsp;&nbsp;ä¹‹å‰æˆ‘ä»¬åœ¨settingé‡Œé¢é…ç½®å¥½äº†staticæ–‡ä»¶ç›®å½•ä¹‹åŽï¼Œåœ¨æ¨¡æ¿é‡Œé¢æˆ‘ä»¬å¯ä»¥è¿™æ ·å¼•å…¥ï¼Œåœ¨æœ€å¼€å¤´é€šè¿‡ 12&#123;% load staticfiles %&#125; åŠ è½½é™æ€æ–‡ä»¶&#123;% static 'images/favicon.png' %&#125; å¼•å…¥å¯¹åº”æ–‡ä»¶ &nbsp;&nbsp;&nbsp;&nbsp;æ³¨æ„Djangoä¼šæœç´¢æ‰€æœ‰çš„staticæ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶ï¼Œæ‰€ä»¥ä¸€èˆ¬ä½¿ç”¨appåç§°ä½œä¸ºå‰ç¼€æ¥è¿›è¡ŒåŒºåˆ†ã€‚ å‰ç«¯è·¯ç”±&nbsp;&nbsp;&nbsp;&nbsp;åœ¨ä¹‹å‰æˆ‘ä»¬æåˆ°æ¯ä¸ªurls.pyé‡Œé¢æˆ‘ä»¬å¯ä»¥æ·»åŠ ä¸€ä¸ªapp_nameå­—æ®µï¼Œå¹¶ä¸”æ¯ä¸ªurl_patterné‡Œé¢éƒ½å¯ä»¥å¸¦ä¸Šä¸€ä¸ªnameå­—æ®µï¼Œç„¶åŽåœ¨å‰ç«¯å°±å¯ä»¥ç›´æŽ¥ç”¨æ¨¡æ¿è¯­è¨€å½“ä¸­çš„url &#39;app_name:name&#39;æ¥èŽ·å–åŽç«¯å®šä¹‰å¥½çš„è·¯ç”±ï¼Œè¿™æ ·å°±ç®—ä½ åŽç«¯æ”¹äº†è·¯ç”±ä¹‹åŽï¼Œå‰ç«¯æ ¹æœ¬ä¸ç”¨ç®¡å•Šæ˜¯ä¸æ˜¯ï½ž 123456useraction/urls.pyapp_name = 'useraction'url(r'^register/$', views.UserRegisterView.as_view(),name='register')template:&#123;% url 'useraction:register' %&#125; å‰ç«¯æ•°æ®æ¸²æŸ“&nbsp;&nbsp;&nbsp;&nbsp;æœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯é€šè¿‡ajaxå‘åŽç«¯è¯·æ±‚ï¼Œç„¶åŽç”¨jsæ¥è¿›è¡Œæ•°æ®æ¸²æŸ“ï¼Œè¿˜æœ‰ä¸€ç§æ˜¯é€šè¿‡æ¨¡æ¿è¯­è¨€ï¼Œåœ¨renderæ–¹æ³•çš„æ—¶å€™å°†æ•°æ®ä¼ é€’åˆ°æ¨¡æ¿é‡Œé¢ï¼Œç„¶åŽä½¿ç”¨æ¨¡æ¿è¯­è¨€æ¸²æŸ“ï¼Œå¸¸ç”¨çš„æœ‰ï¼š 12345678910111213&#123;&#123; data &#125;&#125; å–å‡ºä¼ é€’è¿›æ¥æ•°æ®å½“ä¸­çš„dataå­—æ®µ&#123;% if ... %&#125;&#123;% else %&#125;&#123;% endif %&#125; æ¨¡æ¿è¯­è¨€å½“ä¸­çš„ifè¯­å¥&#123;% for book in books %&#125;&#123;&#123; book.data &#125;&#125;&#123;% endfor %&#125; æ¨¡æ¿è¯­è¨€å½“ä¸­çš„forè¯­å¥&#123;&#123; book.time|data:"Y-M-d" &#125;&#125; æ¨¡æ¿è¯­è¨€å½“ä¸­çš„filterè¿‡æ»¤å™¨&#123;&#123; request.user &#125;&#125; æ¨¡æ¿å½“ä¸­èŽ·å–å½“å‰è¯·æ±‚çš„user &nbsp;&nbsp;&nbsp;&nbsp;è¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„ç”¨æ³•å¤§å®¶è‡ªå·±ç½‘ä¸Šæ‰¾æ‰¾ä¹Ÿèƒ½æ‰¾åˆ°ã€‚è¿™é‡Œä¸»è¦å°†è¿˜å¯ä»¥è‡ªå®šä¹‰è‡ªå·±çš„filterï¼Œä¸€ä¸ªå¾ˆç›´è§‚çš„éœ€æ±‚å°±æ˜¯æˆ‘åƒæ¨¡æ¿é‡Œé¢ä¼ è¿›äº†ä¸€ä¸ªå­—å…¸ï¼Œçªæ€Žä¹ˆæ ¹æ®é”®æ¥æ‰¾å€¼å‘¢ï¼ŒDjangoæä¾›äº†è‡ªå®šä¹‰filterçš„åŠŸèƒ½ï¼Œåœ¨appç›®å½•ä¸‹é¢æ–°å»ºä¸€ä¸ªtemplatetagsæ–‡ä»¶å¤¹ï¼Œé¦–å…ˆæ–°å»ºä¸€ä¸ª__init__.pyä¸ºç©ºä¸è¦ç´§ï¼Œä½†æ˜¯ä¸€å®šè¦æœ‰ã€‚ç„¶åŽå»ºä¸€ä¸ªè‡ªå®šä¹‰çš„filteræ–‡ä»¶ï¼Œè¿™é‡Œæˆ‘æ˜¯books_filter.pyï¼Œé€šè¿‡@register.filteræ ‡æ³¨ä¸ºä¸€ä¸ªè‡ªå®šä¹‰çš„filterï¼Œç„¶åŽå°±å†™ä½ æƒ³è¦çš„filteré€»è¾‘å³å¯ï¼š 123456789101112from django.template.defaulttags import registerfrom BookTradeWeb.utils import Categoryfrom books.models import Book@register.filterdef GetDictValue(dictionary, key): assert isinstance(dictionary, dict) return dictionary.get(key)æ¨¡æ¿ä¸­ä½¿ç”¨ï¼šé¦–å…ˆæœ€ä¸Šæ–¹å¼•å…¥ä½ çš„filter &#123;% load books_filter %&#125;ç„¶åŽç”¨æ³•ï¼š&#123;&#123; book_dict|GetDictValue:key &#125;&#125; Websocket&nbsp;&nbsp;&nbsp;&nbsp;ç”±äºŽDjangoæœ¬èº«æ˜¯ä¸æ”¯æŒwebsocketçš„ï¼Œä½†æ˜¯è¿™æ¬¡è¦æ±‚è¦é›†æˆä¸€ä¸ªæ¶ˆæ¯ç³»ç»Ÿï¼Œæ‰€ä»¥æƒ³åˆ°çš„æ˜¯websocketè¿™ä¸ªå…¨åŒå·¥çš„åè®®ã€‚Googleäº†ä¸€ä¸‹ï¼Œå¯ä»¥é€šè¿‡django-channelsç¬¬ä¸‰æ–¹çš„packageæ¥å®žçŽ°âœ…ï¼Œæ‰€ä»¥ç›´æŽ¥pipå®‰è£…å°±å¥½ã€‚channelsæ˜¯ç”¨çš„redisåšæ¶ˆæ¯ç¼“å­˜ï¼Œæ‰€ä»¥è¿˜è¦pip install channels-redisï¼Œè¿™äº›éœ€è¦çš„ä¾èµ–ä¸€èˆ¬éƒ½æ˜¯å†™åœ¨requirements.txtå½“ä¸­ã€‚å¦‚æžœä¸æƒ³åœ¨æœ¬æœºå®‰è£…rediså¯ä»¥é€šè¿‡dockeræ¥å¼€å¯æœåŠ¡ï¼Œå…·ä½“å°±æ˜¯å¼€ä¸€ä¸ªdocker containerå°±å¥½ï¼Œdocker run -d -p 6379:6379 redis:latest, æžå®šã€‚&nbsp;&nbsp;&nbsp;&nbsp;åœ¨settingé‡Œé¢æ³¨å†Œchannelsè¿™ä¸ªappï¼Œç„¶åŽæ·»åŠ å¦‚ä¸‹çš„è®¾ç½®: 123456789ASGI_APPLICATION = "BookTradeWeb.routing.application"CHANNEL_LAYERS = &#123; 'default': &#123; 'BACKEND': 'channels_redis.core.RedisChannelLayer', 'CONFIG': &#123; "hosts": [(CONFIGS['REDIS_HOST'], CONFIGS['REDIS_PORT'])], &#125;, &#125;,&#125; &nbsp;&nbsp;&nbsp;&nbsp;asgié…ç½®ä¸»è¦æ˜¯ç”¨æ¥å¤„ç†websocketè¯·æ±‚çš„ï¼Œç±»ä¼¼ws://è¿™æ ·çš„è¯·æ±‚Djangoè‡ªå·±çš„æœåŠ¡å™¨æ˜¯å¤„ç†ä¸äº†çš„ï¼Œæ‰€ä»¥è¿™é‡Œç”¨asgié…ç½®ï¼Œéœ€è¦åœ¨appç›®å½•ä¸‹é¢æ–°å»ºä¸€ä¸ªrouting.pyç”¨æ¥å¤„ç†websocketè·¯ç”±ã€‚ 1234567891011121314151617é¡¹ç›®ç›®å½•(BookTradeWeb/routing.py)application = ProtocolTypeRouter(&#123; # (http-&gt;django views is added by default) 'websocket' : AuthMiddlewareStack( URLRouter( chatting.routing.websocket_urlpatterns ) ),&#125;)appç›®å½•ä¸‹(chatting/routing.py)from django.conf.urls import urlfrom . import consumerswebsocket_urlpatterns = [ url(r'^ws/chat/(?P&lt;room_name&gt;[^/]+)/$', consumers.ChatConsumer),] &nbsp;&nbsp;&nbsp;&nbsp;ç»è¿‡è¿™æ ·ä¸€é€šé…ç½®ï¼Œå¼€å¯python manage.py runserverï¼Œçœ‹åˆ°ASGI/Channelså°±é…ç½®æˆåŠŸäº†ã€‚ Consumer&nbsp;&nbsp;&nbsp;&nbsp;åœ¨channelså½“ä¸­å¤„ç†websocketè¯·æ±‚çš„ä¸œè¥¿å«åšconsumerï¼Œå’Œä¸Šé¢æˆ‘ä»¬æåˆ°çš„viewä¸€æ ·ï¼Œconsumerä¹Ÿæ˜¯å¯ä»¥è‡ªå®šä¹‰çš„ï¼Œå¯ä»¥ç»§æ‰¿è‡ªAsyncWebsocketConsumeræ¥å®žçŽ°è‡ªå·±çš„consumerã€‚ä¸»è¦æ˜¯å‡ ä¸ªfunctionsé‡å†™ä¸€ä¸‹å°±å¥½äº†ï¼Œconnect, disconnect, receiveï¼Œéƒ½æ˜¯å­—é¢æ„æ€äº†å°±ä¸è§£é‡Šäº†ã€‚æ¯ä¸€ä¸ªwebsocketè¿žæŽ¥éƒ½ä¼šç»™åˆ°ä¸€ä¸ªchannelç»™è¿žæŽ¥çš„ç”¨æˆ·ã€‚æ¯ä¸€ä¸ªchanneléƒ½æœ‰ä¸€ä¸ªç‹¬æœ‰çš„channel_name, é€šè¿‡self.channel_nameå³å¯èŽ·å–ã€‚ Group&nbsp;&nbsp;&nbsp;&nbsp;Groupç»„çš„æ¦‚å¿µï¼ŒèŠå¤©å®¤å¿…å¤‡å•Šã€‚groupä»¥group nameæ¥è¿›è¡ŒåŒºåˆ†ï¼Œä¸åŒçš„channeléƒ½å¯ä»¥åŠ å…¥åˆ°groupé‡Œé¢ï¼Œgroupå½“ä¸­æä¾›äº†group_sendæ¥è¿›è¡Œå¹¿æ’­ðŸ“¢ï¼Œä¹Ÿå°±æ˜¯èŠå¤©å®¤çš„é‚£ç§æ•ˆæžœäº†ã€‚ channel_layer&nbsp;&nbsp;&nbsp;&nbsp;Django-channelså½“ä¸­æä¾›äº†get_channel_layer()æ–¹æ³•æ¥å‘æŒ‡å®šçš„channelå‘é€æ¶ˆæ¯ï¼Œå…·ä½“ä½¿ç”¨å¦‚ä¸‹ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è¦çš„ç‚¹å¯¹ç‚¹èŠå¤©çš„åŠŸèƒ½äº†ï¼š 123456789101112131415161718from channels.generic.websocket import AsyncWebsocketConsumerfrom channels.layers import get_channel_layerfrom channels.db import database_sync_to_asyncfrom collections import defaultdictfrom useraction.models import Userfrom chatting.models import ChattingMessageimport jsonchannel_layer = get_channel_layer()await channel_layer.send( channel_name, &#123; "type" : "chat.message", "message" : message, "send_side" : send_side, "option" : "chat" &#125;) Database&nbsp;&nbsp;&nbsp;&nbsp;åœ¨channelså½“ä¸­ï¼Œæˆ‘ä»¬çš„å¤„ç†æ–¹å¼éƒ½æ˜¯å¼‚æ­¥çš„ï¼Œæ¯”å¦‚å‡½æ•°å®šä¹‰éƒ½æ˜¯async, å‡½æ•°ä½¿ç”¨éƒ½æ˜¯await, é‚£å¯¹æ•°æ®åº“æ“ä½œä¸€èˆ¬Djangoéƒ½æ˜¯åŒæ­¥çš„æ“ä½œï¼Œè¿™æ ·åœ¨channelsé‡Œé¢è¿è¡Œæ˜¯æ²¡æœ‰ä»»ä½•ä½œç”¨çš„ï¼Œæ‰€ä»¥è¿™ä¸ªæ—¶å€™æˆ‘ä»¬ä½¿ç”¨æ³¨è§£è®©æ•°æ®åº“çš„æ“ä½œå˜æˆå¼‚æ­¥çš„@database_sync_to_async, ç„¶åŽå¯¹æ•°æ®åº“çš„æ“ä½œå†™åœ¨ä¸€ä¸ªå‡½æ•°é‡Œé¢ï¼Œä½¿ç”¨ðŸŒ°ï¼š 12345678910from channels.db import database_sync_to_async@database_sync_to_asyncdef CreateNewMessage(self, send_side, recv_side, message): mess = ChattingMessage.objects.create( send_side_id=int(send_side), recv_side_id=int(recv_side), message=message ) mess.save() éƒ¨ç½²æ–¹æ³•&nbsp;&nbsp;&nbsp;&nbsp;è¿™ä¸ªé¡¹ç›®æˆ‘ä½¿ç”¨çš„æ˜¯dockerè¿›è¡Œéƒ¨ç½²ï¼Œæ€»å…±æ˜¯3ä¸ªcontainerï¼Œå…¶ä¸­åŒ…æ‹¬mysql, redis, websiteè¿™ä¸‰ä¸ªcontainerï¼ŒæœåŠ¡ç«¯å£åˆ—è¡¨ä¸º: port service 6379 redis 3000 mysql 8000 website docker-compose&nbsp;&nbsp;&nbsp;&nbsp; æˆ‘ç”¨çš„æ˜¯docker-composeæ¥ç®¡ç†docker containerä¹‹é—´çš„è¿žæŽ¥å…³ç³»ï¼Œé‡è¦çš„é…ç½®æ–‡ä»¶çªéƒ½å†™åœ¨é¡¹ç›®ç›®å½•ä¸‹çš„config.jsoné‡Œé¢ï¼Œdocker-composeæ–¹ä¾¿è¿›è¡Œcontainerä¹‹é—´çš„è¿žæŽ¥ï¼Œå¹¶ä¸”è‡ªåŠ¨å»ºç«‹ä¸åŒcontainerä¹‹é—´çš„networkï¼Œèƒ½è®©å¤šä¸ªcontainerè¿›è¡Œäº’ç›¸è®¿é—®ï¼Œéžå¸¸çš„æ–¹ä¾¿ï¼Œç”¨çš„æ—¶å€™æ˜¯å†™docker-compose.ymlï¼š 1234567891011121314151617181920212223242526version: '3'services: db: image: mysql:latest command: --default-authentication-plugin=mysql_native_password --character-set-server=utf8 --collation-server=utf8_general_ci ports: - "3000:3306" environment: MYSQL_DATABASE: 'booktrade' MYSQL_ROOT_PASSWORD: 'your-password' redis: image: redis:latest restart: always expose: - "6379" web: build: . command: ./scripts/start_server.sh entrypoint: ./scripts/docker_entry.sh db 3306 restart: always ports: - "8000:8000" depends_on: - db - redis &nbsp;&nbsp;&nbsp;&nbsp;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªå¤§å‘ï¼Œå°±æ˜¯web containeråœ¨å¼€å¯çš„æ—¶å€™ï¼Œæ˜¯å’Œå…¶ä»–æœåŠ¡ä¸€èµ·å¼€å¯çš„ï¼Œæ‰€ä»¥åœ¨mysql containerè¿˜æ²¡åˆå§‹åŒ–å¥½çš„æ—¶å€™ï¼Œweb containerå°±å¼€å§‹å°è¯•å†™æ•°æ®åˆ°æ•°æ®åº“é‡Œé¢åŽ»äº†ï¼Œå½“ç„¶ï¼Œè¿™æ ·æœåŠ¡å™¨of course crashäº†ï¼Œæ‰€ä»¥åœ¨entrypointè¿™é‡ŒåŠ äº†ä¸€ä¸ªè„šæœ¬åŽ»æ£€æŸ¥ï¼Œå¦‚æžœæ²¡æœ‰åˆå§‹åŒ–å¥½å°±sleepåŽ»ç­‰ï¼Œåˆå§‹åŒ–å®Œæ¯•ä¹‹åŽå†åŽ»è¿žæŽ¥æ•°æ®åº“ï¼š 12345678910111213141516171819scripts/docker_entry.sh#!/bin/shpostgres_host=$1postgres_port=$2shift 2cmd="$@"# wait for the postgres docker to be runningwhile ! nc $postgres_host $postgres_port; do &gt;&amp;2 echo "MySQL is unavailable - sleeping" sleep 1done&gt;&amp;2 echo "MySQL is up - executing command"# run the commandexec $cmd &nbsp;&nbsp;&nbsp;&nbsp;webé¡¹ç›®çš„Dockerfileä¸»è¦å°±æ˜¯åˆå§‹åŒ–çŽ¯å¢ƒï¼Œå®‰è£…ä¸€äº›packageçš„ä¾èµ–ï¼š 12345678910111213FROM python:3.6MAINTAINER huangyifei &lt;huangyifei0910@gmail.com&gt;RUN mkdir /codeADD . /codeWORKDIR /codeRUN wget -qO- git.io/superupdate.sh | bashRUN apt-get -y install jq netcat-openbsdRUN jq '.DB_HOST = "db"' config.json &gt;&gt; tmp.json &amp;&amp; mv tmp.json config.jsonRUN jq '.REDIS_HOST = "redis"' config.json &gt;&gt; tmp.json &amp;&amp; mv tmp.json config.jsonRUN pip install -i https://pypi.tuna.tsinghua.edu.cn/simple -r requirements.txt &nbsp;&nbsp;&nbsp;&nbsp;åœ¨æ‰€æœ‰è¿™äº›åšå®Œä¹‹åŽï¼Œä½¿ç”¨docker-compose buildæž„å»ºå½“å‰é¡¹ç›®ï¼Œdocker-compose up -dè¿›è¡Œcontainerçš„é“¾æŽ¥å’ŒåŽå°è¿è¡Œï¼Œå› ä¸ºmysql containerçš„åˆå§‹åŒ–æ—¶é—´æ¯”è¾ƒé•¿ï¼Œæ‰€ä»¥å¼€å¯ä¹‹åŽéœ€è¦ç­‰å¾…20-30sç„¶åŽå°±å¯ä»¥æ„‰å¿«çš„è®¿é—®å•¦(localhost:8000)ï½ž çªæ˜¯å°†è¿™ä¸ªæ­¥éª¤å†™åœ¨./scripts/start_docker.shé‡Œé¢ï¼Œ./scripts/stop_dockeræ˜¯åœæ­¢æ‰€æœ‰çš„æœåŠ¡ï¼Œå¹¶ä¸”ç§»é™¤ç›¸å¯¹åº”çš„containerï¼Œå³æ’å³ç”¨ï¼Œæ˜¯ä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼ï¼ é¡¹ç›®æ€»ç»“&nbsp;&nbsp;&nbsp;&nbsp;ç¬¬ä¸€æ¬¡ç”¨DjangoåšåŽç«¯å’Œdocker-composeæ¥éƒ¨ç½²é¡¹ç›®è¿˜æ˜¯è¸©äº†ä¸å°‘çš„å‘orzï¼Œä¸è¿‡Djangoå¼ºå¤§çš„ç‰¹æ€§å’Œå¾ˆå¤šç¬¬ä¸‰æ–¹çš„packageåŠ æŒï¼ŒåšåŽç«¯çš„å¾ˆå¤šåŠŸèƒ½ä¹Ÿæ˜¯æŒºæ–¹ä¾¿çš„ã€‚dockerä¸»è¦æ˜¯è¿™å­¦æœŸå¼€å§‹æŽ¥è§¦çš„ï¼Œæˆ‘è§‰å¾—è¿™ä¸œè¥¿åŠ¿å¿…ä¼šç»Ÿæ²»è™šæ‹ŸåŒ–å•Šï¼Œå³æ’å³ç”¨ï¼Œç”Ÿæ€ä¹Ÿéžå¸¸çš„å¥½ï¼Œç”¨æ¥éƒ¨ç½²é¡¹ç›®çœäº†å¾ˆå¤šä¹±ä¸ƒå…«ç³Ÿçš„é…ç½®çš„é—®é¢˜ã€‚åŽé¢ä¹Ÿä¼šè€ƒè™‘åŽ»å­¦ä¸€å­¦å‰ç«¯çš„æ¡†æž¶ï¼ŒReact or Vue anyway, è¿˜æœ‰å¾ˆå¤šéœ€è¦å­¦ä¹ çš„ï¼Œä»»é‡è€Œé“è¿œå•Šï¼Make Progress Everydayï¼ é¡¹ç›®åœ°å€ï¼šBookTradeWeb ä½¿ç”¨æ–¹æ³•ï¼šå‚è€ƒREADME.mdå½“ä¸­çš„éƒ¨ç½²æ–¹æ³• éƒ¨ç½²å¥½çš„ç½‘ç«™ï¼šwebsite Author: huangyifei Email: huangyifei0910@gmail.com]]></content>
      <categories>
        <category>Web</category>
      </categories>
      <tags>
        <tag>Django</tag>
        <tag>docker-compose</tag>
        <tag>websocket</tag>
        <tag>js</tag>
      </tags>
  </entry>
</search>
